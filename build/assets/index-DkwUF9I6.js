import{r as o,j as e,S as at,e as U,f as Qe,h as je,P as Xe,L as we,i as Fe,U as Ve,T as G,F as Ke,k as K,l as De,m as le,B as ae,Z as Ne,C as ht,n as Ee,o as yt,p as Q,H as za,q as Kt,s as Jt,t as Sa,I as Ca,u as Ia,v as it,w as Yt,x as wt,y as Ta,z as st,D as Aa,E as Pa,G as La,J as $a,K as Ea,M as qa,N as _a,X as qe,O as Je,Q as Ye,V as Z,W as rt,Y as It,_ as Ba,$ as Oa,a0 as Ma,a1 as Ra,a2 as Va,a3 as Da,a4 as Fa,a5 as Ua,a6 as Zt,a7 as Ga,a8 as Ha,a9 as Wa,aa as ea,ab as Qa,ac as Tt,ad as Xa,ae as Ka,af as Ja,ag as Ya,ah as Za,ai as ei,aj as ti,ak as ta,al as aa,am as re,an as ai,ao as ii,ap as si,aq as ri,ar as ni,as as oi,at as li,au as ci,av as gt,aw as di,ax as At,ay as mi,az as ui,aA as pi,aB as xi,aC as hi,aD as gi,aE as bi,aF as fi,aG as vi,aH as ji,aI as yi,aJ as wi,aK as Ni,aL as ki,aM as zi,aN as Si,aO as Ci}from"./react-vendor-DAuoNPZP.js";import{c as Ii}from"./supabase-DPo2wFUI.js";import{v as C,w as Ti,x as Ai,y as nt,R as Pi,L as Li,C as $i,X as Ei,Y as qi,T as _i,z as Bi,A as Oi,B as Mi}from"./vendor-Dztt_Rj5.js";import{m as u,u as ia,A as ge}from"./motion-DxRVDxSX.js";(function(){const a=document.createElement("link").relList;if(a&&a.supports&&a.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const m of s)if(m.type==="childList")for(const r of m.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&n(r)}).observe(document,{childList:!0,subtree:!0});function i(s){const m={};return s.integrity&&(m.integrity=s.integrity),s.referrerPolicy&&(m.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?m.credentials="include":s.crossOrigin==="anonymous"?m.credentials="omit":m.credentials="same-origin",m}function n(s){if(s.ep)return;s.ep=!0;const m=i(s);fetch(s.href,m)}})();const ke="tzorfzsdhyceyumhlfdp",xe="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InR6b3JmenNkaHljZXl1bWhsZmRwIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDYxMDMyMDksImV4cCI6MjA2MTY3OTIwOX0.2qCFMZpdXEyLKitpoB9BvgSxz2YEKMSsbb4Q0GVP4Cw",sa=Object.freeze(Object.defineProperty({__proto__:null,projectId:ke,publicAnonKey:xe},Symbol.toStringTag,{value:"Module"})),Ue=`https://${ke}.supabase.co`,Ze=xe;typeof window<"u"&&console.log("ðŸ”Œ Supabase Configuration:",{source:"Default/Fallback",url:Ue,configured:!!(Ue&&Ze)});const M=!!(Ue&&Ze&&Ue!==""&&Ze!==""),$=M?Ii(Ue,Ze,{auth:{persistSession:!0,autoRefreshToken:!0,detectSessionInUrl:!0,storage:typeof window<"u"?window.localStorage:void 0}}):null,Nt=()=>$;async function Ri(t){if(!M||!$)return null;try{const{data:a,error:i}=await $.from("user_profiles").select("*").eq("id",t).single();if(i)throw i;return a}catch(a){return console.error("Error fetching user profile:",a),null}}async function Vi(t){if(!M||!$)return null;try{const{data:a,error:i}=await $.from("user_gamification").select("*").eq("user_id",t).single();if(i)throw i;return a}catch(a){return console.error("Error fetching gamification stats:",a),null}}async function Di(t){if(!M||!$)return{totalTrades:0,totalPnL:0};try{const{data:a,error:i}=await $.from("daily_journal").select("trades_count, pnl").eq("user_id",t);if(i)throw i;const n=a?.reduce((m,r)=>m+(r.trades_count||0),0)||0,s=a?.reduce((m,r)=>m+(r.pnl||0),0)||0;return{totalTrades:n,totalPnL:s}}catch(a){return console.error("Error fetching journal stats:",a),{totalTrades:0,totalPnL:0}}}async function Fi(){if(!M||!$)return null;try{const{data:t,error:a}=await $.from("ai_trading_signals").select("*").order("created_at",{ascending:!1}).limit(1).single();if(a)throw a;return t}catch(t){return console.error("Error fetching AI signal:",t),null}}async function Ui(t){if(!M||!$)return null;try{const{data:a,error:i}=await $.from("user_progress").select("*").eq("user_id",t).single();if(i){const n=["42P01","PGRST116","PGRST204","42703","42809"],s=i.code||"";return n.includes(s)||console.error("Error fetching user progress:",i),null}return a}catch{return null}}async function Gi(t,a){if(!M||!$)return null;try{const i={user_id:t,level:1,xp:0,xp_to_next_level:1e3,streak:0,badges:[],lessons_completed:0,total_lessons:15,current_lesson:1},{data:n,error:s}=await $.from("user_progress").insert(i).select().single();if(s){const m=["42P01","PGRST116","PGRST204","42703","42809"],r=s.code||"";return m.includes(r)||console.error("Error creating user progress:",s),null}return await $.from("leaderboard_entries").insert({user_id:t,username:a,total_xp:0,level:1,streak:0,badges_count:0}).catch(()=>{}),n}catch{return null}}async function Hi(t,a){if(!M||!$)return!1;try{const{error:i}=await $.from("user_progress").update(a).eq("user_id",t);if(i){const n=["42P01","PGRST116","PGRST204","42703","42809"],s=i.code||"";return n.includes(s)||console.error("Error updating user progress:",i),!1}if(a.xp!==void 0||a.level!==void 0)try{const{data:n}=await $.from("user_progress").select("xp, level, streak, badges").eq("user_id",t).single();n&&(await $.from("leaderboard_entries").update({total_xp:n.xp,level:n.level,streak:n.streak,badges_count:n.badges?.length||0}).eq("user_id",t).catch(()=>{}),await $.rpc("update_leaderboard_ranks").catch(()=>{}))}catch{}return!0}catch{return!1}}async function Pt(t,a,i,n){if(!M||!$)return!1;try{const{error:s}=await $.from("user_activities").insert({user_id:t,activity_type:a,activity_description:i,xp_earned:n});return!s}catch{return!1}}async function ut(t,a=10){if(!M||!$)return[];try{const{data:i,error:n}=await $.from("user_activities").select("*").eq("user_id",t).order("created_at",{ascending:!1}).limit(a);if(n){const s=["42P01","PGRST116","PGRST204","42703","42809"],m=n.code||"";return s.includes(m)||console.error("Error fetching user activities:",n),[]}return i||[]}catch{return[]}}async function Wi(t=50){if(!M||!$)return[];try{const{data:a,error:i}=await $.from("leaderboard_entries").select("*").order("total_xp",{ascending:!1}).limit(t);if(i){const n=["42P01","PGRST116","PGRST204","42703","42809"],s=i.code||"";return n.includes(s)||console.error("Error fetching leaderboard:",i),[]}return a||[]}catch{return[]}}function be(){const[t,a]=o.useState(null),[i,n]=o.useState(null),[s,m]=o.useState(!0);return o.useEffect(()=>{if(!M){console.log("Supabase not configured, using local mode");const p=localStorage.getItem("btcwheel_local_user");if(p)try{const x=JSON.parse(p);a(x)}catch(x){console.error("Error parsing local user:",x),localStorage.removeItem("btcwheel_local_user")}m(!1);return}$.auth.getSession().then(({data:{session:p}})=>{n(p),a(p?.user??null),m(!1)});const{data:{subscription:b}}=$.auth.onAuthStateChange((p,x)=>{n(x),a(x?.user??null),m(!1)});return()=>b.unsubscribe()},[]),{user:t,session:i,loading:s,signIn:async(h,b)=>{if(!M){const p=localStorage.getItem("btcwheel_local_user");if(p){const x=JSON.parse(p);if(x.email===h)return a(x),C.success("Accesso effettuato!"),{user:x,error:null}}return C.error("Credenziali non valide"),{user:null,error:new Error("Invalid credentials")}}try{const{data:p,error:x}=await $.auth.signInWithPassword({email:h,password:b});return x?(C.error(x.message),{user:null,error:x}):(C.success("Accesso effettuato!"),{user:p.user,error:null})}catch(p){return console.error("Sign in error:",p),C.error("Errore durante l'accesso"),{user:null,error:p}}},signUp:async(h,b,p)=>{if(!M){const x={id:`local-${Date.now()}`,email:h,user_metadata:{name:p||"User"},created_at:new Date().toISOString()};return localStorage.setItem("btcwheel_local_user",JSON.stringify(x)),a(x),C.success("Account creato! Benvenuto!"),{user:x,error:null}}try{const{data:x,error:g}=await $.auth.signUp({email:h,password:b,options:{data:{name:p||"User"}}});return g?(C.error(g.message),{user:null,error:g}):(C.success("Account creato! Controlla la tua email per confermare."),{user:x.user,error:null})}catch(x){return console.error("Sign up error:",x),C.error("Errore durante la registrazione"),{user:null,error:x}}},signOut:async()=>{if(!M)return localStorage.removeItem("btcwheel_local_user"),a(null),C.success("Disconnesso"),{error:null};try{const{error:h}=await $.auth.signOut();return h?(C.error(h.message),{error:h}):(C.success("Disconnesso"),{error:null})}catch(h){return console.error("Sign out error:",h),C.error("Errore durante la disconnessione"),{error:h}}},signInWithGoogle:async()=>{if(!M)return C.error("Google Sign-In richiede configurazione Supabase"),{user:null,error:new Error("Supabase not configured")};try{const{data:h,error:b}=await $.auth.signInWithOAuth({provider:"google",options:{redirectTo:`${window.location.origin}`}});return b?(C.error(b.message),{user:null,error:b}):{user:h,error:null}}catch(h){return console.error("Google sign in error:",h),C.error("Errore durante l'accesso con Google"),{user:null,error:h}}}}}function A(...t){return Ti(Ai(t))}const Qi=nt("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-white hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border bg-background text-foreground hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9 rounded-md"}},defaultVariants:{variant:"default",size:"default"}});function N({className:t,variant:a,size:i,asChild:n=!1,...s}){const m=n?at:"button";return e.jsx(m,{"data-slot":"button",className:A(Qi({variant:a,size:i,className:t})),...s})}function k({className:t,...a}){return e.jsx("div",{"data-slot":"card",className:A("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border",t),...a})}const Xi=nt("inline-flex items-center justify-center rounded-md border px-2 py-0.5 text-xs font-medium w-fit whitespace-nowrap shrink-0 [&>svg]:size-3 gap-1 [&>svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-[color,box-shadow] overflow-hidden",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground [a&]:hover:bg-primary/90",secondary:"border-transparent bg-secondary text-secondary-foreground [a&]:hover:bg-secondary/90",destructive:"border-transparent bg-destructive text-white [a&]:hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"text-foreground [a&]:hover:bg-accent [a&]:hover:text-accent-foreground"}},defaultVariants:{variant:"default"}});function O({className:t,variant:a,asChild:i=!1,...n}){const s=i?at:"span";return e.jsx(s,{"data-slot":"badge",className:A(Xi({variant:a}),t),...n})}const Ki="/mascot-excited.png",Ji="/logo.svg",pt=Ki,Lt=Ji;function $t({end:t,duration:a=2}){const[i,n]=o.useState(0),s=o.useRef(null),m=ia(s);return o.useEffect(()=>{if(!m)return;let r,l;const c=d=>{r||(r=d);const h=Math.min((d-r)/(a*1e3),1);n(Math.floor(h*t)),h<1&&(l=requestAnimationFrame(c))};return l=requestAnimationFrame(c),()=>cancelAnimationFrame(l)},[t,a,m]),e.jsx("span",{ref:s,children:i.toLocaleString()})}function Me({delay:t=0,color:a}){return e.jsx(u.div,{className:`absolute w-32 h-32 rounded-full blur-3xl ${a} opacity-20`,animate:{x:[0,100,0],y:[0,-100,0],scale:[1,1.2,1]},transition:{duration:8,repeat:1/0,delay:t,ease:"easeInOut"}})}function Yi({onNavigate:t}){const[a,i]=o.useState(null),n=o.useRef(null);o.useEffect(()=>{},[]);const s=[{icon:ae,title:"AI Tutor Personalizzato",description:"Prof Satoshi, la tua mascotte AI, ti guida con consigli personalizzati basati sul tuo livello e stile di apprendimento.",gradient:"from-purple-500 to-blue-500",glowColor:"shadow-purple-500/50",stats:"GPT-4o powered"},{icon:le,title:"Missioni Guidate",description:"Impara attraverso missioni progressive che ti portano da principiante a master trader della Wheel Strategy.",gradient:"from-blue-500 to-cyan-500",glowColor:"shadow-blue-500/50",stats:"5 livelli progressivi"},{icon:ht,title:"Paper Trading Reale",description:"Simula trades con prezzi Bitcoin live senza rischiare capitale. Guadagna XP e sblocca strategie avanzate.",gradient:"from-orange-500 to-pink-500",glowColor:"shadow-orange-500/50",stats:"Dati market live"},{icon:G,title:"Gamification Completa",description:"Sistema XP, badge, streak giornalieri e leaderboard globale. Competi con altri trader e sali di livello.",gradient:"from-green-500 to-teal-500",glowColor:"shadow-green-500/50",stats:"20+ badge unici"},{icon:Ee,title:"Lezioni Interattive",description:"Quiz, flashcard e contenuti progressivi dal basic all'avanzato. Ogni lezione ti porta piÃ¹ vicino alla maestria.",gradient:"from-pink-500 to-purple-500",glowColor:"shadow-pink-500/50",stats:"15+ lezioni"},{icon:Ve,title:"Community Globale",description:"Unisciti a migliaia di trader. Condividi strategie, confronta performance e impara dai migliori.",gradient:"from-indigo-500 to-purple-500",glowColor:"shadow-indigo-500/50",stats:"Leaderboard live"}],m=[{value:1e4,label:"Studenti Attivi",icon:Ve,suffix:"+"},{value:95,label:"Success Rate",icon:K,suffix:"%"},{value:4.9,label:"Rating Medio",icon:De,suffix:"/5",decimals:!0},{value:5e5,label:"Missioni Completate",icon:le,suffix:"+"}],r=[{name:"Marco R.",role:"Beginner Trader",avatar:"https://api.dicebear.com/7.x/avataaars/svg?seed=Marco",content:"In 2 settimane ho capito la Wheel Strategy meglio di quanto avessi fatto in 6 mesi di video YouTube. Le missioni sono geniali!",rating:5},{name:"Giulia T.",role:"Intermediate Investor",avatar:"https://api.dicebear.com/7.x/avataaars/svg?seed=Giulia",content:"Il paper trading mi ha permesso di fare pratica senza stress. Ora gestisco le opzioni Bitcoin con sicurezza nel mondo reale.",rating:5},{name:"Luca M.",role:"Advanced Trader",avatar:"https://api.dicebear.com/7.x/avataaars/svg?seed=Luca",content:"Prof Satoshi Ã¨ come avere un mentor personale 24/7. I suoi consigli sono sempre spot-on e mi hanno fatto evitare errori costosi.",rating:5}],l=[{name:"Free",price:"0",description:"Perfetto per iniziare",features:["Accesso a tutte le lezioni base","3 missioni guidate","Paper trading limitato","Leaderboard locale","Prof Satoshi con limiti"],cta:"Inizia Gratis",popular:!1},{name:"Pro",price:"9.99",period:"/mese",description:"Il piÃ¹ popolare",features:["Tutte le lezioni + contenuti premium","Tutte le 15+ missioni","Paper trading illimitato","Leaderboard globale","Prof Satoshi AI illimitato","Analytics avanzati","Supporto prioritario"],cta:"Diventa Pro",popular:!0},{name:"Enterprise",price:"Custom",description:"Per team e organizzazioni",features:["Tutto di Pro +","Dashboard team","Report personalizzati","API access","Onboarding dedicato","SLA garantito"],cta:"Contattaci",popular:!1}];return e.jsxs("div",{className:"min-h-screen bg-gray-950 text-white overflow-hidden",children:[e.jsx(u.nav,{className:"fixed top-0 w-full bg-gray-950/80 backdrop-blur-xl border-b border-gray-800 z-50",initial:{y:-100},animate:{y:0},transition:{duration:.6,ease:"easeOut"},children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 py-4 md:px-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs(u.div,{className:"flex items-center gap-3",whileHover:{scale:1.05},children:[e.jsx(u.div,{className:"w-10 h-10 relative",animate:{rotate:[0,5,-5,0]},transition:{duration:3,repeat:1/0,ease:"easeInOut"},children:e.jsx("img",{src:Lt,alt:"btcwheel Logo",className:"w-full h-full object-contain",style:{filter:"drop-shadow(0 4px 12px rgba(52, 211, 153, 0.4))"}})}),e.jsx("span",{className:"text-white font-bold text-xl",children:"btcwheel"})]}),e.jsxs("div",{className:"hidden md:flex items-center gap-6",children:[e.jsx("a",{href:"#features",className:"text-gray-400 hover:text-white transition-colors",children:"FunzionalitÃ "}),e.jsx("a",{href:"#pricing",className:"text-gray-400 hover:text-white transition-colors",children:"Prezzi"}),e.jsx("a",{href:"#testimonials",className:"text-gray-400 hover:text-white transition-colors",children:"Testimonianze"})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(N,{variant:"ghost",onClick:()=>t("auth"),className:"text-gray-400 hover:text-white hover:bg-gray-800",children:"Accedi"}),e.jsx(N,{className:"bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-700 hover:to-purple-700 shadow-lg shadow-blue-500/50",onClick:()=>t("onboarding"),children:"Inizia Gratis"})]})]})})}),e.jsxs("section",{className:"relative pt-32 pb-20 md:pt-40 md:pb-32 overflow-hidden",ref:n,children:[e.jsxs("div",{className:"absolute inset-0",children:[e.jsx(Me,{delay:0,color:"bg-blue-600"}),e.jsx(Me,{delay:2,color:"bg-purple-600"}),e.jsx(Me,{delay:4,color:"bg-orange-600"}),e.jsx("div",{className:"absolute inset-0 opacity-10",style:{backgroundImage:"linear-gradient(rgba(59, 130, 246, 0.1) 1px, transparent 1px), linear-gradient(90deg, rgba(59, 130, 246, 0.1) 1px, transparent 1px)",backgroundSize:"50px 50px",transform:"perspective(500px) rotateX(60deg) translateZ(-100px)"}}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-gray-950 via-gray-950/90 to-gray-950"})]}),e.jsx("div",{className:"max-w-7xl mx-auto px-4 md:px-6 relative z-10",children:e.jsxs("div",{className:"grid md:grid-cols-2 gap-12 items-center",children:[e.jsxs(u.div,{initial:{opacity:0,x:-50},animate:{opacity:1,x:0},transition:{duration:.8,ease:"easeOut"},children:[e.jsx(u.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},children:e.jsxs(O,{className:"mb-6 bg-gradient-to-r from-blue-600 to-purple-600 text-white border-0 px-4 py-2",children:[e.jsx(U,{className:"w-4 h-4 mr-2"}),"Nuovo: AI Tutor con GPT-4o"]})}),e.jsxs(u.h1,{className:"text-5xl md:text-7xl font-bold mb-6 leading-tight",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},children:["Impara la Bitcoin Wheel Strategy con il",e.jsx(u.span,{className:"block mt-2 bg-gradient-to-r from-blue-400 via-purple-400 to-orange-400 bg-clip-text text-transparent",animate:{backgroundPosition:["0% 50%","100% 50%","0% 50%"]},transition:{duration:5,repeat:1/0,ease:"linear"},style:{backgroundSize:"200% 200%"},children:"Metodo PiÃ¹ Efficace"}),"al Mondo"]}),e.jsxs(u.p,{className:"text-gray-400 mb-8 text-xl leading-relaxed",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.4},children:["Da zero a master trader in 30 giorni. Impara con missioni guidate, AI tutor personalizzato e paper trading sicuro.",e.jsx("span",{className:"text-white font-semibold",children:" Niente rischi, solo risultati."})]}),e.jsxs(u.div,{className:"flex flex-col sm:flex-row gap-4 mb-8",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.5},children:[e.jsx(u.div,{whileHover:{scale:1.05},whileTap:{scale:.95},children:e.jsxs(N,{size:"lg",className:"bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-700 hover:to-purple-700 h-14 px-8 shadow-2xl shadow-blue-500/50 text-lg group",onClick:()=>t("onboarding"),children:[e.jsx(Qe,{className:"w-5 h-5 mr-2 group-hover:translate-y-[-4px] transition-transform"}),"Inizia il Percorso Gratis",e.jsx(je,{className:"w-5 h-5 ml-2 group-hover:translate-x-1 transition-transform"})]})}),e.jsx(u.div,{whileHover:{scale:1.05},whileTap:{scale:.95},children:e.jsxs(N,{size:"lg",variant:"outline",className:"h-14 px-8 border-2 border-gray-300 bg-gray-900/50 backdrop-blur hover:bg-gray-800 hover:border-white text-white text-lg group",onClick:()=>{const c=document.getElementById("demo-video");c&&c.scrollIntoView({behavior:"smooth"})},children:[e.jsx(Xe,{className:"w-5 h-5 mr-2 group-hover:scale-110 transition-transform"}),"Guarda Demo"]})})]}),e.jsx(u.div,{className:"flex items-center gap-6 flex-wrap",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.6},children:[{icon:we,text:"Nessuna carta richiesta"},{icon:Fe,text:"100% sicuro"},{icon:Ve,text:"10K+ studenti"}].map((c,d)=>e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-8 h-8 rounded-full bg-green-500/20 flex items-center justify-center",children:e.jsx(c.icon,{className:"w-4 h-4 text-green-400"})}),e.jsx("span",{className:"text-gray-400",children:c.text})]},d))})]}),e.jsx(u.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},transition:{duration:.8,delay:.2},className:"relative",children:e.jsxs("div",{className:"relative",children:[e.jsxs(u.div,{className:"relative z-20 mb-8",animate:{y:[0,-20,0],rotate:[0,-3,3,0]},transition:{duration:4,repeat:1/0,ease:"easeInOut"},children:[e.jsxs(u.div,{className:"relative w-64 h-64 md:w-80 md:h-80 mx-auto",whileHover:{scale:1.1,rotate:[0,-10,10,0]},transition:{duration:.3},children:[e.jsx(u.div,{className:"absolute inset-0 rounded-full bg-blue-500 opacity-20",animate:{scale:[1,1.3,1],opacity:[.2,0,.2]},transition:{duration:2,repeat:1/0,ease:"easeInOut"}}),e.jsx(u.div,{className:"absolute inset-0 rounded-full bg-purple-500 opacity-20",animate:{scale:[1,1.5,1],opacity:[.2,0,.2]},transition:{duration:2,repeat:1/0,ease:"easeInOut",delay:.5}}),e.jsx("img",{src:pt,alt:"Prof Satoshi - Your AI Trading Tutor",className:"w-full h-full object-contain relative z-10",style:{filter:"drop-shadow(0 20px 40px rgba(59, 130, 246, 0.6))"}}),[...Array(8)].map((c,d)=>e.jsx(u.div,{className:"absolute w-3 h-3 bg-yellow-400 rounded-full",style:{top:`${20+Math.random()*60}%`,left:`${20+Math.random()*60}%`},animate:{scale:[0,1.5,0],opacity:[0,1,0],y:[0,-30],x:[0,(Math.random()-.5)*20]},transition:{duration:2,repeat:1/0,delay:d*.3,ease:"easeOut"}},d))]}),e.jsxs(u.div,{className:"absolute top-0 -left-4 md:-left-12 bg-white rounded-2xl px-4 py-3 shadow-2xl border-2 border-blue-500",initial:{opacity:0,scale:0,x:-20},animate:{opacity:1,scale:1,x:0},transition:{delay:1,type:"spring",bounce:.5},children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(U,{className:"w-4 h-4 text-blue-500"}),e.jsx("p",{className:"text-sm font-semibold text-gray-900",children:"Ciao! Sono Prof Satoshi! ðŸŽ“"})]}),e.jsx("div",{className:"absolute -bottom-2 left-8 w-4 h-4 bg-white border-r-2 border-b-2 border-blue-500 rotate-45"})]})]}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-blue-600 to-purple-600 rounded-3xl blur-3xl opacity-50 animate-pulse"}),e.jsx(u.div,{className:"relative z-10",animate:{rotateY:[0,5,0,-5,0],rotateX:[0,2,0,-2,0]},transition:{duration:8,repeat:1/0,ease:"easeInOut"},style:{transformStyle:"preserve-3d",perspective:1e3},children:e.jsxs(k,{className:"p-8 bg-gradient-to-br from-gray-900 to-gray-800 backdrop-blur-xl border-2 border-gray-700 shadow-2xl rounded-3xl",children:[e.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[e.jsx(u.div,{className:"w-16 h-16 bg-gradient-to-br from-orange-500 to-pink-500 rounded-2xl flex items-center justify-center",animate:{rotate:[0,10,-10,0]},transition:{duration:3,repeat:1/0},children:e.jsx(G,{className:"w-8 h-8 text-white"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-400",children:"Il Tuo Progresso"}),e.jsx("p",{className:"text-white font-bold text-lg",children:"Level 12 - Master Trader"})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-gray-400",children:"XP Progress"}),e.jsx("span",{className:"text-white font-semibold",children:"7,850 / 10,000"})]}),e.jsx("div",{className:"h-3 bg-gray-800 rounded-full overflow-hidden",children:e.jsx(u.div,{className:"h-full bg-gradient-to-r from-blue-600 via-purple-600 to-orange-600",initial:{width:0},animate:{width:"78.5%"},transition:{duration:2,delay:.5}})})]}),e.jsx("div",{className:"grid grid-cols-3 gap-3",children:[{value:"12",label:"Missioni",color:"blue"},{value:"8",label:"Badge",color:"purple"},{value:"45",label:"Streak",color:"orange"}].map((c,d)=>e.jsxs(u.div,{className:`bg-${c.color}-500/10 border border-${c.color}-500/20 p-3 rounded-xl text-center`,whileHover:{scale:1.05,y:-5},transition:{type:"spring",stiffness:300},children:[e.jsx("p",{className:`text-${c.color}-400 font-bold text-xl mb-1`,children:c.value}),e.jsx("p",{className:"text-gray-200 text-sm font-medium",children:c.label})]},d))})]})]})}),e.jsx(u.div,{className:"absolute -top-8 -right-8 z-20",animate:{y:[0,-10,0],rotate:[0,10,0],scale:[1,1.1,1]},transition:{duration:3,repeat:1/0},children:e.jsxs("div",{className:"bg-gradient-to-br from-green-500 to-emerald-600 text-white px-6 py-3 rounded-2xl shadow-2xl shadow-green-500/50 flex items-center gap-2 border border-green-400/50",children:[e.jsx(U,{className:"w-5 h-5"}),e.jsx("span",{className:"font-bold text-lg",children:"+200 XP"})]})}),e.jsx(u.div,{className:"absolute -bottom-6 -left-6 z-20",animate:{scale:[1,1.2,1],rotate:[0,180,360]},transition:{duration:4,repeat:1/0},children:e.jsx("div",{className:"bg-gradient-to-br from-purple-500 to-pink-600 text-white p-5 rounded-3xl shadow-2xl shadow-purple-500/50 border border-purple-400/50",children:e.jsx(G,{className:"w-10 h-10"})})}),e.jsx(u.div,{className:"absolute top-1/2 -left-12 z-20",animate:{x:[0,-10,0],rotate:[0,-10,0]},transition:{duration:2.5,repeat:1/0},children:e.jsx("div",{className:"bg-gradient-to-br from-orange-500 to-red-600 text-white p-4 rounded-2xl shadow-2xl shadow-orange-500/50",children:e.jsx(Ke,{className:"w-8 h-8"})})})]})})]})})]}),e.jsx("section",{className:"py-16 border-y border-gray-800 bg-gray-900/50 backdrop-blur",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 md:px-6",children:e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-8",children:m.map((c,d)=>e.jsxs(u.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},viewport:{once:!0},transition:{delay:d*.1},className:"text-center group",children:[e.jsx(u.div,{className:"inline-flex items-center justify-center w-16 h-16 bg-gradient-to-br from-blue-500/20 to-purple-500/20 rounded-2xl mb-4 border border-blue-500/20",whileHover:{scale:1.1,rotate:5},children:e.jsx(c.icon,{className:"w-8 h-8 text-blue-400 group-hover:text-blue-300 transition-colors"})}),e.jsx("p",{className:"text-4xl font-bold text-white mb-2",children:c.decimals?e.jsxs(e.Fragment,{children:[e.jsx($t,{end:c.value}),c.suffix]}):e.jsxs(e.Fragment,{children:[e.jsx($t,{end:c.value}),c.suffix]})}),e.jsx("p",{className:"text-gray-400",children:c.label})]},d))})})}),e.jsx("section",{className:"py-20 md:py-32 relative overflow-hidden bg-gradient-to-b from-gray-950 via-blue-950/20 to-gray-950",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 md:px-6",children:e.jsxs("div",{className:"grid md:grid-cols-2 gap-12 items-center",children:[e.jsx(u.div,{initial:{opacity:0,x:-50},whileInView:{opacity:1,x:0},viewport:{once:!0},className:"relative order-2 md:order-1",children:e.jsxs(u.div,{className:"relative w-full max-w-md mx-auto",animate:{y:[0,-15,0]},transition:{duration:4,repeat:1/0,ease:"easeInOut"},children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-purple-600/30 to-blue-600/30 rounded-full blur-3xl"}),e.jsx(u.img,{src:pt,alt:"Prof Satoshi AI Tutor",className:"w-full h-full object-contain relative z-10",style:{filter:"drop-shadow(0 20px 60px rgba(139, 92, 246, 0.6))"},whileHover:{scale:1.05,rotate:[0,-5,5,0]},transition:{duration:.3}}),e.jsxs(u.div,{className:"absolute top-10 -right-4 bg-gradient-to-br from-blue-500 to-purple-600 text-white px-4 py-2 rounded-full shadow-xl flex items-center gap-2",animate:{y:[0,-10,0],rotate:[0,5,0]},transition:{duration:3,repeat:1/0,delay:.5},children:[e.jsx(ae,{className:"w-4 h-4"}),e.jsx("span",{className:"font-semibold text-sm",children:"GPT-4o"})]}),e.jsxs(u.div,{className:"absolute bottom-20 -left-4 bg-gradient-to-br from-green-500 to-teal-600 text-white px-4 py-2 rounded-full shadow-xl flex items-center gap-2",animate:{y:[0,10,0],rotate:[0,-5,0]},transition:{duration:3,repeat:1/0,delay:1},children:[e.jsx(U,{className:"w-4 h-4"}),e.jsx("span",{className:"font-semibold text-sm",children:"24/7 Disponibile"})]})]})}),e.jsxs(u.div,{initial:{opacity:0,x:50},whileInView:{opacity:1,x:0},viewport:{once:!0},className:"order-1 md:order-2",children:[e.jsxs(O,{className:"mb-6 bg-purple-500/10 text-purple-400 border border-purple-500/20 px-4 py-2",children:[e.jsx(ae,{className:"w-4 h-4 mr-2"}),"Incontra Prof Satoshi"]}),e.jsxs("h2",{className:"text-4xl md:text-5xl font-bold text-white mb-6",children:["Il Tuo",e.jsx("span",{className:"block mt-2 bg-gradient-to-r from-purple-400 to-blue-400 bg-clip-text text-transparent",children:"AI Tutor Personale"})]}),e.jsxs("div",{className:"space-y-4 text-gray-300 text-lg mb-8",children:[e.jsxs("p",{children:[e.jsx("strong",{className:"text-white",children:"Prof Satoshi"})," Ã¨ la tua mascotte AI alimentata da GPT-4o che ti accompagna in ogni passo del tuo percorso di apprendimento."]}),e.jsxs("p",{children:["Non Ã¨ solo un chatbot - Ã¨ un ",e.jsx("strong",{className:"text-white",children:"mentor intelligente"})," che:"]})]}),e.jsx("div",{className:"space-y-4",children:[{icon:le,text:"Analizza il tuo livello e crea percorsi personalizzati"},{icon:U,text:"Ti dÃ  consigli in tempo reale durante le missioni"},{icon:G,text:"Celebra i tuoi successi e ti motiva nei momenti difficili"},{icon:ae,text:"Risponde a qualsiasi domanda sulla Wheel Strategy"}].map((c,d)=>e.jsxs(u.div,{className:"flex items-start gap-4 group",initial:{opacity:0,x:20},whileInView:{opacity:1,x:0},viewport:{once:!0},transition:{delay:d*.1},children:[e.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-purple-500/20 to-blue-500/20 rounded-lg flex items-center justify-center flex-shrink-0 group-hover:scale-110 transition-transform border border-purple-500/20",children:e.jsx(c.icon,{className:"w-5 h-5 text-purple-400"})}),e.jsx("p",{className:"text-gray-300 leading-relaxed pt-2",children:c.text})]},d))}),e.jsx(u.div,{className:"mt-8",whileHover:{scale:1.05},whileTap:{scale:.95},children:e.jsxs(N,{size:"lg",className:"bg-gradient-to-r from-purple-600 to-blue-600 hover:from-purple-700 hover:to-blue-700 h-14 px-8 shadow-2xl shadow-purple-500/50 text-lg group",onClick:()=>t("onboarding"),children:[e.jsx(U,{className:"w-5 h-5 mr-2 group-hover:rotate-12 transition-transform"}),"Chatta con Prof Satoshi Ora",e.jsx(je,{className:"w-5 h-5 ml-2 group-hover:translate-x-1 transition-transform"})]})})]})]})})}),e.jsxs("section",{id:"features",className:"py-20 md:py-32 relative",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-gray-950 via-gray-900 to-gray-950"}),e.jsxs("div",{className:"max-w-7xl mx-auto px-4 md:px-6 relative z-10",children:[e.jsxs(u.div,{className:"text-center mb-16",initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},viewport:{once:!0},children:[e.jsxs(O,{className:"mb-6 bg-blue-500/10 text-blue-400 border border-blue-500/20 px-4 py-2",children:[e.jsx(Ne,{className:"w-4 h-4 mr-2"}),"FunzionalitÃ "]}),e.jsxs("h2",{className:"text-4xl md:text-6xl font-bold text-white mb-6",children:["Tutto ciÃ² che ti serve per",e.jsx("span",{className:"block mt-2 bg-gradient-to-r from-blue-400 to-purple-400 bg-clip-text text-transparent",children:"padroneggiare la Wheel Strategy"})]}),e.jsx("p",{className:"text-gray-400 text-xl max-w-3xl mx-auto",children:"Un ecosistema completo di strumenti educativi, gamification e AI per portarti da principiante a esperto."})]}),e.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-6",children:s.map((c,d)=>e.jsx(u.div,{initial:{opacity:0,y:30},whileInView:{opacity:1,y:0},viewport:{once:!0},transition:{delay:d*.1},onMouseEnter:()=>i(d),onMouseLeave:()=>i(null),children:e.jsx(u.div,{whileHover:{scale:1.05,rotateY:5,rotateX:5},transition:{type:"spring",stiffness:300},style:{transformStyle:"preserve-3d"},children:e.jsxs(k,{className:`p-8 h-full bg-gradient-to-br from-gray-900 to-gray-800 border-2 transition-all duration-300 ${a===d?`border-blue-500/50 shadow-2xl ${c.glowColor}`:"border-gray-700 shadow-lg"}`,children:[e.jsxs(u.div,{className:`w-16 h-16 bg-gradient-to-br ${c.gradient} rounded-2xl flex items-center justify-center mb-6 relative`,animate:a===d?{rotate:[0,10,-10,0],scale:[1,1.1,1]}:{},transition:{duration:.5},children:[e.jsx(c.icon,{className:"w-8 h-8 text-white"}),a===d&&e.jsx(u.div,{className:"absolute inset-0 bg-white rounded-2xl",initial:{opacity:0},animate:{opacity:[0,.2,0]},transition:{duration:1,repeat:1/0}})]}),e.jsx(O,{className:"mb-4 bg-gray-800 text-gray-300 border-0 px-3 py-1",children:c.stats}),e.jsx("h3",{className:"text-xl font-bold text-white mb-3",children:c.title}),e.jsx("p",{className:"text-gray-400 mb-6 leading-relaxed",children:c.description}),e.jsxs(N,{variant:"ghost",className:"p-0 h-auto text-blue-400 hover:text-blue-300 group",children:["Scopri di piÃ¹",e.jsx(yt,{className:"w-4 h-4 ml-1 group-hover:translate-x-1 transition-transform"})]})]})})},d))})]})]}),e.jsxs("section",{className:"py-20 md:py-32 relative overflow-hidden",children:[e.jsxs("div",{className:"absolute inset-0",children:[e.jsx(Me,{delay:1,color:"bg-purple-600"}),e.jsx(Me,{delay:3,color:"bg-blue-600"})]}),e.jsxs("div",{className:"max-w-7xl mx-auto px-4 md:px-6 relative z-10",children:[e.jsxs(u.div,{className:"text-center mb-16",initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},viewport:{once:!0},children:[e.jsx(O,{className:"mb-6 bg-purple-500/10 text-purple-400 border border-purple-500/20 px-4 py-2",children:"Come Funziona"}),e.jsxs("h2",{className:"text-4xl md:text-6xl font-bold text-white mb-6",children:["Da zero a master in",e.jsx("span",{className:"block mt-2 bg-gradient-to-r from-purple-400 to-pink-400 bg-clip-text text-transparent",children:"3 semplici step"})]})]}),e.jsxs("div",{className:"grid md:grid-cols-3 gap-8 relative",children:[e.jsx("div",{className:"hidden md:block absolute top-1/4 left-0 right-0 h-1",children:e.jsx(u.div,{className:"h-full bg-gradient-to-r from-blue-500 via-purple-500 to-orange-500 opacity-30",initial:{scaleX:0},whileInView:{scaleX:1},viewport:{once:!0},transition:{duration:1.5}})}),[{step:"1",title:"Onboarding AI",description:"Rispondi a 5 domande e lascia che l'AI crei un percorso personalizzato basato sul tuo livello e obiettivi.",icon:ae,color:"from-blue-500 to-cyan-500"},{step:"2",title:"Impara & Pratica",description:"Completa missioni guidate, lezioni interattive e paper trading. Prof Satoshi ti assiste in ogni momento.",icon:le,color:"from-purple-500 to-pink-500"},{step:"3",title:"Diventa Master",description:"Guadagna XP, sblocca badge, scala la leaderboard e applica le tue skills nel mondo reale.",icon:G,color:"from-orange-500 to-red-500"}].map((c,d)=>e.jsx(u.div,{initial:{opacity:0,y:50},whileInView:{opacity:1,y:0},viewport:{once:!0},transition:{delay:d*.2},className:"relative",children:e.jsx(u.div,{whileHover:{scale:1.05,y:-10},transition:{type:"spring",stiffness:300},children:e.jsxs(k,{className:"p-8 text-center h-full bg-gradient-to-br from-gray-900 to-gray-800 border-2 border-gray-700 hover:border-gray-600 transition-all",children:[e.jsxs(u.div,{className:`w-24 h-24 bg-gradient-to-br ${c.color} rounded-3xl flex items-center justify-center mx-auto mb-6 relative`,whileHover:{rotate:360},transition:{duration:.8},children:[e.jsx(c.icon,{className:"w-12 h-12 text-white"}),e.jsx(u.div,{className:"absolute inset-0 rounded-3xl",animate:{boxShadow:["0 0 20px rgba(59, 130, 246, 0.3)","0 0 40px rgba(147, 51, 234, 0.5)","0 0 20px rgba(59, 130, 246, 0.3)"]},transition:{duration:2,repeat:1/0}})]}),e.jsx(u.div,{className:"w-14 h-14 bg-gradient-to-br from-gray-800 to-gray-900 text-white rounded-full flex items-center justify-center mx-auto mb-6 font-bold text-2xl border-2 border-gray-700",whileHover:{scale:1.2},children:c.step}),e.jsx("h3",{className:"text-2xl font-bold text-white mb-4",children:c.title}),e.jsx("p",{className:"text-gray-400 leading-relaxed",children:c.description})]})})},d))]})]})]}),e.jsx("section",{id:"testimonials",className:"py-20 md:py-32 bg-gray-900/50",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 md:px-6",children:[e.jsxs(u.div,{className:"text-center mb-16",initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},viewport:{once:!0},children:[e.jsxs(O,{className:"mb-6 bg-orange-500/10 text-orange-400 border border-orange-500/20 px-4 py-2",children:[e.jsx(De,{className:"w-4 h-4 mr-2"}),"Testimonianze"]}),e.jsxs("h2",{className:"text-4xl md:text-6xl font-bold text-white mb-6",children:["Cosa dicono i nostri",e.jsx("span",{className:"block mt-2 bg-gradient-to-r from-orange-400 to-pink-400 bg-clip-text text-transparent",children:"studenti"})]})]}),e.jsx("div",{className:"grid md:grid-cols-3 gap-6",children:r.map((c,d)=>e.jsx(u.div,{initial:{opacity:0,y:30},whileInView:{opacity:1,y:0},viewport:{once:!0},transition:{delay:d*.1},children:e.jsx(u.div,{whileHover:{scale:1.05,y:-10},transition:{type:"spring",stiffness:300},children:e.jsxs(k,{className:"p-8 h-full bg-gradient-to-br from-gray-900 to-gray-800 border-2 border-gray-700 hover:border-yellow-500/50 transition-all",children:[e.jsx("div",{className:"flex items-center gap-1 mb-6",children:[...Array(c.rating)].map((h,b)=>e.jsx(u.div,{initial:{opacity:0,scale:0},whileInView:{opacity:1,scale:1},transition:{delay:b*.1},children:e.jsx(De,{className:"w-5 h-5 fill-yellow-400 text-yellow-400"})},b))}),e.jsxs("p",{className:"text-gray-300 mb-8 italic leading-relaxed text-lg",children:['"',c.content,'"']}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("img",{src:c.avatar,alt:c.name,className:"w-14 h-14 rounded-full border-2 border-gray-700"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-white font-bold",children:c.name}),e.jsx("p",{className:"text-gray-400",children:c.role})]})]})]})})},d))})]})}),e.jsxs("section",{id:"pricing",className:"py-20 md:py-32 relative overflow-hidden",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-gray-950 via-gray-900 to-gray-950"}),e.jsxs("div",{className:"max-w-7xl mx-auto px-4 md:px-6 relative z-10",children:[e.jsxs(u.div,{className:"text-center mb-16",initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},viewport:{once:!0},children:[e.jsx(O,{className:"mb-6 bg-green-500/10 text-green-400 border border-green-500/20 px-4 py-2",children:"Prezzi"}),e.jsxs("h2",{className:"text-4xl md:text-6xl font-bold text-white mb-6",children:["Scegli il piano",e.jsx("span",{className:"block mt-2 bg-gradient-to-r from-green-400 to-blue-400 bg-clip-text text-transparent",children:"perfetto per te"})]}),e.jsx("p",{className:"text-gray-400 text-xl max-w-3xl mx-auto",children:"Inizia gratis e passa a Pro quando sei pronto. Nessun impegno, cancella quando vuoi."})]}),e.jsx("div",{className:"grid md:grid-cols-3 gap-8 max-w-6xl mx-auto",children:l.map((c,d)=>e.jsx(u.div,{initial:{opacity:0,y:30},whileInView:{opacity:1,y:0},viewport:{once:!0},transition:{delay:d*.1},children:e.jsxs(u.div,{whileHover:{scale:1.05,y:-10},transition:{type:"spring",stiffness:300},className:"relative h-full",children:[c.popular&&e.jsx(u.div,{className:"absolute -inset-1 bg-gradient-to-r from-blue-600 to-purple-600 rounded-3xl blur-xl opacity-50",animate:{opacity:[.5,.8,.5]},transition:{duration:2,repeat:1/0}}),e.jsxs(k,{className:`p-8 h-full relative ${c.popular?"bg-gradient-to-br from-blue-600 to-purple-600 border-0":"bg-gradient-to-br from-gray-900 to-gray-800 border-2 border-gray-700"}`,children:[c.popular&&e.jsx(u.div,{className:"absolute -top-5 left-1/2 transform -translate-x-1/2",animate:{y:[0,-5,0]},transition:{duration:2,repeat:1/0},children:e.jsx(O,{className:"bg-gradient-to-r from-orange-500 to-pink-500 text-white border-0 px-4 py-2 shadow-lg",children:"â­ PiÃ¹ Popolare"})}),e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("h3",{className:"text-2xl font-bold text-white mb-2",children:c.name}),e.jsx("p",{className:c.popular?"text-blue-100":"text-gray-400",children:c.description})]}),e.jsx("div",{className:"text-center mb-8",children:e.jsx("span",{className:"text-white",children:c.price==="Custom"?e.jsx("span",{className:"text-4xl font-bold",children:"Custom"}):e.jsxs(e.Fragment,{children:[e.jsxs("span",{className:"text-6xl font-bold",children:["â‚¬",c.price]}),c.period&&e.jsx("span",{className:"text-gray-400 text-xl",children:c.period})]})})}),e.jsx("ul",{className:"space-y-4 mb-8",children:c.features.map((h,b)=>e.jsxs(u.li,{className:"flex items-start gap-3",initial:{opacity:0,x:-10},whileInView:{opacity:1,x:0},viewport:{once:!0},transition:{delay:b*.05},children:[e.jsx(Q,{className:`w-6 h-6 flex-shrink-0 ${c.popular?"text-white":"text-blue-400"}`}),e.jsx("span",{className:`${c.popular?"text-white":"text-gray-300"} leading-relaxed`,children:h})]},b))}),e.jsx(u.div,{whileHover:{scale:1.05},whileTap:{scale:.95},children:e.jsx(N,{className:`w-full h-14 text-lg font-semibold ${c.popular?"bg-white text-blue-600 hover:bg-gray-100 shadow-2xl":"bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-700 hover:to-purple-700 text-white shadow-xl"}`,onClick:()=>t("auth"),children:c.cta})})]})]})},d))})]})]}),e.jsxs("section",{className:"py-20 md:py-32 relative overflow-hidden",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-blue-600 via-purple-600 to-orange-600"}),e.jsx("div",{className:"absolute inset-0",children:[...Array(30)].map((c,d)=>e.jsx(u.div,{className:"absolute w-2 h-2 bg-white rounded-full",style:{left:`${Math.random()*100}%`,top:`${Math.random()*100}%`},animate:{y:[0,-50,0],opacity:[0,1,0],scale:[0,1,0]},transition:{duration:3+Math.random()*2,repeat:1/0,delay:Math.random()*3}},d))}),e.jsx("div",{className:"max-w-4xl mx-auto px-4 md:px-6 text-center relative z-10",children:e.jsxs(u.div,{initial:{opacity:0,scale:.8},whileInView:{opacity:1,scale:1},viewport:{once:!0},transition:{duration:.8},children:[e.jsxs(u.div,{className:"relative w-32 h-32 mx-auto mb-8",animate:{y:[0,-15,0],rotate:[0,-5,5,0]},transition:{duration:3,repeat:1/0,ease:"easeInOut"},children:[e.jsx(u.div,{className:"absolute inset-0 rounded-full bg-white/30",animate:{scale:[1,1.5,1],opacity:[.3,0,.3]},transition:{duration:2,repeat:1/0,ease:"easeInOut"}}),e.jsx("img",{src:pt,alt:"Prof Satoshi ti aspetta!",className:"w-full h-full object-contain relative z-10",style:{filter:"drop-shadow(0 10px 30px rgba(255, 255, 255, 0.4))"}}),[...Array(5)].map((c,d)=>e.jsx(u.div,{className:"absolute w-2 h-2 bg-white rounded-full",style:{top:`${20+Math.random()*60}%`,left:`${20+Math.random()*60}%`},animate:{scale:[0,1.5,0],opacity:[0,1,0],y:[0,-20]},transition:{duration:2,repeat:1/0,delay:d*.4,ease:"easeOut"}},d))]}),e.jsx("h2",{className:"text-4xl md:text-6xl font-bold text-white mb-6",children:"Pronto a Diventare un Master Trader?"}),e.jsx("p",{className:"text-xl text-white/90 mb-8 max-w-2xl mx-auto",children:"Unisciti a migliaia di studenti che stanno giÃ  padroneggiando la Bitcoin Wheel Strategy. Inizia gratis oggi!"}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:[e.jsx(u.div,{whileHover:{scale:1.1},whileTap:{scale:.9},children:e.jsxs(N,{size:"lg",className:"bg-white text-blue-600 hover:bg-gray-100 h-16 px-10 text-lg font-bold shadow-2xl group",onClick:()=>t("onboarding"),children:[e.jsx(Qe,{className:"w-6 h-6 mr-2 group-hover:translate-y-[-4px] transition-transform"}),"Inizia Ora Gratis",e.jsx(je,{className:"w-6 h-6 ml-2 group-hover:translate-x-2 transition-transform"})]})}),e.jsx(u.div,{whileHover:{scale:1.1},whileTap:{scale:.9},children:e.jsx(N,{size:"lg",variant:"outline",className:"h-16 px-10 border-2 border-white bg-white/10 backdrop-blur hover:bg-white/20 text-white text-lg font-bold",onClick:()=>t("auth"),children:"Hai giÃ  un account? Accedi"})})]})]})})]}),e.jsx("footer",{className:"py-12 border-t border-gray-800 bg-gray-950",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 md:px-6",children:[e.jsxs("div",{className:"grid md:grid-cols-4 gap-8 mb-8",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx(u.div,{className:"w-10 h-10",animate:{rotate:[0,5,-5,0]},transition:{duration:3,repeat:1/0,ease:"easeInOut"},children:e.jsx("img",{src:Lt,alt:"btcwheel Logo",className:"w-full h-full object-contain",style:{filter:"drop-shadow(0 2px 8px rgba(52, 211, 153, 0.4))"}})}),e.jsx("span",{className:"text-white font-bold text-xl",children:"btcwheel"})]}),e.jsx("p",{className:"text-gray-400",children:"Impara la Bitcoin Wheel Strategy con AI tutor personale e simulazioni trading."})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-white font-semibold mb-4",children:"Prodotto"}),e.jsxs("ul",{className:"space-y-2",children:[e.jsx("li",{children:e.jsx("a",{href:"#features",className:"text-gray-400 hover:text-white transition-colors",children:"FunzionalitÃ "})}),e.jsx("li",{children:e.jsx("a",{href:"#pricing",className:"text-gray-400 hover:text-white transition-colors",children:"Prezzi"})}),e.jsx("li",{children:e.jsx("a",{href:"#testimonials",className:"text-gray-400 hover:text-white transition-colors",children:"Testimonianze"})})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-white font-semibold mb-4",children:"Risorse"}),e.jsxs("ul",{className:"space-y-2",children:[e.jsx("li",{children:e.jsx("a",{href:"#",className:"text-gray-400 hover:text-white transition-colors",children:"Blog"})}),e.jsx("li",{children:e.jsx("a",{href:"#",className:"text-gray-400 hover:text-white transition-colors",children:"Guide"})}),e.jsx("li",{children:e.jsx("a",{href:"#",className:"text-gray-400 hover:text-white transition-colors",children:"FAQ"})})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-white font-semibold mb-4",children:"Legale"}),e.jsxs("ul",{className:"space-y-2",children:[e.jsx("li",{children:e.jsx("a",{href:"#",className:"text-gray-400 hover:text-white transition-colors",children:"Privacy"})}),e.jsx("li",{children:e.jsx("a",{href:"#",className:"text-gray-400 hover:text-white transition-colors",children:"Terms"})}),e.jsx("li",{children:e.jsx("a",{href:"#",className:"text-gray-400 hover:text-white transition-colors",children:"Cookies"})})]})]})]}),e.jsx("div",{className:"pt-8 border-t border-gray-800 text-center text-gray-400",children:e.jsx("p",{children:"Â© 2024 btcwheel. Tutti i diritti riservati."})})]})})]})}const Zi="/logo.svg";function ce({currentView:t,onNavigate:a}){const{user:i}=be(),n=Nt(),s=[{id:"home",icon:za,label:"Home"},{id:"dashboard",icon:Kt,label:"Dashboard"},{id:"lessons",icon:Ee,label:"Lezioni"},{id:"simulation",icon:K,label:"Trading"},{id:"leaderboard",icon:G,label:"Classifica"}],m=async()=>{await n.auth.signOut(),window.location.reload()};return e.jsxs(e.Fragment,{children:[e.jsxs("nav",{className:"hidden md:flex fixed left-0 top-0 h-screen w-20 bg-gray-900/80 backdrop-blur-xl border-r border-white/10 flex-col items-center py-6 gap-6 z-50",children:[e.jsx(u.div,{className:"w-12 h-12 rounded-xl flex items-center justify-center mb-2",whileHover:{scale:1.05},whileTap:{scale:.95},children:e.jsx("img",{src:Zi,alt:"btcwheel",className:"w-full h-full object-contain",style:{filter:"drop-shadow(0 0 12px rgba(52, 211, 153, 0.5))"}})}),e.jsx("div",{className:"flex-1 flex flex-col gap-3",children:s.map(r=>{const l=t===r.id;return e.jsxs(u.button,{onClick:()=>a(r.id),className:`
                  relative w-14 h-14 rounded-xl flex items-center justify-center transition-all group
                  ${l?"bg-gradient-to-br from-emerald-500 to-teal-600 text-white shadow-lg shadow-emerald-500/50":"text-gray-400 hover:text-white hover:bg-white/5"}
                `,whileHover:{scale:1.05,y:-2},whileTap:{scale:.95},title:r.label,children:[e.jsx(r.icon,{className:`w-6 h-6 ${l?"drop-shadow-sm":""}`}),l&&e.jsx(u.div,{className:"absolute -left-[1px] top-1/2 -translate-y-1/2 w-1 h-8 bg-emerald-400 rounded-r-full",layoutId:"activeIndicator",transition:{type:"spring",stiffness:380,damping:30}}),e.jsx("div",{className:"absolute left-full ml-4 px-3 py-2 bg-gray-800 text-white text-sm rounded-lg opacity-0 group-hover:opacity-100 transition-opacity pointer-events-none whitespace-nowrap border border-white/10",children:r.label})]},r.id)})}),i&&e.jsxs(u.button,{onClick:m,className:"w-14 h-14 rounded-xl flex items-center justify-center text-gray-400 hover:text-red-400 hover:bg-red-500/10 transition-all group",whileHover:{scale:1.05},whileTap:{scale:.95},title:"Logout",children:[e.jsx(Jt,{className:"w-6 h-6"}),e.jsx("div",{className:"absolute left-full ml-4 px-3 py-2 bg-gray-800 text-white text-sm rounded-lg opacity-0 group-hover:opacity-100 transition-opacity pointer-events-none whitespace-nowrap border border-white/10",children:"Esci"})]})]}),e.jsx("nav",{className:"md:hidden fixed bottom-0 left-0 right-0 bg-gray-900/95 backdrop-blur-xl border-t border-white/10 safe-area-bottom z-50 shadow-2xl",children:e.jsx("div",{className:"flex justify-around items-center px-2 py-3",children:s.map(r=>{const l=t===r.id;return e.jsxs(u.button,{onClick:()=>a(r.id),className:`
                  flex flex-col items-center gap-1.5 px-3 py-2 rounded-xl transition-all touch-manipulation min-w-[64px]
                  ${l?"text-emerald-400":"text-gray-400 active:scale-95"}
                `,whileTap:{scale:.95},children:[e.jsxs("div",{className:"relative",children:[e.jsx(u.div,{animate:l?{scale:[1,1.2,1]}:{},transition:{duration:.3},children:e.jsx(r.icon,{className:`w-6 h-6 ${l?"drop-shadow-[0_0_8px_rgba(52,211,153,0.6)]":""}`})}),l&&e.jsx(u.div,{className:"absolute -bottom-1.5 left-1/2 -translate-x-1/2 w-1 h-1 bg-emerald-400 rounded-full",layoutId:"mobileActiveIndicator",transition:{type:"spring",stiffness:380,damping:30}})]}),e.jsx("span",{className:`text-xs transition-all ${l?"font-semibold text-emerald-400":"font-normal text-gray-400"}`,children:r.label})]},r.id)})})})]})}function Ge({className:t,...a}){return e.jsx(Sa,{"data-slot":"avatar",className:A("relative flex size-10 shrink-0 overflow-hidden rounded-full",t),...a})}function es({className:t,...a}){return e.jsx(Ca,{"data-slot":"avatar-image",className:A("aspect-square size-full",t),...a})}function He({className:t,...a}){return e.jsx(Ia,{"data-slot":"avatar-fallback",className:A("bg-muted flex size-full items-center justify-center rounded-full",t),...a})}function ts({onNavigate:t}){const{user:a}=be(),[i,n]=o.useState(!1),s=Nt();if(!a)return null;const m=a.user_metadata?.name||a.email?.split("@")[0]||"Utente",r=m.split(" ").map(c=>c[0]).join("").toUpperCase().slice(0,2),l=async()=>{await s.auth.signOut(),window.location.reload()};return e.jsxs("div",{className:"relative",children:[e.jsxs("button",{onClick:()=>n(!i),className:"flex items-center gap-2 hover:opacity-80 transition-opacity",children:[e.jsx(Ge,{className:"w-10 h-10 border-2 border-white/50",children:e.jsx(He,{className:"bg-gradient-to-br from-blue-500 to-purple-600 text-white",children:r})}),e.jsxs("div",{className:"hidden md:block text-left",children:[e.jsx("p",{className:"text-sm font-semibold text-white",children:m}),e.jsx("p",{className:"text-xs text-white/70",children:a.email})]})]}),e.jsx(ge,{children:i&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"fixed inset-0 z-40",onClick:()=>n(!1)}),e.jsx(u.div,{initial:{opacity:0,scale:.95,y:-10},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:-10},transition:{duration:.15},className:"absolute right-0 top-full mt-2 w-64 z-50",children:e.jsxs(k,{className:"p-4 shadow-2xl",children:[e.jsxs("div",{className:"flex items-center gap-3 pb-3 mb-3 border-b border-gray-200",children:[e.jsx(Ge,{className:"w-12 h-12",children:e.jsx(He,{className:"bg-gradient-to-br from-blue-500 to-purple-600 text-white",children:r})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"font-semibold text-gray-900 truncate",children:m}),e.jsx("p",{className:"text-sm text-gray-600 truncate",children:a.email})]})]}),e.jsx("div",{className:"mb-3",children:e.jsxs("div",{className:"inline-flex items-center gap-1 px-2 py-1 bg-blue-50 text-blue-700 rounded text-xs",children:[e.jsx(Fe,{className:"w-3 h-3"}),a.app_metadata?.provider==="google"?"Google Account":"Email Account"]})}),e.jsxs("div",{className:"space-y-1",children:[e.jsxs(N,{variant:"ghost",className:"w-full justify-start",onClick:()=>{n(!1)},children:[e.jsx(it,{className:"w-4 h-4 mr-2"}),"Profilo"]}),e.jsxs(N,{variant:"ghost",className:"w-full justify-start",onClick:()=>{n(!1),t?.("settings")},children:[e.jsx(Yt,{className:"w-4 h-4 mr-2"}),"Impostazioni"]}),e.jsxs(N,{variant:"ghost",className:"w-full justify-start text-red-600 hover:text-red-700 hover:bg-red-50",onClick:l,children:[e.jsx(Jt,{className:"w-4 h-4 mr-2"}),"Logout"]})]})]})})]})})]})}function ze(){const{user:t}=be(),a=!M||!t,[i,n]=o.useState({level:1,xp:0,xpToNextLevel:1e3,streak:0,badges:[],lessonsCompleted:0,totalLessons:15,currentLesson:1,completedLessons:[],perfectQuizzes:0,profitableSimulations:0}),[s,m]=o.useState([]),[r,l]=o.useState(!0),[c,d]=o.useState(!1),[h,b]=o.useState(null),p=o.useCallback(async()=>{l(!0),b(null);try{if(a){const j=localStorage.getItem("btc-wheel-progress");if(j){const y=JSON.parse(j);n({...y,completedLessons:y.completedLessons||[],perfectQuizzes:y.perfectQuizzes||0,profitableSimulations:y.profitableSimulations||0})}l(!1);return}if(t){let j=await Ui(t.id);if(console.log("Dati recuperati (UserProgress):",j),!j){const w=t.user_metadata?.username||t.email?.split("@")[0]||"User";j=await Gi(t.id,w),console.log("Nuovi dati creati:",j)}j&&n({level:j.level,xp:j.xp,xpToNextLevel:j.xp_to_next_level,streak:j.streak,badges:j.badges||[],lessonsCompleted:j.lessons_completed,totalLessons:j.total_lessons,currentLesson:j.current_lesson,completedLessons:j.completed_lessons||[],perfectQuizzes:j.perfect_quizzes||0,profitableSimulations:j.profitable_simulations||0});const y=await ut(t.id,10);console.log("Dati recuperati (Activities):",y),m(y)}}catch(j){console.error("Error loading progress:",j),b("Impossibile caricare i dati dal server.")}finally{l(!1)}},[t,a]);o.useEffect(()=>{p()},[p]);const x=o.useCallback(async j=>{d(!0);try{const y={...i,...j};if(localStorage.setItem("btc-wheel-progress",JSON.stringify(y)),!a&&t){const w={level:j.level,xp:j.xp,xp_to_next_level:j.xpToNextLevel,streak:j.streak,badges:j.badges,lessons_completed:j.lessonsCompleted,current_lesson:j.currentLesson};await Hi(t.id,w)}return n(y),!0}catch(y){return console.error("Error syncing progress:",y),!1}finally{d(!1)}},[t,i,a]),g=o.useCallback(async j=>{const y=i.xp+j;let w=i.level,L=i.xpToNextLevel;y>=i.xpToNextLevel&&(w+=1,L=i.xpToNextLevel+500);const _={...i,xp:y,level:w,xpToNextLevel:L};n(_),t&&await x(_)},[i,t,x]),v=o.useCallback(async j=>{const y=j||i.currentLesson,w=i.completedLessons||[],L=w.includes(y),_={...i,lessonsCompleted:L?i.lessonsCompleted:i.lessonsCompleted+1,currentLesson:i.currentLesson+1,completedLessons:L?w:[...w,y]};if(n(_),t){await x(_),await Pt(t.id,"lesson_completed",`Completata lezione ${y}`,250);const H=await ut(t.id,10);m(H)}return _},[i,t,x]),P=o.useCallback(async j=>{if(i.badges.includes(j))return;const y={...i,badges:[...i.badges,j]};if(n(y),t){await x(y),await Pt(t.id,"badge_earned",`Sbloccato badge: ${j}`,500);const w=await ut(t.id,10);m(w)}},[i,t,x]),z=o.useCallback(async j=>{const y={...i,streak:j};n(y),t&&await x(y)},[i,t,x]);return{progress:i,activities:s,loading:r,syncing:c,error:h,addXP:g,completeLesson:v,addBadge:P,updateStreak:z,syncProgress:x,reloadProgress:p}}function as({onNavigate:t}){const{progress:a}=ze(),[i,n]=o.useState(null),s=[{id:1,title:"Introduzione al Bitcoin",status:"completed",xp:100,category:"Fondamenti"},{id:2,title:"Cos'Ã¨ la Wheel Strategy",status:"completed",xp:100,category:"Fondamenti"},{id:3,title:"Vendere Cash-Secured Puts",status:"completed",xp:150,category:"Strategie Base"},{id:4,title:"Vendere Covered Calls",status:"completed",xp:150,category:"Strategie Base"},{id:5,title:"Gestione del Rischio",status:"completed",xp:200,category:"Risk Management"},{id:6,title:"Calcolo della VolatilitÃ ",status:"completed",xp:200,category:"Analisi Tecnica"},{id:7,title:"Strike Selection",status:"completed",xp:200,category:"Analisi Tecnica"},{id:8,title:"Premium Collection",status:"completed",xp:250,category:"Strategie Avanzate"},{id:9,title:"Roll & Adjust",status:"current",xp:250,category:"Strategie Avanzate"},{id:10,title:"Trade Psychology",status:"locked",xp:300,category:"Psicologia"},{id:11,title:"Portfolio Sizing",status:"locked",xp:300,category:"Portfolio Management"},{id:12,title:"Market Analysis",status:"locked",xp:350,category:"Analisi Mercato"},{id:13,title:"Advanced Strategies",status:"locked",xp:400,category:"Strategie Avanzate"},{id:14,title:"Tax Considerations",status:"locked",xp:400,category:"FiscalitÃ "},{id:15,title:"Master Exam",status:"locked",xp:500,category:"Certificazione"}],m=r=>({Fondamenti:"from-blue-500 to-cyan-500","Strategie Base":"from-emerald-500 to-teal-500","Risk Management":"from-orange-500 to-red-500","Analisi Tecnica":"from-violet-500 to-purple-500","Strategie Avanzate":"from-pink-500 to-rose-500",Psicologia:"from-amber-500 to-yellow-500","Portfolio Management":"from-indigo-500 to-blue-500","Analisi Mercato":"from-teal-500 to-cyan-500",FiscalitÃ :"from-slate-500 to-gray-500",Certificazione:"from-yellow-400 to-orange-500"})[r]||"from-gray-500 to-gray-600";return e.jsxs("div",{className:"min-h-screen md:pl-20 pb-24 md:pb-0 bg-gradient-to-br from-gray-950 via-gray-900 to-gray-950 text-white",children:[e.jsx("div",{className:"fixed inset-0 opacity-[0.02] pointer-events-none",children:e.jsx("div",{className:"absolute inset-0",style:{backgroundImage:`linear-gradient(rgba(255,255,255,0.1) 1px, transparent 1px),
                           linear-gradient(90deg, rgba(255,255,255,0.1) 1px, transparent 1px)`,backgroundSize:"50px 50px"}})}),e.jsx("div",{className:"fixed top-0 right-0 w-[500px] h-[500px] bg-emerald-500/10 rounded-full blur-[150px] pointer-events-none"}),e.jsx("div",{className:"fixed bottom-0 left-0 w-[500px] h-[500px] bg-orange-500/10 rounded-full blur-[150px] pointer-events-none"}),e.jsx(ce,{currentView:"home",onNavigate:t}),e.jsx(u.header,{className:"relative bg-gradient-to-br from-gray-900/50 to-gray-800/50 safe-area-top sticky top-0 z-40 backdrop-blur-xl border-b border-white/10",initial:{opacity:0,y:-20},animate:{opacity:1,y:0},children:e.jsx("div",{className:"px-4 py-5 md:px-6 md:py-6",children:e.jsxs("div",{className:"max-w-6xl mx-auto",children:[e.jsxs("div",{className:"flex items-center justify-between gap-3",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h1",{className:"text-2xl md:text-3xl font-bold bg-gradient-to-r from-white to-gray-300 bg-clip-text text-transparent mb-1",children:"Percorso di Apprendimento"}),e.jsxs("p",{className:"text-gray-400 text-sm",children:[a.lessonsCompleted," di ",a.totalLessons," lezioni completate"]})]}),e.jsxs("div",{className:"flex items-center gap-2 md:gap-3 flex-shrink-0",children:[e.jsxs(u.div,{className:"flex items-center gap-2 bg-gradient-to-r from-orange-500/10 to-red-500/10 border border-orange-500/20 backdrop-blur-sm rounded-xl px-3 py-2",whileHover:{scale:1.05},children:[e.jsx(Ke,{className:"w-4 h-4 text-orange-400 flex-shrink-0"}),e.jsx("span",{className:"text-white font-semibold",children:a.streak})]}),e.jsxs(u.div,{className:"flex items-center gap-2 bg-gradient-to-r from-emerald-500/10 to-teal-500/10 border border-emerald-500/20 backdrop-blur-sm rounded-xl px-3 py-2",whileHover:{scale:1.05},children:[e.jsx(Ne,{className:"w-4 h-4 text-yellow-400 flex-shrink-0"}),e.jsx("span",{className:"text-white font-semibold",children:a.xp})]}),e.jsx("div",{className:"hidden md:block",children:e.jsx(ts,{onNavigate:t})})]})]}),e.jsxs(u.div,{className:"mt-6",initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.2},children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-sm text-gray-400",children:"Completamento Corso"}),e.jsxs("span",{className:"text-sm font-bold text-emerald-400",children:[Math.round(a.lessonsCompleted/a.totalLessons*100),"%"]})]}),e.jsx("div",{className:"relative h-2 bg-white/5 rounded-full overflow-hidden backdrop-blur-sm border border-white/10",children:e.jsx(u.div,{className:"absolute inset-y-0 left-0 bg-gradient-to-r from-emerald-500 via-teal-500 to-cyan-500 rounded-full",initial:{width:0},animate:{width:`${a.lessonsCompleted/a.totalLessons*100}%`},transition:{duration:1,ease:"easeOut",delay:.3}})})]})]})})}),e.jsxs("main",{className:"relative max-w-6xl mx-auto px-4 py-6 md:px-6 md:py-8",children:[e.jsxs(u.div,{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-8",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},children:[e.jsx(k,{className:"p-4 bg-gradient-to-br from-emerald-600 to-teal-600 border-0 text-white",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2.5 bg-white/20 rounded-xl backdrop-blur-sm",children:e.jsx(le,{className:"w-5 h-5"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-emerald-100 text-sm",children:"Livello"}),e.jsx("p",{className:"text-2xl font-bold",children:a.level})]})]})}),e.jsx(k,{className:"p-4 bg-gradient-to-br from-orange-600 to-red-600 border-0 text-white",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2.5 bg-white/20 rounded-xl backdrop-blur-sm",children:e.jsx(Ke,{className:"w-5 h-5"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-orange-100 text-sm",children:"Streak"}),e.jsx("p",{className:"text-2xl font-bold",children:a.streak})]})]})}),e.jsx(k,{className:"p-4 bg-gradient-to-br from-violet-600 to-purple-600 border-0 text-white",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2.5 bg-white/20 rounded-xl backdrop-blur-sm",children:e.jsx(G,{className:"w-5 h-5"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-purple-100 text-sm",children:"Badge"}),e.jsx("p",{className:"text-2xl font-bold",children:a.badges.length})]})]})}),e.jsx(k,{className:"p-4 bg-gradient-to-br from-blue-600 to-cyan-600 border-0 text-white",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2.5 bg-white/20 rounded-xl backdrop-blur-sm",children:e.jsx(Ee,{className:"w-5 h-5"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-blue-100 text-sm",children:"Lezioni"}),e.jsx("p",{className:"text-2xl font-bold",children:a.lessonsCompleted})]})]})})]}),e.jsxs("div",{children:[e.jsxs("h2",{className:"text-xl font-bold text-white mb-4 flex items-center gap-2",children:[e.jsx(Ee,{className:"w-5 h-5 text-emerald-400"}),"Tutte le Lezioni"]}),e.jsx("div",{className:"space-y-3",children:s.map((r,l)=>{const c=r.status==="locked",d=r.status==="current",h=r.status==="completed";return e.jsx(u.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.4+l*.05},onHoverStart:()=>n(r.id),onHoverEnd:()=>n(null),whileHover:c?{}:{x:4},children:e.jsxs(k,{className:`
                      relative overflow-hidden transition-all
                      ${c?"bg-gray-800/20 border-white/5 cursor-not-allowed":"bg-gradient-to-br from-gray-800/50 to-gray-900/50 border-white/10 hover:border-white/20 cursor-pointer"}
                      ${d?"ring-2 ring-emerald-500/50 ring-offset-2 ring-offset-gray-950":""}
                    `,onClick:()=>!c&&t("lesson"),children:[d&&e.jsx(u.div,{className:"absolute inset-0 bg-gradient-to-r from-emerald-500/10 via-teal-500/10 to-emerald-500/10",animate:{backgroundPosition:["0% 50%","100% 50%","0% 50%"]},transition:{duration:3,repeat:1/0,ease:"linear"},style:{backgroundSize:"200% 100%"}}),e.jsxs("div",{className:"relative p-4 md:p-5 flex items-center gap-4",children:[e.jsxs("div",{className:`
                        relative flex-shrink-0 w-12 h-12 rounded-xl flex items-center justify-center
                        ${h?"bg-gradient-to-br from-emerald-500 to-teal-500":d?"bg-gradient-to-br from-orange-500 to-red-500":"bg-gray-700/50"}
                      `,children:[h&&e.jsx(wt,{className:"w-6 h-6 text-white"}),d&&e.jsx(u.div,{animate:{scale:[1,1.2,1]},transition:{duration:2,repeat:1/0},children:e.jsx(Xe,{className:"w-6 h-6 text-white"})}),c&&e.jsx(we,{className:"w-6 h-6 text-gray-500"}),d&&e.jsx(u.div,{className:"absolute inset-0 rounded-xl bg-orange-500",initial:{scale:1,opacity:.5},animate:{scale:1.5,opacity:0},transition:{duration:2,repeat:1/0}})]}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-start justify-between gap-3 mb-1",children:[e.jsx("h3",{className:`font-semibold ${c?"text-gray-500":"text-white"}`,children:r.title}),d&&e.jsx(u.div,{animate:{rotate:[0,14,-14,14,0]},transition:{duration:2,repeat:1/0,repeatDelay:3},children:e.jsx(U,{className:"w-5 h-5 text-yellow-400 flex-shrink-0"})})]}),e.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[e.jsx(O,{className:`
                              text-xs border-0
                              ${c?"bg-gray-700/50 text-gray-500":`bg-gradient-to-r ${m(r.category)} text-white`}
                            `,children:r.category}),e.jsxs("div",{className:"flex items-center gap-1 text-xs",children:[e.jsx(Ne,{className:`w-3 h-3 ${c?"text-gray-600":"text-yellow-400"}`}),e.jsxs("span",{className:c?"text-gray-600":"text-gray-400",children:[r.xp," XP"]})]}),h&&e.jsx(O,{variant:"outline",className:"text-xs border-emerald-500/30 text-emerald-400 bg-emerald-500/10",children:"Completata"}),d&&e.jsx(O,{variant:"outline",className:"text-xs border-orange-500/30 text-orange-400 bg-orange-500/10",children:"In Corso"})]})]}),!c&&e.jsx(u.div,{animate:i===r.id?{x:[0,4,0]}:{},transition:{duration:1,repeat:1/0},children:e.jsx(yt,{className:"w-5 h-5 text-gray-500 flex-shrink-0"})})]}),d&&e.jsx("div",{className:"relative h-1 bg-white/5",children:e.jsx(u.div,{className:"absolute inset-y-0 left-0 bg-gradient-to-r from-emerald-500 to-teal-500",initial:{width:"0%"},animate:{width:"45%"},transition:{duration:1,delay:.5}})})]})},r.id)})})]}),e.jsx(u.div,{className:"mt-8",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:1},children:e.jsxs(k,{className:"relative p-6 md:p-8 bg-gradient-to-br from-emerald-600 to-teal-600 border-0 text-white overflow-hidden",children:[e.jsx(u.div,{className:"absolute top-0 right-0 w-64 h-64 bg-white/10 rounded-full blur-3xl",animate:{scale:[1,1.2,1],opacity:[.1,.2,.1]},transition:{duration:4,repeat:1/0}}),e.jsxs("div",{className:"relative",children:[e.jsxs("div",{className:"flex items-start gap-4 mb-4",children:[e.jsx("div",{className:"p-3 bg-white/20 rounded-xl backdrop-blur-sm",children:e.jsx(De,{className:"w-6 h-6 text-white"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold mb-2",children:"Continua il tuo percorso!"}),e.jsxs("p",{className:"text-emerald-100",children:["Hai completato ",a.lessonsCompleted," lezioni. Ancora ",a.totalLessons-a.lessonsCompleted," da scoprire!"]})]})]}),e.jsxs(N,{onClick:()=>t("lesson"),className:"bg-white text-emerald-600 hover:bg-gray-100 font-semibold",children:[e.jsx(Xe,{className:"w-4 h-4 mr-2"}),"Riprendi Lezione"]})]})]})})]})]})}function is(){const{user:t}=be(),[a,i]=o.useState({profile:null,gamification:null,journalStats:{totalTrades:0,totalPnL:0},aiSignal:null,loading:!0,error:null});return o.useEffect(()=>{async function n(){if(!t){i(s=>({...s,loading:!1}));return}try{const[s,m,r,l]=await Promise.all([Ri(t.id),Vi(t.id),Di(t.id),Fi()]);i({profile:s,gamification:m,journalStats:r,aiSignal:l,loading:!1,error:null})}catch(s){console.error("Error fetching dashboard data:",s),i(m=>({...m,loading:!1,error:"Errore nel caricamento dei dati."}))}}n()},[t]),a}function ss({onNavigate:t}){const{profile:a,gamification:i,journalStats:n,aiSignal:s,loading:m,error:r}=is(),l=o.useRef(null),c=ia(l,{once:!0});if(m)return e.jsx("div",{className:"p-8 text-white",children:"Caricamento dashboard..."});const d=[{label:"Lezioni Completate",value:i?.lessons_completed||0,total:15,icon:Ee,gradient:"from-emerald-500 via-teal-500 to-cyan-500",percentage:(i?.lessons_completed||0)/15*100},{label:"Quiz Score",value:i?.quiz_score_total||0,total:1e3,icon:Q,gradient:"from-orange-500 via-red-500 to-pink-500",percentage:(i?.quiz_score_total||0)/1e3*100},{label:"Trading Volume",value:`$${(i?.trading_volume||0).toLocaleString()}`,total:null,icon:ht,gradient:"from-violet-500 via-purple-500 to-fuchsia-500",percentage:100},{label:"PnL Totale",value:`$${(n.totalPnL||0).toLocaleString()}`,total:null,icon:K,gradient:"from-green-500 via-emerald-500 to-teal-500",percentage:n.totalPnL>0?100:0}],h=[{title:"Continua a Imparare",description:"Strike Price Selection",icon:Xe,gradient:"from-emerald-600 to-teal-600",action:()=>t("lessons"),highlight:!0},{title:"Simulatore Trading",description:"Pratica le strategie",icon:ht,gradient:"from-violet-600 to-purple-600",action:()=>t("simulation")},{title:"Test Skills",description:"Quiz intelligenti AI",icon:ae,gradient:"from-orange-600 to-red-600",action:()=>t("lessons")}];return e.jsxs("div",{className:"w-full relative",children:[e.jsx("div",{className:"absolute inset-0 opacity-[0.02] pointer-events-none overflow-hidden",children:e.jsx("div",{className:"absolute inset-0",style:{backgroundImage:`linear-gradient(rgba(255,255,255,0.1) 1px, transparent 1px),
                           linear-gradient(90deg, rgba(255,255,255,0.1) 1px, transparent 1px)`,backgroundSize:"50px 50px"}})}),e.jsx("div",{className:"absolute top-0 right-0 w-[500px] h-[500px] bg-emerald-500/5 rounded-full blur-[150px] pointer-events-none"}),e.jsx("div",{className:"absolute bottom-0 left-0 w-[500px] h-[500px] bg-orange-500/5 rounded-full blur-[150px] pointer-events-none"}),r&&e.jsx("div",{className:"mb-6 w-full",children:e.jsxs("div",{className:"bg-red-500/90 backdrop-blur-md text-white p-4 rounded-xl shadow-2xl border border-white/20 flex items-center gap-3 animate-in fade-in slide-in-from-top-5",children:[e.jsx(Ta,{className:"w-6 h-6 shrink-0"}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold",children:"Errore di Connessione"}),e.jsx("p",{className:"text-sm opacity-90",children:r})]})]})}),e.jsx(u.header,{className:"relative mb-8 flex flex-col md:flex-row md:items-center justify-between gap-4 p-6 rounded-2xl bg-zinc-900/30 border border-white/5 backdrop-blur-sm",initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{duration:.5},children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs(u.div,{whileHover:{scale:1.05},whileTap:{scale:.98},className:"relative",children:[e.jsx("div",{className:"absolute -inset-0.5 bg-gradient-to-r from-emerald-500 to-blue-500 rounded-full opacity-75 blur opacity-20"}),e.jsxs(Ge,{className:"w-16 h-16 border-2 border-white/10 shadow-xl relative",children:[e.jsx(es,{src:a?.avatar_url}),e.jsx(He,{className:"bg-gradient-to-br from-zinc-800 to-zinc-900 text-white text-xl font-bold",children:a?.full_name?.charAt(0)||"U"})]}),e.jsx("div",{className:"absolute -bottom-1 -right-1 bg-[#050505] rounded-full p-1",children:e.jsx("div",{className:"bg-green-500 w-3 h-3 rounded-full border border-[#050505]"})})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("h1",{className:"text-2xl md:text-3xl font-bold text-white tracking-tight",children:["Bentornato, ",e.jsx("span",{className:"text-transparent bg-clip-text bg-gradient-to-r from-blue-400 to-emerald-400",children:a?.full_name||"Trader"})]}),e.jsx(u.div,{animate:{rotate:[0,14,-14,14,0],scale:[1,1.1,1.1,1.1,1]},transition:{duration:2,repeat:1/0,repeatDelay:5},children:e.jsx("img",{src:"/mascot-excited.png",alt:"FinGenius",className:"w-8 h-8"})})]}),e.jsxs("p",{className:"text-gray-400 text-sm mt-1 flex items-center gap-2",children:[e.jsx(U,{className:"w-3 h-3 text-yellow-400"}),e.jsx("span",{children:"Il mercato ti aspetta. Ecco i tuoi progressi di oggi."})]})]})]})}),e.jsx(u.div,{ref:l,className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-8",initial:"hidden",animate:c?"visible":"hidden",variants:{visible:{transition:{staggerChildren:.1}}},children:d.map((b,p)=>{const x=b.icon;return e.jsx(u.div,{variants:{hidden:{opacity:0,y:20},visible:{opacity:1,y:0}},onHoverStart:()=>{},onHoverEnd:()=>{},whileHover:{y:-4},transition:{type:"spring",stiffness:300,damping:20},children:e.jsxs(k,{className:"relative p-6 bg-zinc-900/50 backdrop-blur-xl border border-white/10 rounded-xl overflow-hidden group hover:border-white/20 transition-all h-full",children:[e.jsx(u.div,{className:`absolute inset-0 bg-gradient-to-br ${b.gradient} opacity-0 group-hover:opacity-10 transition-opacity duration-300`}),e.jsxs("div",{className:"flex flex-col h-full justify-between",children:[e.jsxs("div",{className:"flex justify-between items-start mb-4",children:[e.jsx("div",{className:`p-3 rounded-xl bg-gradient-to-br ${b.gradient} relative`,children:e.jsx(x,{className:"w-5 h-5 text-white"})}),b.percentage>0&&e.jsxs(O,{className:"bg-white/10 text-white border-0",children:[Math.round(b.percentage),"%"]})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-baseline gap-1 mb-1",children:[e.jsx(u.span,{className:"text-3xl font-bold text-white",initial:{scale:1.2,opacity:0},animate:{scale:1,opacity:1},transition:{type:"spring",stiffness:300},children:b.value},b.value),b.total&&e.jsxs("span",{className:"text-gray-400",children:["/ ",b.total]})]}),e.jsx("p",{className:"text-sm text-gray-400",children:b.label})]})]})]})},b.label)})}),e.jsxs("div",{className:"grid lg:grid-cols-3 gap-8",children:[e.jsxs("div",{className:"lg:col-span-2 space-y-8",children:[e.jsxs("div",{children:[e.jsxs("h2",{className:"text-xl font-bold text-white mb-4 flex items-center gap-2",children:[e.jsx(Qe,{className:"w-5 h-5 text-emerald-400"}),"Azioni Rapide"]}),e.jsx("div",{className:"grid md:grid-cols-3 gap-4",children:h.map((b,p)=>{const x=b.icon;return e.jsx(u.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2+p*.1},whileHover:{y:-4},children:e.jsxs(N,{onClick:b.action,className:`w-full h-auto p-6 bg-white/5 hover:bg-white/10 backdrop-blur-xl border border-white/10 shadow-lg hover:shadow-xl transition-all group relative overflow-hidden flex flex-col items-start gap-4 ${b.highlight?"ring-1 ring-emerald-500/50":""}`,children:[e.jsx("div",{className:`p-2.5 rounded-lg bg-gradient-to-br ${b.gradient}`,children:e.jsx(x,{className:"w-5 h-5 text-white"})}),e.jsxs("div",{className:"w-full",children:[e.jsx("p",{className:"font-bold text-white mb-1 text-left",children:b.title}),e.jsx("p",{className:"text-xs text-white/60 text-left",children:b.description})]}),e.jsx("div",{className:"absolute bottom-4 right-4 opacity-0 group-hover:opacity-100 transition-opacity",children:e.jsx(je,{className:"w-4 h-4 text-white"})})]})},b.title)})})]}),e.jsxs("div",{children:[e.jsxs("h2",{className:"text-xl font-bold text-white mb-4 flex items-center gap-2",children:[e.jsx(ae,{className:"w-5 h-5 text-purple-400"}),"Ultimo Segnale AI"]}),s?e.jsxs(k,{className:"p-6 bg-white/5 backdrop-blur-xl border border-white/10 overflow-hidden relative",children:[e.jsx("div",{className:"absolute top-0 right-0 p-4",children:e.jsx(O,{className:s.signal_type==="buy"?"bg-emerald-500":"bg-red-500",children:s.signal_type.toUpperCase()})}),e.jsxs("div",{className:"flex flex-col gap-4",children:[e.jsxs("div",{children:[e.jsxs("h3",{className:"text-2xl font-bold text-white",children:[s.symbol," Strike $",s.strike_price]}),e.jsxs("p",{className:"text-gray-400 text-sm",children:["Premium Stimato: $",s.premium]})]}),e.jsxs("p",{className:"text-gray-300 italic",children:['"',s.reasoning,'"']}),e.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-500",children:[e.jsx(st,{className:"w-4 h-4"}),e.jsx("span",{children:new Date(s.created_at).toLocaleString()})]})]})]}):e.jsx(k,{className:"p-6 bg-white/5 backdrop-blur-xl border border-white/10 text-center text-gray-400",children:"Nessun segnale AI recente disponibile."})]})]}),e.jsx("div",{className:"space-y-6",children:e.jsxs(k,{className:"p-6 bg-white/5 backdrop-blur-xl border border-white/10 h-full",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("h2",{className:"text-xl font-bold text-white flex items-center gap-2",children:[e.jsx(G,{className:"w-5 h-5 text-yellow-400"}),"I Tuoi Badge"]}),e.jsx(N,{variant:"ghost",size:"sm",onClick:()=>t("badges"),className:"text-emerald-400",children:"Vedi tutti"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx("div",{className:"aspect-square rounded-xl bg-white/5 flex items-center justify-center border border-white/10",children:e.jsx(De,{className:"w-8 h-8 text-yellow-500/50"})}),e.jsx("div",{className:"aspect-square rounded-xl bg-white/5 flex items-center justify-center border border-white/10",children:e.jsx(Ke,{className:"w-8 h-8 text-orange-500/50"})})]})]})})]})]})}function he({className:t,value:a,...i}){return e.jsx(Aa,{"data-slot":"progress",className:A("bg-primary/20 relative h-2 w-full overflow-hidden rounded-full",t),...i,children:e.jsx(Pa,{"data-slot":"progress-indicator",className:"bg-primary h-full w-full flex-1 transition-all",style:{transform:`translateX(-${100-(a||0)}%)`}})})}function Pe({className:t,...a}){return e.jsx(La,{"data-slot":"radio-group",className:A("grid gap-3",t),...a})}function W({className:t,...a}){return e.jsx($a,{"data-slot":"radio-group-item",className:A("border-input text-primary focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 aspect-square size-4 shrink-0 rounded-full border shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50",t),...a,children:e.jsx(Ea,{"data-slot":"radio-group-indicator",className:"relative flex items-center justify-center",children:e.jsx(qa,{className:"fill-primary absolute top-1/2 left-1/2 size-2 -translate-x-1/2 -translate-y-1/2"})})})}function R({className:t,...a}){return e.jsx(_a,{"data-slot":"label",className:A("flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50",t),...a})}function ra(){const[t,a]=o.useState({emotion:"normal",message:"Ciao! Sono Prof Satoshi, il tuo tutor personale! ðŸŽ“",isThinking:!1}),i=o.useRef(null),n=o.useCallback(l=>{switch(l){case"quiz_correct":return{emotion:"celebrating",message:"Perfetto! Hai capito benissimo! ðŸŽ‰",isThinking:!1};case"quiz_wrong":return{emotion:"encouraging",message:"Nessun problema! Impariamo dagli errori. Riprova! ðŸ’ª",isThinking:!1};case"quiz_start":return{emotion:"teaching",message:"Vediamo cosa hai imparato! Ce la puoi fare! ðŸ“š",isThinking:!1};case"lesson_start":return{emotion:"teaching",message:"Iniziamo questa lezione! SarÃ  interessante! ðŸ’¡",isThinking:!1};case"lesson_complete":return{emotion:"celebrating",message:"Lezione completata! Sei sulla strada giusta! ðŸŒŸ",isThinking:!1};case"level_up":return{emotion:"celebrating",message:"Nuovo livello! Stai facendo progressi incredibili! ðŸš€",isThinking:!1};case"badge_unlock":return{emotion:"excited",message:"Wow! Hai sbloccato un nuovo badge! Fantastico! ðŸ†",isThinking:!1};case"streak_active":return{emotion:"excited",message:"Grande! Continua cosÃ¬ la tua streak! ðŸ”¥",isThinking:!1};case"streak_broken":return{emotion:"encouraging",message:"Non preoccuparti, ricominciamo oggi! ðŸ’ª",isThinking:!1};case"trade_profit":return{emotion:"excited",message:"Trade profittevole! Ottima strategia! ðŸ“ˆ",isThinking:!1};case"trade_loss":return{emotion:"teaching",message:"Ogni trade Ã¨ una lezione. Analizziamo insieme! ðŸ“Š",isThinking:!1};case"ai_listening":return{emotion:"normal",message:"Ti ascolto... dimmi tutto! ðŸ‘‚",isThinking:!1};case"ai_thinking":return{emotion:"thinking",message:"Hmm, fammi pensare... ðŸ¤”",isThinking:!0};case"ai_responding":return{emotion:"teaching",message:"Ecco cosa ne penso! ðŸ’¬",isThinking:!1};case"idle":return{emotion:"sleeping",message:"Sono qui se hai bisogno di aiuto! ðŸ˜´",isThinking:!1};default:return{emotion:"normal",message:"Ciao! Come posso aiutarti? ðŸ‘‹",isThinking:!1}}},[]),s=o.useCallback((l,c=3e3)=>{const d=n(l);if(a(d),i.current&&(clearTimeout(i.current),i.current=null),!d.isThinking&&l!=="idle"){const h=setTimeout(()=>{a({emotion:"normal",message:"Sono qui se hai bisogno! ðŸ‘‹",isThinking:!1})},c);i.current=h}},[n]),m=o.useCallback((l,c,d=!1)=>{a({emotion:l,message:c,isThinking:d}),i.current&&(clearTimeout(i.current),i.current=null)},[]),r=o.useCallback(()=>{a({emotion:"normal",message:"Sono qui se hai bisogno! ðŸ‘‹",isThinking:!1}),i.current&&(clearTimeout(i.current),i.current=null)},[]);return o.useEffect(()=>{const l=setTimeout(()=>{t.emotion==="normal"&&s("idle")},3e4);return()=>clearTimeout(l)},[t.emotion,s]),o.useEffect(()=>()=>{i.current&&clearTimeout(i.current)},[]),{emotion:t.emotion,message:t.message,isThinking:t.isThinking,setActivity:s,setEmotion:m,reset:r}}const Et=3;function rs(){const[t,a]=o.useState(!1),[i,n]=o.useState({correctAnswers:0,wrongAnswers:0,consecutiveWrong:0,consecutiveCorrect:0,difficultyLevel:"easy",weakTopics:[],questionsAsked:[],totalAttempts:0}),s=o.useCallback(async(b,p,x,g)=>{try{a(!0);const v=g||i.difficultyLevel,P=await fetch(`https://${ke}.supabase.co/functions/v1/make-server-7c0f82ca/generate-quiz-question`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${xe}`},body:JSON.stringify({lessonId:b,lessonTitle:p,lessonContent:x,difficulty:v,performance:{...i,previousQuestions:i.questionsAsked}})});if(!P.ok){const j=await P.text();return console.error("AI question generation error:",j),null}const z=await P.json();return n(j=>({...j,questionsAsked:[...j.questionsAsked,z.question.question]})),{...z.question,isAI:!0,difficulty:v,attemptsLeft:Et}}catch(v){return console.error("Error generating AI question:",v),null}finally{a(!1)}},[i]),m=o.useCallback((b,p,x=1)=>{n(g=>{const v={...g};return v.totalAttempts+=x,b?(v.correctAnswers++,v.consecutiveWrong=0,v.consecutiveCorrect++,v.consecutiveCorrect>=3&&x===1&&(g.difficultyLevel==="easy"?(v.difficultyLevel="medium",console.log("ðŸ”¼ DifficoltÃ  aumentata a MEDIUM")):g.difficultyLevel==="medium"&&(v.difficultyLevel="hard",console.log("ðŸ”¼ DifficoltÃ  aumentata a HARD")),v.consecutiveCorrect=0)):(v.wrongAnswers++,v.consecutiveWrong++,v.consecutiveCorrect=0,p&&!v.weakTopics.includes(p)&&v.weakTopics.push(p),v.consecutiveWrong>=2&&(g.difficultyLevel==="hard"?(v.difficultyLevel="medium",console.log("ðŸ”½ DifficoltÃ  ridotta a MEDIUM")):g.difficultyLevel==="medium"&&(v.difficultyLevel="easy",console.log("ðŸ”½ DifficoltÃ  ridotta a EASY")))),v})},[]),r=o.useCallback(()=>{const b=i.correctAnswers/(i.correctAnswers+i.wrongAnswers),p=i.correctAnswers+i.wrongAnswers;return i.consecutiveWrong>=3||i.wrongAnswers>=5&&i.correctAnswers<i.wrongAnswers||p>=10&&b<.5},[i]),l=o.useCallback(async(b,p)=>{try{const x=await fetch(`https://${ke}.supabase.co/functions/v1/make-server-7c0f82ca/get-quiz-feedback`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${xe}`},body:JSON.stringify({lessonTitle:b,wrongAnswers:p,performance:{...i,accuracy:i.correctAnswers/(i.correctAnswers+i.wrongAnswers)}})});if(!x.ok)throw new Error("Failed to get AI feedback");return(await x.json()).feedback}catch(x){return console.error("Error getting AI feedback:",x),"Sembra che tu abbia qualche difficoltÃ  con questo argomento. Ti consiglio di rivedere la lezione prima di continuare. Focus sui concetti chiave! ðŸ’ª"}},[i]),c=o.useCallback(()=>i.weakTopics.length===0?null:{topics:i.weakTopics,message:`Hai avuto difficoltÃ  con: ${i.weakTopics.join(", ")}. Ripassa questi concetti prima di continuare!`,shouldBlock:i.consecutiveWrong>=3},[i]),d=o.useCallback(()=>{const b=i.correctAnswers+i.wrongAnswers,p=b>0?i.correctAnswers/b*100:0,x=b>0?i.totalAttempts/b:0;return{total:b,correct:i.correctAnswers,wrong:i.wrongAnswers,accuracy:Math.round(p),averageAttempts:Math.round(x*10)/10,difficulty:i.difficultyLevel,weakTopics:i.weakTopics}},[i]),h=o.useCallback(()=>{n({correctAnswers:0,wrongAnswers:0,consecutiveWrong:0,consecutiveCorrect:0,difficultyLevel:"easy",weakTopics:[],questionsAsked:[],totalAttempts:0})},[]);return{generateAIQuestion:s,recordAnswer:m,shouldReviewLesson:r,getAIFeedback:l,getReviewSuggestions:c,getQuizStats:d,resetPerformance:h,performance:i,isGenerating:t,maxAttemptsPerQuestion:Et}}function qt({amount:t,onComplete:a,trigger:i}){const[n,s]=o.useState(!1),[m,r]=o.useState(0);return o.useEffect(()=>{if(i){s(!0);let l=0;const c=t/20,d=setInterval(()=>{l+=c,l>=t?(r(t),clearInterval(d)):r(Math.floor(l))},30),h=setTimeout(()=>{s(!1),a?.()},2e3);return()=>{clearInterval(d),clearTimeout(h)}}},[i,t,a]),e.jsx(ge,{children:n&&e.jsx(u.div,{className:"fixed left-1/2 top-1/2 z-50 pointer-events-none",initial:{opacity:0,y:20,x:"-50%",scale:0},animate:{opacity:[0,1,1,0],y:[20,-60,-80,-100],scale:[0,1.2,1,.8],x:"-50%"},exit:{opacity:0,scale:0},transition:{duration:2,times:[0,.2,.7,1],ease:[.34,1.56,.64,1]},children:e.jsxs("div",{className:"relative",children:[e.jsxs(u.div,{className:"text-5xl px-8 py-4 rounded-2xl bg-gradient-to-r from-blue-500 to-purple-600 text-white shadow-2xl",style:{textShadow:"0 0 20px rgba(59, 130, 246, 0.8)"},children:["+",m," XP"]}),[...Array(5)].map((l,c)=>e.jsx(u.div,{className:"absolute text-yellow-400",initial:{opacity:0,scale:0,x:0,y:0},animate:{opacity:[0,1,0],scale:[0,1.5,0],x:[0,(Math.random()-.5)*100],y:[0,(Math.random()-.5)*100]},transition:{duration:1.2,delay:c*.1,ease:"easeOut"},style:{left:"50%",top:"50%"},children:e.jsx(U,{className:"w-6 h-6",fill:"currentColor"})},c))]})})})}function _t({isCorrect:t,show:a,onAnimationComplete:i,onDismiss:n}){return e.jsx(ge,{mode:"wait",onExitComplete:i,children:a&&t!==null&&e.jsxs(u.div,{className:"fixed inset-0 z-40 flex items-center justify-center cursor-pointer",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.2},onClick:n,children:[e.jsx(u.div,{className:`absolute inset-0 ${t?"bg-green-500/20":"bg-red-500/20"}`,initial:{opacity:0},animate:{opacity:[0,.6,0]},transition:{duration:.6}}),e.jsx(u.div,{className:`relative ${t?"bg-green-500 text-white":"bg-red-500 text-white"} rounded-full p-8 shadow-2xl`,initial:{scale:0,rotate:t?-180:0},animate:{scale:t?[0,1.2,1]:[0,1],rotate:t?[0,10,-10,10,0]:[-10,10,-10,10,-5,5,0]},exit:{scale:0,opacity:0},transition:{duration:t?.5:.6,ease:t?[.34,1.56,.64,1]:"easeInOut"},style:{boxShadow:t?"0 0 50px rgba(34, 197, 94, 0.6)":"0 0 50px rgba(239, 68, 68, 0.6)"},children:t?e.jsx(wt,{className:"w-24 h-24",strokeWidth:3}):e.jsx(qe,{className:"w-24 h-24",strokeWidth:3})}),t&&e.jsxs(e.Fragment,{children:[e.jsx(u.div,{className:"absolute w-32 h-32 border-4 border-green-500 rounded-full",initial:{scale:1,opacity:.8},animate:{scale:3,opacity:0},exit:{scale:0,opacity:0},transition:{duration:.8,ease:"easeOut"}}),e.jsx(u.div,{className:"absolute w-32 h-32 border-4 border-green-400 rounded-full",initial:{scale:1,opacity:.6},animate:{scale:2.5,opacity:0},exit:{scale:0,opacity:0},transition:{duration:.8,delay:.1,ease:"easeOut"}})]})]},"quiz-feedback")})}const ot={first_lesson:{id:"first_lesson",name:"Primo Passo",description:"Hai completato la tua prima lezione!",icon:"ðŸ“š",rarity:"common",category:"learning",requirement:{type:"lessons_completed",value:1,description:"Completa 1 lezione"},reward:{xp:50}},bitcoin_basics:{id:"bitcoin_basics",name:"Bitcoin Enthusiast",description:"Padroneggi le basi di Bitcoin",icon:"â‚¿",rarity:"common",category:"learning",requirement:{type:"lessons_completed",value:3,description:"Completa le prime 3 lezioni"},reward:{xp:100}},options_scholar:{id:"options_scholar",name:"Options Scholar",description:"Comprendi il mondo delle opzioni",icon:"ðŸ“Š",rarity:"rare",category:"learning",requirement:{type:"lessons_completed",value:6,description:"Completa 6 lezioni (metÃ  corso)"},reward:{xp:200}},wheel_master:{id:"wheel_master",name:"Wheel Master",description:"Hai completato tutte le lezioni sulla Wheel Strategy!",icon:"ðŸŽ“",rarity:"epic",category:"mastery",requirement:{type:"lessons_completed",value:9,description:"Completa 9 lezioni (Wheel completa)"},reward:{xp:500}},knowledge_seeker:{id:"knowledge_seeker",name:"Knowledge Seeker",description:"Hai completato 12 lezioni avanzate",icon:"ðŸ”",rarity:"epic",category:"learning",requirement:{type:"lessons_completed",value:12,description:"Completa 12 lezioni"},reward:{xp:750}},grand_master:{id:"grand_master",name:"Grand Master",description:"Hai completato TUTTE le 15 lezioni! Sei un esperto!",icon:"ðŸ‘‘",rarity:"legendary",category:"mastery",requirement:{type:"lessons_completed",value:15,description:"Completa tutte le 15 lezioni"},reward:{xp:1e3,multiplier:1.1}},xp_collector_1k:{id:"xp_collector_1k",name:"XP Collector",description:"Hai guadagnato 1,000 XP!",icon:"â­",rarity:"common",category:"achievement",requirement:{type:"xp_earned",value:1e3,description:"Guadagna 1,000 XP"},reward:{xp:100}},xp_hunter_5k:{id:"xp_hunter_5k",name:"XP Hunter",description:"Hai accumulato 5,000 XP!",icon:"ðŸŒŸ",rarity:"rare",category:"achievement",requirement:{type:"xp_earned",value:5e3,description:"Guadagna 5,000 XP"},reward:{xp:500}},xp_legend_10k:{id:"xp_legend_10k",name:"XP Legend",description:"Hai raggiunto 10,000 XP! Incredibile!",icon:"ðŸ’«",rarity:"legendary",category:"achievement",requirement:{type:"xp_earned",value:1e4,description:"Guadagna 10,000 XP"},reward:{xp:1e3,multiplier:1.05}},level_5:{id:"level_5",name:"Rising Trader",description:"Hai raggiunto il livello 5!",icon:"ðŸ“ˆ",rarity:"rare",category:"achievement",requirement:{type:"level_reached",value:5,description:"Raggiungi livello 5"},reward:{xp:250}},level_10:{id:"level_10",name:"Advanced Trader",description:"Livello 10! Sei tra i migliori!",icon:"ðŸš€",rarity:"epic",category:"achievement",requirement:{type:"level_reached",value:10,description:"Raggiungi livello 10"},reward:{xp:500}},level_15:{id:"level_15",name:"Elite Trader",description:"Livello 15! Sei un'Ã©lite!",icon:"ðŸ’Ž",rarity:"legendary",category:"mastery",requirement:{type:"level_reached",value:15,description:"Raggiungi livello 15"},reward:{xp:1e3,multiplier:1.15}},streak_3:{id:"streak_3",name:"On Fire",description:"3 giorni di streak! Continua cosÃ¬!",icon:"ðŸ”¥",rarity:"common",category:"streak",requirement:{type:"streak_days",value:3,description:"Mantieni uno streak di 3 giorni"},reward:{xp:100}},streak_7:{id:"streak_7",name:"Weekly Warrior",description:"Una settimana di streak! Dedizione totale!",icon:"ðŸ”¥ðŸ”¥",rarity:"rare",category:"streak",requirement:{type:"streak_days",value:7,description:"Mantieni uno streak di 7 giorni"},reward:{xp:300,multiplier:1.05}},streak_30:{id:"streak_30",name:"Monthly Master",description:"30 giorni di streak! Sei inarrestabile!",icon:"ðŸ”¥ðŸ”¥ðŸ”¥",rarity:"epic",category:"streak",requirement:{type:"streak_days",value:30,description:"Mantieni uno streak di 30 giorni"},reward:{xp:1e3,multiplier:1.1}},streak_100:{id:"streak_100",name:"Centurion",description:"100 giorni consecutivi! Leggenda vivente!",icon:"ðŸ‘‘ðŸ”¥",rarity:"legendary",category:"streak",requirement:{type:"streak_days",value:100,description:"Mantieni uno streak di 100 giorni"},reward:{xp:5e3,multiplier:1.2}},quiz_perfectionist:{id:"quiz_perfectionist",name:"Perfectionist",description:"Hai fatto 5 quiz con punteggio perfetto!",icon:"ðŸ’¯",rarity:"rare",category:"achievement",requirement:{type:"quiz_perfect",value:5,description:"Completa 5 quiz con 100% risposte corrette"},reward:{xp:300}},quiz_genius:{id:"quiz_genius",name:"Quiz Genius",description:"10 quiz perfetti! Hai memoria fotografica!",icon:"ðŸ§ ",rarity:"epic",category:"achievement",requirement:{type:"quiz_perfect",value:10,description:"Completa 10 quiz con 100% risposte corrette"},reward:{xp:750}},first_profit:{id:"first_profit",name:"First Profit",description:"Hai completato la tua prima simulazione in profitto!",icon:"ðŸ’°",rarity:"common",category:"trading",requirement:{type:"simulation_profit",value:1,description:"Completa 1 simulazione con profitto positivo"},reward:{xp:150}},profitable_trader:{id:"profitable_trader",name:"Profitable Trader",description:"Hai completato 5 simulazioni profittevoli!",icon:"ðŸ’µ",rarity:"rare",category:"trading",requirement:{type:"simulation_profit",value:5,description:"Completa 5 simulazioni con profitto positivo"},reward:{xp:500}},trading_pro:{id:"trading_pro",name:"Trading Pro",description:"10 simulazioni profittevoli! Sei un professionista!",icon:"ðŸ†",rarity:"epic",category:"trading",requirement:{type:"simulation_profit",value:10,description:"Completa 10 simulazioni con profitto positivo"},reward:{xp:1e3,multiplier:1.1}}};function na(t,a){switch(t.requirement.type){case"lessons_completed":return a.completedLessons.length>=t.requirement.value;case"xp_earned":return a.xp>=t.requirement.value;case"streak_days":return a.streak>=t.requirement.value;case"level_reached":return a.level>=t.requirement.value;case"quiz_perfect":return(a.perfectQuizzes||0)>=t.requirement.value;case"simulation_profit":return(a.profitableSimulations||0)>=t.requirement.value;default:return!1}}function ns(t){const a=[];return Object.values(ot).forEach(i=>{!t.unlockedBadges?.includes(i.id)&&na(i,t)&&a.push(i.id)}),a}function os(t){const a=Object.values(ot).filter(i=>!t.unlockedBadges?.includes(i.id)&&!na(i,t));return a.length===0?null:a.reduce((i,n)=>{const s=Bt(n,t),m=Bt(i,t);return s>m?n:i})}function Bt(t,a){switch(t.requirement.type){case"lessons_completed":return a.completedLessons.length/t.requirement.value;case"xp_earned":return a.xp/t.requirement.value;case"streak_days":return a.streak/t.requirement.value;case"level_reached":return a.level/t.requirement.value;case"quiz_perfect":return(a.perfectQuizzes||0)/t.requirement.value;case"simulation_profit":return(a.profitableSimulations||0)/t.requirement.value;default:return 0}}const bt={common:"from-gray-400 to-gray-600",rare:"from-blue-400 to-blue-600",epic:"from-purple-400 to-purple-600",legendary:"from-yellow-400 to-orange-600"},ls={common:"border-gray-400",rare:"border-blue-400",epic:"border-purple-400",legendary:"border-yellow-400"},oa={common:"Comune",rare:"Raro",epic:"Epico",legendary:"Leggendario"};function Ot({badgeId:t,onClose:a}){const[i,n]=o.useState(!1),s=t?ot[t]:null;o.useEffect(()=>{t&&s&&(n(!0),typeof window<"u"&&"vibrate"in navigator&&navigator.vibrate([200,100,200,100,400]))},[t,s]);const m=()=>{n(!1),setTimeout(a,300)};return s?e.jsx(ge,{children:i&&e.jsxs(e.Fragment,{children:[e.jsx(u.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/70 backdrop-blur-sm z-[100]",onClick:m}),e.jsx("div",{className:"fixed inset-0 z-[101] flex items-center justify-center p-4",children:e.jsx(u.div,{initial:{scale:.5,opacity:0,rotateY:-180},animate:{scale:1,opacity:1,rotateY:0,transition:{type:"spring",stiffness:200,damping:20}},exit:{scale:.8,opacity:0,transition:{duration:.2}},className:"w-full max-w-md",children:e.jsxs(k,{className:"relative overflow-hidden p-8 text-center",children:[e.jsx("div",{className:"absolute inset-0 overflow-hidden pointer-events-none",children:[...Array(20)].map((r,l)=>e.jsx(u.div,{className:"absolute w-2 h-2 rounded-full bg-yellow-400",initial:{x:"50%",y:"50%",scale:0,opacity:0},animate:{x:`${Math.random()*100}%`,y:`${Math.random()*100}%`,scale:[0,1,0],opacity:[0,1,0]},transition:{duration:1.5,delay:l*.05,ease:"easeOut"}},l))}),e.jsx("button",{onClick:m,className:"absolute top-4 right-4 text-gray-400 hover:text-gray-600 transition-colors",children:e.jsx(qe,{className:"w-5 h-5"})}),e.jsx(u.div,{initial:{y:-20,opacity:0},animate:{y:0,opacity:1},transition:{delay:.2},className:"mb-4",children:e.jsxs("div",{className:"flex items-center justify-center gap-2 mb-2",children:[e.jsx(G,{className:"w-6 h-6 text-yellow-500"}),e.jsx("h2",{className:"text-gray-900",children:"Badge Sbloccato!"})]})}),e.jsxs(u.div,{initial:{scale:0},animate:{scale:1,transition:{type:"spring",stiffness:200,damping:15,delay:.3}},className:"relative mb-6",children:[e.jsx("div",{className:`absolute inset-0 blur-2xl opacity-50 bg-gradient-to-r ${bt[s.rarity]}`}),e.jsx("div",{className:"relative text-8xl filter drop-shadow-xl",children:s.icon})]}),e.jsxs(u.div,{initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{delay:.5},className:"space-y-3",children:[e.jsx("div",{className:"flex justify-center",children:e.jsx("span",{className:`inline-block px-4 py-1 rounded-full text-sm bg-gradient-to-r ${bt[s.rarity]} text-white`,children:oa[s.rarity]})}),e.jsx("h3",{className:"text-gray-900 text-2xl",children:s.name}),e.jsx("p",{className:"text-gray-600",children:s.description}),s.reward&&e.jsxs("div",{className:"flex items-center justify-center gap-2 text-green-600 pt-4",children:[e.jsx(U,{className:"w-5 h-5"}),e.jsxs("div",{className:"space-x-3",children:[s.reward.xp&&e.jsxs("span",{className:"font-semibold",children:["+",s.reward.xp," XP"]}),s.reward.multiplier&&e.jsxs("span",{className:"text-sm",children:[((s.reward.multiplier-1)*100).toFixed(0),"% XP Boost"]})]})]})]}),e.jsx(u.div,{initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{delay:.7},className:"mt-6",children:e.jsx(N,{onClick:m,className:"w-full bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-700 hover:to-purple-700",children:"Fantastico!"})}),e.jsx(u.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.4},className:"absolute inset-0 pointer-events-none",children:[...Array(30)].map((r,l)=>e.jsx(u.div,{className:"absolute",style:{left:`${50+(Math.random()-.5)*20}%`,top:`${50+(Math.random()-.5)*20}%`},animate:{y:[0,-200-Math.random()*100],x:[(Math.random()-.5)*200],rotate:[0,360*(Math.random()>.5?1:-1)],opacity:[1,0]},transition:{duration:2+Math.random(),delay:.4+Math.random()*.3,ease:"easeOut"},children:e.jsx("div",{className:"w-3 h-3 rounded-sm",style:{backgroundColor:["#FFD700","#FF6B6B","#4ECDC4","#45B7D1","#FFA07A","#98D8C8"][Math.floor(Math.random()*6)]}})},l))})]})})})]})}):null}function cs({performance:t,isGenerating:a,onGenerateTest:i}){const[n,s]=o.useState(!1);return n?e.jsx("div",{className:"fixed bottom-20 right-4 z-50 md:bottom-4 max-w-sm",children:e.jsxs(k,{className:"p-4 bg-gray-900 text-white shadow-2xl",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("h3",{className:"text-white flex items-center gap-2",children:[e.jsx(ae,{className:"w-5 h-5 text-purple-400"}),"AI Performance"]}),e.jsx(N,{onClick:()=>s(!1),size:"sm",variant:"ghost",className:"text-gray-400 hover:text-white",children:"âœ•"})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-gray-400 text-sm",children:"DifficoltÃ :"}),e.jsx("span",{className:`px-2 py-1 rounded text-xs font-semibold ${t.difficultyLevel==="easy"?"bg-green-600":t.difficultyLevel==="medium"?"bg-yellow-600":"bg-red-600"}`,children:t.difficultyLevel.toUpperCase()})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-gray-400 text-sm",children:"Score:"}),e.jsxs("span",{className:"text-white font-semibold",children:["âœ“ ",t.correctAnswers," | âœ— ",t.wrongAnswers]})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-1",children:[e.jsx("span",{className:"text-gray-400 text-sm",children:"Accuracy:"}),e.jsxs("span",{className:`font-semibold ${t.accuracy>=70?"text-green-400":t.accuracy>=50?"text-yellow-400":"text-red-400"}`,children:[t.accuracy.toFixed(1),"%"]})]}),e.jsx("div",{className:"h-2 bg-gray-700 rounded-full overflow-hidden",children:e.jsx("div",{className:`h-full transition-all ${t.accuracy>=70?"bg-green-500":t.accuracy>=50?"bg-yellow-500":"bg-red-500"}`,style:{width:`${t.accuracy}%`}})})]}),t.consecutiveWrong>0&&e.jsxs("div",{className:"flex items-center gap-2 text-orange-400 bg-orange-900/30 p-2 rounded",children:[e.jsx(Je,{className:"w-4 h-4"}),e.jsxs("span",{className:"text-xs",children:[t.consecutiveWrong," errori consecutivi"]})]}),t.weakTopics.length>0&&e.jsxs("div",{className:"bg-red-900/30 p-2 rounded",children:[e.jsx("p",{className:"text-xs text-red-400 mb-1",children:"Punti deboli:"}),e.jsx("div",{className:"flex flex-wrap gap-1",children:t.weakTopics.map((m,r)=>e.jsx("span",{className:"text-xs bg-red-800 px-2 py-0.5 rounded",children:m},r))})]}),e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{className:"text-gray-400",children:"Domande storico:"}),e.jsx("span",{className:"text-white",children:t.previousQuestions.length})]}),e.jsx("div",{className:"flex items-center gap-2 pt-2 border-t border-gray-700",children:a?e.jsxs("div",{className:"flex items-center gap-2 text-yellow-400",children:[e.jsx("div",{className:"w-3 h-3 border-2 border-yellow-400 border-t-transparent rounded-full animate-spin"}),e.jsx("span",{className:"text-xs",children:"Generando AI..."})]}):e.jsxs("div",{className:"flex items-center gap-2 text-green-400",children:[e.jsx(Ne,{className:"w-3 h-3"}),e.jsx("span",{className:"text-xs",children:"AI Ready"})]})}),i&&e.jsxs(N,{onClick:i,disabled:a,size:"sm",className:"w-full bg-purple-600 hover:bg-purple-700 mt-2",children:[e.jsx(K,{className:"w-4 h-4 mr-2"}),"Test AI Generation"]})]}),e.jsx("p",{className:"text-xs text-gray-500 mt-3 pt-3 border-t border-gray-700",children:"ðŸ¤– Sistema AI Quiz Dinamico attivo"})]})}):e.jsxs(N,{onClick:()=>s(!0),size:"sm",variant:"outline",className:"fixed bottom-20 right-4 z-50 md:bottom-4 bg-purple-600 text-white hover:bg-purple-700",children:[e.jsx(ae,{className:"w-4 h-4 mr-2"}),"AI Debug"]})}function la(){const t=o.useCallback(i=>{if(localStorage.getItem("mascotHapticEnabled")!=="false"&&"vibrate"in navigator&&typeof navigator.vibrate=="function")try{navigator.vibrate(i)}catch(s){console.warn("Vibration not supported or failed:",s)}},[]);return{light:()=>t(10),medium:()=>t(20),heavy:()=>t(40),success:()=>t([10,50,10,50,10]),error:()=>t([50,100,50]),notification:()=>t([20,40,20]),selection:()=>t([5,10,5]),custom:i=>t(i)}}function ca(){const t=o.useRef(null),a=o.useRef(!0);o.useEffect(()=>{const s=()=>{t.current||(t.current=new(window.AudioContext||window.webkitAudioContext))};return document.addEventListener("click",s,{once:!0}),document.addEventListener("touchstart",s,{once:!0}),()=>{t.current&&t.current.close()}},[]);const i=o.useCallback((s,m,r="sine",l=.3)=>{if(!(!a.current||!t.current))try{const c=t.current,d=c.createOscillator(),h=c.createGain();d.connect(h),h.connect(c.destination),d.type=r,d.frequency.setValueAtTime(s,c.currentTime),h.gain.setValueAtTime(l,c.currentTime),h.gain.exponentialRampToValueAtTime(.01,c.currentTime+m),d.start(c.currentTime),d.stop(c.currentTime+m)}catch(c){console.warn("Sound playback failed:",c)}},[]),n={appear:()=>{i(400,.1,"sine",.2),setTimeout(()=>i(600,.15,"sine",.25),80)},click:()=>{i(800,.08,"sine",.3)},tipShow:()=>{i(600,.12,"sine",.2),setTimeout(()=>i(800,.12,"sine",.2),60)},tipDismiss:()=>{i(500,.1,"sine",.15)},excited:()=>{i(523,.1,"sine",.25),setTimeout(()=>i(659,.1,"sine",.25),80),setTimeout(()=>i(784,.15,"sine",.25),160)},disappointed:()=>{i(440,.15,"sine",.2),setTimeout(()=>i(349,.2,"sine",.2),120)},normal:()=>{i(600,.12,"sine",.2)},hover:()=>{i(700,.05,"sine",.15)},success:()=>{i(523,.08,"square",.2),setTimeout(()=>i(659,.08,"square",.2),70),setTimeout(()=>i(784,.08,"square",.2),140),setTimeout(()=>i(1047,.2,"square",.25),210)},playSound:s=>{s==="positive"?n.success():n.disappointed()},toggleSound:s=>{a.current=s},isSoundEnabled:()=>a.current};return n}function ds(){const t=la(),a=ca(),[i,n]=o.useState({xpGain:!1,quizFeedback:{show:!1,isCorrect:null},streakIncrement:!1,levelUp:!1,badgeUnlock:!1,lessonComplete:!1}),s=o.useCallback(p=>{n(x=>({...x,xpGain:!0})),a.success(),t.success(),setTimeout(()=>{n(x=>({...x,xpGain:!1}))},100)},[a,t]),m=o.useCallback(p=>{n(x=>({...x,quizFeedback:{show:!0,isCorrect:p}})),p?(a.excited(),t.success()):(a.disappointed(),t.error()),setTimeout(()=>{n(x=>({...x,quizFeedback:{show:!1,isCorrect:null}}))},1e3)},[a,t]),r=o.useCallback(()=>{n(p=>({...p,quizFeedback:{show:!1,isCorrect:null}}))},[]),l=o.useCallback(()=>{n(p=>({...p,streakIncrement:!0})),a.excited(),t.success(),setTimeout(()=>{n(p=>({...p,streakIncrement:!1}))},100)},[a,t]),c=o.useCallback(p=>{n(x=>({...x,levelUp:!0})),a.success(),t.success(),setTimeout(()=>{n(x=>({...x,levelUp:!1}))},100)},[a,t]),d=o.useCallback(p=>{n(x=>({...x,badgeUnlock:!0})),a.success(),t.success(),setTimeout(()=>{n(x=>({...x,badgeUnlock:!1}))},100)},[a,t]),h=o.useCallback(()=>{n(p=>({...p,lessonComplete:!0})),a.success(),t.success(),setTimeout(()=>{n(p=>({...p,lessonComplete:!1}))},100)},[a,t]),b=o.useCallback(()=>{n({xpGain:!1,quizFeedback:{show:!1,isCorrect:null},streakIncrement:!1,levelUp:!1,badgeUnlock:!1,lessonComplete:!1})},[]);return{triggers:i,triggerXPGain:s,triggerQuizFeedback:m,dismissQuizFeedback:r,triggerStreakIncrement:l,triggerLevelUp:c,triggerBadgeUnlock:d,triggerLessonComplete:h,resetAll:b}}const Le={1:{id:1,title:"Introduzione a Bitcoin",description:"Scopri cos'Ã¨ Bitcoin, come funziona la blockchain e perchÃ© Ã¨ una rivoluzione finanziaria",difficulty:"beginner",estimatedTime:"15 min",requiredLevel:1,sections:[{title:"Cos'Ã¨ Bitcoin?",content:"Bitcoin Ã¨ la prima criptovaluta decentralizzata al mondo, creata nel 2009 da Satoshi Nakamoto. Non Ã¨ controllata da nessuna banca o governo, ma da una rete distribuita di computer in tutto il mondo. Bitcoin permette di inviare valore digitale direttamente da persona a persona, senza intermediari."},{title:"La Blockchain",content:'La blockchain Ã¨ il registro pubblico distribuito su cui vengono registrate tutte le transazioni Bitcoin. Ogni "blocco" contiene un gruppo di transazioni, e i blocchi sono collegati tra loro in una "catena". Questa struttura rende estremamente difficile alterare le transazioni passate, garantendo sicurezza e trasparenza.'},{title:"PerchÃ© Bitcoin ha Valore?",content:"Bitcoin ha valore per tre motivi principali: 1) ScarsitÃ  - ci saranno solo 21 milioni di bitcoin, 2) UtilitÃ  - permette trasferimenti rapidi e sicuri, 3) Rete - piÃ¹ persone lo usano, piÃ¹ diventa prezioso. Come l'oro digitale, Bitcoin Ã¨ un store of value resistente alla censura."},{title:"Mining e Sicurezza",content:'I miner usano potenza computazionale per validare le transazioni e aggiungere nuovi blocchi alla blockchain. In cambio ricevono bitcoin come ricompensa. Questo processo chiamato "Proof of Work" rende la rete sicura: per attaccarla servirebbe piÃ¹ potenza di calcolo di tutti i miner onesti messi insieme, cosa economicamente non conveniente.'}],questions:[{id:1,type:"multiple-choice",question:"Chi ha creato Bitcoin?",options:["Elon Musk","Satoshi Nakamoto","Vitalik Buterin","La NSA"],correctAnswer:1,explanation:"Bitcoin Ã¨ stato creato da Satoshi Nakamoto nel 2009. La sua vera identitÃ  rimane ancora sconosciuta.",xp:50},{id:2,type:"multiple-choice",question:"Quanti bitcoin esisteranno in totale?",options:["10 milioni","21 milioni","100 milioni","Infiniti"],correctAnswer:1,explanation:"Il limite massimo di bitcoin Ã¨ fissato a 21 milioni. Questa scarsitÃ  programmata Ã¨ una caratteristica fondamentale di Bitcoin.",xp:50},{id:3,type:"multiple-choice",question:"Cos'Ã¨ la blockchain?",options:["Un tipo di criptovaluta","Un registro distribuito di transazioni","Un algoritmo di mining","Un wallet digitale"],correctAnswer:1,explanation:"La blockchain Ã¨ un registro pubblico e distribuito che contiene tutte le transazioni Bitcoin in ordine cronologico.",xp:75}]},2:{id:2,title:"VolatilitÃ  e Prezzo di Bitcoin",description:"Comprendi i cicli di mercato, la volatilitÃ  e cosa muove il prezzo di Bitcoin",difficulty:"beginner",estimatedTime:"20 min",requiredLevel:1,sections:[{title:"Cosa Causa la VolatilitÃ ",content:"Bitcoin Ã¨ noto per la sua alta volatilitÃ . I fattori principali includono: 1) Mercato relativamente piccolo rispetto ad asset tradizionali, 2) Notizie e sentiment del mercato, 3) Regolamentazioni governative, 4) Adozione istituzionale, 5) Eventi tecnici come halving. La volatilitÃ  Ã¨ sia un rischio che un'opportunitÃ  per i trader."},{title:"I Cicli di Mercato di Bitcoin",content:'Bitcoin segue cicli di circa 4 anni legati agli "halving" (dimezzamento della ricompensa dei miner). Tipicamente dopo ogni halving segue un bull market, poi un top, un bear market, e un periodo di accumulazione. Comprendere questi cicli ti aiuta a posizionarti meglio strategicamente.'},{title:"Analisi On-Chain",content:"L'analisi on-chain studia i dati direttamente dalla blockchain per capire il comportamento dei detentori di bitcoin. Metriche importanti includono: indirizzi attivi, bitcoin in movimento, supply su exchange, profitti/perdite degli investitori. Questi dati ti danno insight sul sentiment di mercato."},{title:"Correlazioni di Mercato",content:"Bitcoin ha mostrato diverse correlazioni nel tempo: a volte con l'oro (store of value), a volte con tech stocks (risk-on asset). Negli ultimi anni la correlazione con i mercati tradizionali Ã¨ aumentata, specialmente con il NASDAQ. Capire queste dinamiche Ã¨ fondamentale per il risk management."}],questions:[{id:1,type:"multiple-choice",question:"Ogni quanti anni circa avviene l'halving di Bitcoin?",options:["2 anni","4 anni","6 anni","10 anni"],correctAnswer:1,explanation:"L'halving di Bitcoin avviene circa ogni 4 anni, o piÃ¹ precisamente ogni 210,000 blocchi minati.",xp:50},{id:2,type:"multiple-choice",question:"Quale fattore NON influenza tipicamente la volatilitÃ  di Bitcoin?",options:["Annunci di regolamentazione governativa","Adozione da parte di aziende","Il prezzo del petrolio","Sentiment sui social media"],correctAnswer:2,explanation:"Il prezzo del petrolio ha una correlazione molto bassa con Bitcoin. Gli altri fattori invece influenzano significativamente la volatilitÃ .",xp:75},{id:3,type:"multiple-choice",question:"Cosa indica un alto numero di bitcoin che si spostano dagli exchange ai wallet personali?",options:["Gli investitori vogliono vendere","Gli investitori stanno accumulando per il lungo termine","Il prezzo sta per crollare","Non ha alcun significato"],correctAnswer:1,explanation:"Quando i bitcoin lasciano gli exchange significa che gli investitori li stanno mettendo in cold storage, segnale di accumulo e holding a lungo termine.",xp:100}]},3:{id:3,title:"Cosa Sono le Opzioni",description:"Introduzione al mondo delle opzioni: put, call, strike, scadenza e premium",difficulty:"beginner",estimatedTime:"25 min",requiredLevel:2,sections:[{title:"Opzioni: Il Concetto Base",content:`Un'opzione Ã¨ un contratto che ti dÃ  il DIRITTO (ma non l'obbligo) di comprare o vendere un asset a un prezzo prestabilito entro una certa data. Ãˆ come un "coupon" che ti permette di bloccare un prezzo futuro. Le opzioni Bitcoin funzionano esattamente come quelle su azioni, ma con BTC come sottostante.`},{title:"Call vs Put",content:"Ci sono due tipi di opzioni: CALL (diritto di COMPRARE) e PUT (diritto di VENDERE). Esempio: una call a $50k ti permette di comprare BTC a $50k anche se il prezzo sale a $80k. Una put a $40k ti permette di vendere BTC a $40k anche se il prezzo scende a $30k."},{title:"Componenti di un'Opzione",content:"Ogni opzione ha 4 elementi chiave: 1) STRIKE PRICE - il prezzo di esercizio, 2) SCADENZA - quando il contratto termina, 3) PREMIUM - il prezzo che paghi per l'opzione, 4) SOTTOSTANTE - l'asset (nel nostro caso BTC). Questi elementi determinano il valore e il rischio dell'opzione."},{title:"Comprare vs Vendere Opzioni",content:"Puoi essere BUYER (compratore) o SELLER (venditore) di opzioni. Il buyer paga un premium e ha diritti limitati al premium pagato. Il seller riceve il premium ma assume obblighi potenzialmente illimitati. Nella Wheel Strategy, vendiamo opzioni per raccogliere premium regolarmente."}],questions:[{id:1,type:"multiple-choice",question:"Una CALL option ti dÃ  il diritto di:",options:["Vendere l'asset","Comprare l'asset","Tenere l'asset","Scambiare l'asset"],correctAnswer:1,explanation:"Una CALL option ti dÃ  il diritto (non l'obbligo) di COMPRARE l'asset sottostante al prezzo strike.",xp:50},{id:2,type:"multiple-choice",question:"Se vendi un'opzione, cosa ricevi?",options:["Il diritto di comprare","Il diritto di vendere","Il premium","Niente"],correctAnswer:2,explanation:"Quando vendi un'opzione, ricevi immediatamente il premium, ma assumi l'obbligo di onorare il contratto se richiesto.",xp:75},{id:3,type:"multiple-choice",question:"Quale elemento NON Ã¨ parte di un contratto di opzione?",options:["Strike price","Data di scadenza","Dividend yield","Premium"],correctAnswer:2,explanation:"Il dividend yield non Ã¨ rilevante per le opzioni Bitcoin. Strike, scadenza e premium sono i componenti essenziali.",xp:75}]},4:{id:4,title:"Cash-Secured Put",description:"Impara la prima gamba della Wheel Strategy: vendere put per generare income",difficulty:"intermediate",estimatedTime:"30 min",requiredLevel:3,sections:[{title:"Cos'Ã¨ una Cash-Secured Put",content:'Una Cash-Secured Put (CSP) Ã¨ quando VENDI una put option avendo il cash necessario per comprare BTC se assegnato. Esempio: vendi una put strike $40k, tieni $40k in cash. Se BTC scende sotto $40k, compri BTC a quel prezzo. Se resta sopra, tieni il premium. Ãˆ un modo per "farsi pagare per aspettare" un prezzo di entrata.'},{title:"Calcolo del Premium e Rendimento",content:"Il premium che ricevi dipende da: 1) VolatilitÃ  implicita (IV) - piÃ¹ alta, piÃ¹ premium, 2) Distanza dello strike dal prezzo attuale - piÃ¹ lontano, meno premium, 3) Tempo a scadenza - piÃ¹ tempo, piÃ¹ premium. Un buon target Ã¨ 1-3% del capitale investito al mese (12-36% annualizzato)."},{title:"Selezione dello Strike",content:'Scegli uno strike a cui saresti FELICE di comprare BTC. Considera: 1) Livelli di supporto tecnico, 2) Prezzo medio di mercato, 3) Il tuo punto di vista sul prezzo. Strike "Out of the Money" (sotto il prezzo attuale) sono piÃ¹ sicuri ma danno meno premium. Strike "At the Money" danno piÃ¹ premium ma piÃ¹ probabilitÃ  di assegnazione.'},{title:"Gestione del Rischio",content:"I rischi principali sono: 1) BTC crolla molto sotto il tuo strike (ma se volevi comprarlo, va bene), 2) BTC sale molto e perdi l'opportunitÃ  (ma hai il premium). Per mitigare: vendi put solo a strike che ti vanno bene, non investire tutto in una scadenza, considera strike piÃ¹ conservativi in mercati incerti."}],questions:[{id:1,type:"multiple-choice",question:"Quando vendi una Cash-Secured Put, il tuo profitto massimo Ã¨:",options:["Illimitato","Il premium ricevuto","La differenza tra strike e prezzo di mercato","Zero"],correctAnswer:1,explanation:"Quando vendi una put, il massimo che puoi guadagnare Ã¨ il premium ricevuto. Non puoi guadagnare piÃ¹ di quello, ma Ã¨ tuo sin dall'inizio.",xp:100},{id:2,type:"multiple-choice",question:"Se vendi una put a strike $45,000 e ricevi $500 di premium, qual Ã¨ il tuo breakeven?",options:["$45,000","$45,500","$44,500","$40,000"],correctAnswer:2,explanation:"Il breakeven Ã¨ strike - premium ricevuto = $45,000 - $500 = $44,500. A quel prezzo sei in pareggio anche se assegnato.",xp:150},{id:3,type:"multiple-choice",question:"Quale scenario Ã¨ MEGLIO per vendere put con alto premium?",options:["Bassa volatilitÃ , mercato calmo","Alta volatilitÃ , mercato nervoso","Trend fortemente rialzista","Non fa differenza"],correctAnswer:1,explanation:"Alta volatilitÃ  implicita significa premium piÃ¹ alti. I mercati nervosi e incerti offrono i migliori premi per i venditori di opzioni.",xp:150}]},5:{id:5,title:"Covered Call",description:"La seconda gamba della Wheel: vendere call sul BTC che possiedi per generare income extra",difficulty:"intermediate",estimatedTime:"30 min",requiredLevel:4,sections:[{title:"Cos'Ã¨ una Covered Call",content:"Una Covered Call (CC) Ã¨ quando VENDI una call option possedendo giÃ  il BTC sottostante. Esempio: hai 1 BTC comprato a $40k, lo vendi a call strike $50k per $800. Se BTC resta sotto $50k tieni BTC + $800. Se sale sopra $50k, vendi il tuo BTC a $50k ma tieni i $800. In entrambi i casi, generi reddito extra."},{title:"Quando Vendere Covered Call",content:"Le covered call sono ideali quando: 1) Possiedi giÃ  BTC e vuoi generare income, 2) Pensi che il prezzo resterÃ  flat o salirÃ  moderatamente, 3) Vuoi ridurre il costo base del tuo BTC, 4) Sei disposto a vendere BTC a un prezzo target. Evita in strong uptrend dove preferiresti tenere BTC."},{title:"Scelta dello Strike per le Call",content:'Strike "Out of the Money" (sopra il prezzo attuale): meno premium ma tieni BTC piÃ¹ facilmente. Strike "At the Money": piÃ¹ premium ma alta probabilitÃ  di vendere BTC. Strike "In the Money": massimo premium ma quasi certo che vendi BTC. Considera il tuo target di vendita: se venderesti BTC a $55k, vendi call a quello strike.'},{title:"Gestione della Posizione",content:"Se BTC sale verso il tuo strike: 1) Lascia che venga assegnato (vendi a profitto), 2) Fai roll up/out per strike piÃ¹ alto, 3) Chiudi la call in perdita per tenere BTC. Se BTC scende: la call scade senza valore, tieni BTC + premium, puoi vendere nuova call. Il premium riduce il tuo costo base nel tempo."}],questions:[{id:1,type:"multiple-choice",question:"Con una Covered Call, il tuo rischio massimo Ã¨:",options:["Il premium ricevuto","La perdita sul BTC sottostante","Illimitato","Zero"],correctAnswer:1,explanation:"Il rischio principale Ã¨ la perdita sul BTC posseduto. Il premium ricevuto aiuta a ridurre questa perdita, ma non la elimina.",xp:100},{id:2,type:"multiple-choice",question:"Hai comprato BTC a $40k, vendi call strike $50k per $1k. Se BTC sale a $55k e vieni assegnato, qual Ã¨ il tuo profitto totale?",options:["$10,000","$11,000","$15,000","$5,000"],correctAnswer:1,explanation:"Guadagno su BTC: $50k - $40k = $10k. Premium call: $1k. Totale: $11k. Non realizzi il guadagno extra da $50k a $55k perchÃ© hai venduto a $50k.",xp:150},{id:3,type:"multiple-choice",question:"Quale affermazione Ã¨ VERA per le covered call?",options:["Limitano il profitto massimo verso l'alto","Eliminano completamente il rischio","Funzionano meglio in strong downtrend","Richiedono margine aggiuntivo"],correctAnswer:0,explanation:"Le covered call limitano il profitto massimo allo strike scelto, ma in cambio ricevi premium regolari che riducono il rischio verso il basso.",xp:150}]},6:{id:6,title:"La Wheel Strategy Completa",description:"Unisci put e call in un ciclo perpetuo di generazione di income su Bitcoin",difficulty:"intermediate",estimatedTime:"35 min",requiredLevel:5,sections:[{title:"Come Funziona la Wheel",content:"La Wheel Strategy Ã¨ un ciclo: 1) INIZIO: Vendi Cash-Secured Put per generare premium, 2) SE ASSEGNATO: Compri BTC al tuo strike, 3) CONTINUA: Vendi Covered Call sul BTC posseduto, 4) SE ASSEGNATO: Vendi BTC a profitto, 5) RIPETI: Torna a vendere put. Ad ogni step generi premium, che sia in cash o con BTC in portafoglio."},{title:"Esempio Pratico Completo",content:"Capitale $50k, BTC a $50k. STEP 1: Vendi put strike $45k, ricevi $900 premium. BTC scende a $44k. STEP 2: Vieni assegnato, compri BTC a $45k. STEP 3: Vendi call strike $50k, ricevi $1k. BTC sale a $51k. STEP 4: Vieni assegnato, vendi BTC a $50k. Guadagno: $900 (put) + $1k (call) + $5k (profitto BTC) = $6,900 su $45k investiti = 15.3% in un ciclo!"},{title:"Gestione del Capitale",content:"Non usare MAI tutto il capitale in una posizione. Regola del 20-30%: usa solo 20-30% del capitale per ogni wheel cycle, cosÃ¬ puoi vendere put a strike diversi o scadenze diverse. Questo ti protegge da draw down severi e ti permette di mediare il costo se BTC scende molto. Mantieni cash per opportunitÃ ."},{title:"Quando la Wheel NON Funziona",content:"La Wheel soffre in: 1) Mercati fortemente direzionali - se BTC 10x, avresti guadagnato piÃ¹ holddando, 2) Crash improvvisi - potresti comprare BTC in caduta, 3) Bassa volatilitÃ  - premium bassi non compensano il tempo. Migliore in mercati range-bound o moderatamente volatili. Considera il contesto macro prima di entrare."}],questions:[{id:1,type:"multiple-choice",question:"La Wheel Strategy funziona meglio in quale tipo di mercato?",options:["Strong uptrend con +100% in poche settimane","Range-bound o moderatamente volatile","Crash del -80%","VolatilitÃ  zero"],correctAnswer:1,explanation:"La Wheel Ã¨ ottimale in mercati range-bound o con volatilitÃ  moderata, dove raccogli premium regolari senza movimenti estremi.",xp:100},{id:2,type:"multiple-choice",question:"Quale percentuale del capitale Ã¨ consigliabile usare per ogni wheel cycle?",options:["100% - massimizza i rendimenti","50% - equilibrato","20-30% - consente diversificazione","5% - troppo conservativo"],correctAnswer:2,explanation:"Usare 20-30% per cycle ti permette di diversificare strike e scadenze, riducendo il rischio concentrato.",xp:150},{id:3,type:"multiple-choice",question:"In un ciclo completo della Wheel, quante volte generi premium?",options:["Una volta (solo la put)","Due volte (put + call)","Tre volte (put + call + vendita BTC)","Mai, guadagni solo dalla vendita di BTC"],correctAnswer:1,explanation:"In un ciclo completo generi premium due volte: quando vendi la put iniziale e quando vendi la call sul BTC posseduto.",xp:150}]},7:{id:7,title:"Greeks: Delta, Theta, Vega",description:"Comprendi le forze che muovono il prezzo delle opzioni e come usarle a tuo vantaggio",difficulty:"advanced",estimatedTime:"40 min",requiredLevel:6,sections:[{title:"Delta: La SensibilitÃ  al Prezzo",content:"Delta misura quanto cambia il prezzo dell'opzione quando BTC si muove di $1. Delta va da 0 a 1 per call (0 a -1 per put). Esempio: call con delta 0.30 guadagna $0.30 per ogni $1 che BTC sale. Quando VENDI opzioni vuoi delta basso (lontano dal denaro), cosÃ¬ il prezzo dell'opzione non ti va contro se BTC si muove."},{title:"Theta: Il Tempo Ã¨ Denaro",content:"Theta rappresenta quanto valore perde l'opzione ogni giorno che passa (time decay). Per i VENDITORI di opzioni, theta Ã¨ il tuo alleato! Ogni giorno che passa senza movimento, l'opzione che hai venduto perde valore, e tu guadagni. Le opzioni con scadenza entro 30-45 giorni hanno il theta decay piÃ¹ accelerato."},{title:"Vega: La VolatilitÃ  Implicita",content:"Vega misura quanto cambia il prezzo dell'opzione per ogni 1% di cambiamento nella volatilitÃ  implicita (IV). Quando vendi opzioni con IV alta, ricevi piÃ¹ premium. Se poi IV scende, l'opzione perde valore anche senza movimento di prezzo. Strategia: vendi quando IV Ã¨ alta (paura/incertezza), compra quando IV Ã¨ bassa."},{title:"Usare i Greeks nella Wheel",content:"Per la Wheel: 1) Cerca put/call con delta 0.20-0.40 (probability ~20-40% di finire ITM), 2) Preferisci scadenze 30-45 giorni per massimizzare theta, 3) Monitora IV: vendi quando Ã¨ sopra media storica, 4) Se IV crolla dopo che hai venduto, considera di chiudere early per lock in profit. I Greeks ti dicono QUANDO entrare e uscire."}],questions:[{id:1,type:"multiple-choice",question:"Se vendi una put con delta -0.25, cosa significa?",options:["Hai 25% di probabilitÃ  di profitto","L'opzione perde $0.25 al giorno","L'opzione guadagna ~$0.25 per ogni $1 che BTC scende","La volatilitÃ  Ã¨ al 25%"],correctAnswer:2,explanation:"Delta -0.25 significa che l'opzione guadagna circa $0.25 di valore per ogni $1 che BTC scende (negativo per le put).",xp:150},{id:2,type:"multiple-choice",question:"Theta decay Ã¨ piÃ¹ rapido per opzioni che scadono tra:",options:["1-7 giorni","30-45 giorni","90-120 giorni","180+ giorni"],correctAnswer:1,explanation:"Il theta decay Ã¨ piÃ¹ accelerato nelle ultime settimane prima della scadenza, con picco negli ultimi 7 giorni. Ma 30-45 giorni offre miglior bilanciamento rischio/rendimento.",xp:150},{id:3,type:"multiple-choice",question:"Quando Ã¨ il momento MIGLIORE per vendere opzioni in termini di Vega?",options:["Quando IV (volatilitÃ  implicita) Ã¨ molto bassa","Quando IV Ã¨ nella media","Quando IV Ã¨ molto alta (sopra percentile 70-80)","IV non Ã¨ rilevante per venditori"],correctAnswer:2,explanation:"Vendere quando IV Ã¨ alta significa ricevere premium piÃ¹ alti. Quando IV scende, puoi chiudere early in profitto anche senza movimento di prezzo.",xp:200}]},8:{id:8,title:"Gestione del Rischio e Position Sizing",description:"Proteggi il capitale: regole di risk management essenziali per la Wheel Strategy",difficulty:"advanced",estimatedTime:"35 min",requiredLevel:7,sections:[{title:"La Regola del 2% e Dimensione Posizione",content:"Mai rischiare piÃ¹ del 2% del capitale totale in una singola posizione. Se hai $100k, non rischiare piÃ¹ di $2k per trade. Per la Wheel, questo significa: se vendi put strike $40k, assicurati che una perdita del 5% su quella posizione ($2k) sia accettabile. Position size = Capitale * 0.02 / Stop Loss percentuale. Rispetta SEMPRE questa regola."},{title:"Diversificazione Temporale e Strike",content:'Non concentrare tutto su una scadenza o strike. Esempio: se hai $100k, invece di vendere 2 put strike $45k scadenza 30 giorni, vendi: 1 put $45k a 30 giorni, 1 put $40k a 45 giorni. Questo riduce il rischio di assignment simultaneo e ti permette di mediare costi se BTC scende. "Non mettere tutte le uova nello stesso paniere".'},{title:"Stop Loss Mentali e Rolling Defensivo",content:"Definisci PRIMA un punto di uscita. Esempio: se la put venduta va in perdita del 200% del premium ricevuto, chiudi o fai roll. Se hai venduto put per $1k e ora costa $3k ricomprarla, decidi: accetti assignment o fai roll out in tempo? Non lasciare che l'ego ti blocchi in posizioni perdenti. Cut losses early se il trade thesis Ã¨ invalidato."},{title:"Margin of Safety e Stress Testing",content:'Sempre mantieni buffer di cash. Se tutto il capitale Ã¨ impegnato in put vendute, un drawdown ti forza a scelte difficili. Regola: massimo 60-70% del capitale in posizioni attive, 30-40% in cash. Fai stress test: "E se BTC scende del 30% domani? Posso sostenere tutte le assignment?". Se la risposta Ã¨ no, riduci position size.'}],questions:[{id:1,type:"multiple-choice",question:"Con $50,000 di capitale e regola del 2%, qual Ã¨ il massimo rischio accettabile per trade?",options:["$500","$1,000","$2,000","$5,000"],correctAnswer:1,explanation:"$50,000 * 2% = $1,000. Questo Ã¨ il massimo che dovresti rischiare in un singolo trade per proteggere il capitale.",xp:100},{id:2,type:"multiple-choice",question:"Hai venduto put per $800 premium. A che punto dovresti considerare stop loss?",options:["Mai, accetta sempre l'assignment","Quando la perdita supera il 100-200% del premium ($800-$1,600)","Solo quando BTC va a zero","Quando hai perso il 50% del capitale totale"],correctAnswer:1,explanation:"Una regola comune Ã¨ chiudere o roll quando la perdita supera 100-200% del premium ricevuto, per limitare i danni.",xp:150},{id:3,type:"multiple-choice",question:"Quale percentuale del capitale totale dovrebbe restare in cash come buffer?",options:["0% - usa tutto per massimizzare rendimenti","10% - minimo vitale","30-40% - margin of safety","80% - ultra conservativo"],correctAnswer:2,explanation:"Mantenere 30-40% in cash ti permette di gestire assignment inaspettati, mediare costi, o cogliere opportunitÃ  durante crash.",xp:150}]},9:{id:9,title:"Roll & Adjust: Gestione Avanzata",description:"Impara come e quando modificare le tue posizioni per ottimizzare profitti e gestire rischio",difficulty:"advanced",estimatedTime:"30 min",requiredLevel:8,sections:[{title:"Cos'Ã¨ il Rolling?",content:"Il rolling Ã¨ una tecnica che ti permette di chiudere una posizione esistente e aprirne una nuova con una scadenza piÃ¹ lontana o uno strike diverso. Questo ti permette di evitare l'assegnazione e continuare a raccogliere premium. Esistono 3 tipi: Roll OUT (stessa strike, scadenza piÃ¹ lontana), Roll UP/DOWN (strike diverso, stessa scadenza), Roll OUT AND UP/DOWN (entrambi)."},{title:"Quando Fare Roll",content:`Considera di fare roll quando: 1) La tua posizione Ã¨ in perdita ma credi ancora nella strategia, 2) Vuoi evitare l'assegnazione, 3) Puoi raccogliere premium addizionale che giustifica il rischio e il tempo extra. NON fare roll se: il trade thesis Ã¨ invalidato, stai solo "kicking the can down the road" senza piano, o il premium netto Ã¨ troppo basso.`},{title:"Come Calcolare se il Roll Conviene",content:"Per un roll vantaggioso valuta: 1) Credito netto ricevuto - devi ricevere piÃ¹ di quanto paghi per chiudere, 2) Tempo addizionale - ogni settimana extra che impegni vale? 3) Nuovo strike - sei ancora ok con quel prezzo? Formula: se ricevi >0.5% del capitale per settimana extra di impegno, il roll puÃ² valere la pena. Altrimenti meglio accettare assignment."},{title:"Roll Difensivo vs Aggressivo",content:"Roll DIFENSIVO: roll out mantenendo stesso strike, massimizza tempo per recovery. Roll AGGRESSIVO: roll down/up per raccogliere piÃ¹ premium, ma aumenta rischio. Esempio: put $45k in perdita, BTC a $42k. Difensivo: roll a 45 giorni strike $45k per +$600. Aggressivo: roll a 30 giorni strike $40k per +$1,200. Scegli basandoti su outlook e risk tolerance."}],questions:[{id:1,type:"multiple-choice",question:"Quando Ã¨ il momento migliore per fare un roll di una put venduta?",options:["Quando la posizione Ã¨ in profitto del 50%","Quando il prezzo di BTC scende vicino allo strike e vuoi evitare l'assegnazione","Solo alla scadenza","Mai, Ã¨ meglio accettare l'assegnazione"],correctAnswer:1,explanation:"Il momento ottimale per fare roll Ã¨ quando il prezzo si avvicina allo strike e vuoi evitare l'assegnazione, raccogliendo premium addizionale.",xp:100},{id:2,type:"multiple-choice",question:'Cosa significa "roll out"?',options:["Chiudere completamente la posizione","Spostare la scadenza a una data futura mantenendo lo stesso strike","Cambiare solo lo strike","Vendere piÃ¹ contratti"],correctAnswer:1,explanation:`"Roll out" significa spostare la scadenza dell'opzione a una data futura, mantenendo lo stesso strike price.`,xp:100},{id:3,type:"multiple-choice",question:"Se hai venduto una put a strike $40,000 e BTC Ã¨ ora a $38,000, quale strategia di roll Ã¨ piÃ¹ difensiva?",options:["Roll down a $38,000 con stessa scadenza","Roll out alla prossima scadenza mensile allo stesso strike","Roll down and out a $36,000 scadenza piÃ¹ lontana","Non fare nulla"],correctAnswer:1,explanation:"Roll out allo stesso strike Ã¨ piÃ¹ difensivo perchÃ© ti dÃ  piÃ¹ tempo per il recovery senza abbassare ulteriormente lo strike.",xp:150}]},10:{id:10,title:"VolatilitÃ  Implicita e IV Rank",description:"Padroneggia l'arte di vendere caro e comprare economico usando la volatilitÃ ",difficulty:"advanced",estimatedTime:"35 min",requiredLevel:9,sections:[{title:"Cos'Ã¨ la VolatilitÃ  Implicita",content:"La VolatilitÃ  Implicita (IV) Ã¨ l'aspettativa del mercato su quanto BTC si muoverÃ  in futuro. Alta IV = mercato si aspetta grandi movimenti = opzioni piÃ¹ costose. Bassa IV = mercato calmo = opzioni economiche. IV Ã¨ espressa in % annualizzata. Esempio: IV al 80% significa che il mercato si aspetta che BTC possa muoversi Â±80% nel prossimo anno."},{title:"IV Rank e IV Percentile",content:"IV Rank confronta l'IV attuale con il range degli ultimi 12 mesi. Formula: (IV attuale - IV min) / (IV max - IV min). Un IV Rank del 80% significa che l'IV Ã¨ nell'80Â° percentile dell'ultimo anno. REGOLA: Vendi opzioni quando IV Rank > 50-60%, compra quando < 30%. Questo ti assicura di vendere quando i premi sono alti."},{title:"Cicli di VolatilitÃ  su Bitcoin",content:'Bitcoin ha pattern di volatilitÃ  prevedibili: 1) IV schizza durante crash (panic selling), 2) IV si comprime durante range-bound, 3) IV aumenta prima di eventi macro (halving, decisioni Fed). La migliore opportunitÃ  per vendere put Ã¨ DOPO un crash quando IV Ã¨ ai massimi ma BTC sta stabilizzando. "Be greedy when others are fearful".'},{title:"IV Crush e Timing di Entrata",content:"IV Crush Ã¨ il crollo improvviso della volatilitÃ  dopo un evento. Esempio: BTC crasha, IV vola al 120%, vendi put, poi BTC stabilizza e IV crolla a 60% = le tue put perdono valore anche senza movimento di prezzo. Profitto facile! Evita invece di vendere durante low IV pre-evento, perchÃ© IV expansion ti andrebbe contro."}],questions:[{id:1,type:"multiple-choice",question:"Un IV Rank del 75% significa:",options:["Le opzioni sono al 75% del loro valore massimo","L'IV attuale Ã¨ piÃ¹ alta del 75% dei valori degli ultimi 12 mesi","Hai il 75% di probabilitÃ  di profitto","Il prezzo di BTC salirÃ  del 75%"],correctAnswer:1,explanation:"IV Rank 75% significa che la volatilitÃ  corrente Ã¨ piÃ¹ alta del 75% dei valori registrati nell'ultimo anno = momento ottimo per vendere.",xp:150},{id:2,type:"multiple-choice",question:"Quando Ã¨ il momento MIGLIORE per vendere put in termini di IV?",options:["Durante mercati calmi con IV al 20%","Subito dopo un crash quando IV Ã¨ schizzata al 100%+","Quando IV Ã¨ nella media storica","IV non influenza la strategia"],correctAnswer:1,explanation:"Dopo un crash l'IV Ã¨ altissima (paura), i premium sono gonfiati. Quando il panico si calma, IV crolla e tu profitti.",xp:150},{id:3,type:"multiple-choice",question:'Cosa puÃ² causare un "IV Crush"?',options:["BTC che sale del 50% in un mese","Stabilizzazione del mercato dopo forte volatilitÃ ","Announcement di halving","Aumento del volume di trading"],correctAnswer:1,explanation:"IV Crush avviene quando il mercato si stabilizza dopo periodo di alta volatilitÃ . L'incertezza diminuisce, quindi anche l'IV.",xp:200}]},11:{id:11,title:"Analisi Tecnica per la Wheel",description:"Usa supporti, resistenze e indicatori per selezionare strike ottimali",difficulty:"advanced",estimatedTime:"40 min",requiredLevel:10,sections:[{title:"Supporti e Resistenze per Strike Selection",content:"I livelli di supporto e resistenza sono fondamentali per scegliere strike intelligenti. SUPPORTO: livello di prezzo dove storicamente BTC ha trovato acquirenti. RESISTENZA: livello dove ha trovato venditori. Regola: vendi put con strike AI supporti maggiori, vendi call con strike ALLE resistenze maggiori. Questo aumenta le probabilitÃ  che le opzioni scadano OTM."},{title:"Indicatori di Momentum: RSI e MACD",content:"RSI (Relative Strength Index) misura se BTC Ã¨ ipercomprato (>70) o ipervenduto (<30). MACD mostra il trend e i cambiamenti di momentum. Per la Wheel: vendi put quando RSI<30 (oversold, probabile rimbalzo), vendi call quando RSI>70 (overbought, probabile correzione). Non vendere put con RSI>70 = rischi di vendere il top."},{title:"Volume Profile e Strike Liquidi",content:`Il Volume Profile mostra a quali prezzi si Ã¨ scambiato piÃ¹ volume. I "Point of Control" (POC) sono magneti di prezzo. Scegli strike vicini ai POC perchÃ© lÃ¬ c'Ã¨ piÃ¹ liquiditÃ  e il prezzo tende a gravitare. Evita strike in "low volume nodes" dove il prezzo tende a passare velocemente senza consolidare.`},{title:"Fibonacci Retracements",content:"I livelli di Fibonacci (0.236, 0.382, 0.5, 0.618, 0.786) sono livelli chiave dove BTC spesso rimbalza o inverte. Dopo un rally, BTC tipicamente ritracia al 0.5-0.618 prima di continuare. Vendi put con strike al Fib 0.618 di un rally = alta probabilitÃ  che reggano. Questo combina analisi tecnica con vendita di opzioni."}],questions:[{id:1,type:"multiple-choice",question:"Se BTC Ã¨ a $55k e ha forte supporto a $50k, dove Ã¨ meglio vendere una put?",options:["Strike $52k (poco sotto il prezzo)","Strike $50k (sul supporto)","Strike $45k (ben sotto il supporto)","Strike $60k (sopra il prezzo)"],correctAnswer:1,explanation:"Vendere put sul supporto maggiore ($50k) massimizza premium mantenendo buona probabilitÃ  che il livello tenga.",xp:150},{id:2,type:"multiple-choice",question:"Con RSI a 25 (oversold), quale strategia Ã¨ piÃ¹ intelligente?",options:["Vendere call (BTC probabilmente scenderÃ  ancora)","Vendere put (BTC probabilmente rimbalzerÃ )","Non fare nulla","Comprare put (protezione dal crash)"],correctAnswer:1,explanation:"RSI < 30 indica oversold, probabile rimbalzo. Vendere put in questo contesto ha alta probabilitÃ  di successo.",xp:150},{id:3,type:"multiple-choice",question:"Dopo un rally da $40k a $60k, BTC tipicamente ritracia a quale livello Fibonacci prima di continuare?",options:["Non ritracia mai","Fib 0.236 ($55.3k) - retracement superficiale","Fib 0.5-0.618 ($50k-$47.6k) - retracement sano","Fib 1.0 ($40k) - ritorna al punto di partenza"],correctAnswer:2,explanation:"I retracement al 50-61.8% sono piÃ¹ comuni e sani. Vendi put a quei livelli per strike ottimali.",xp:200}]},12:{id:12,title:"Tax Implications e Record Keeping",description:"Gestisci correttamente le tasse e la documentazione delle tue operazioni",difficulty:"intermediate",estimatedTime:"25 min",requiredLevel:10,sections:[{title:"Tassazione delle Opzioni",content:"Le opzioni crypto sono tassate come capital gains. Se vendi opzioni che scadono OTM, il premium Ã¨ reddito tassabile nell'anno fiscale. Se vieni assegnato, il premium modifica il costo base. Esempio: vendi put strike $40k per $1k, assegnato â†’ costo base = $39k. Se poi vendi BTC a $50k con call, gain = $50k - $39k = $11k (tassato)."},{title:"Short-Term vs Long-Term Capital Gains",content:"In molti paesi (es. USA): holding <1 anno = short-term gains (tassati come reddito ordinario, aliquota piÃ¹ alta), >1 anno = long-term gains (aliquota ridotta). La Wheel Strategy tipicamente genera short-term gains perchÃ© i cicli sono <1 anno. Considera questo nel calcolo del rendimento netto post-tasse."},{title:"Record Keeping Essenziale",content:"Devi tracciare per OGNI trade: 1) Data apertura/chiusura, 2) Strike, scadenza, tipo (put/call), 3) Premium ricevuto/pagato, 4) Assignment date e prezzo, 5) Roll details. Usa spreadsheet o software dedicato. In caso di audit, devi dimostrare ogni transazione. Non improvvisare, la corretta documentazione Ã¨ legge."},{title:"Wash Sale Rule e Ottimizzazione Fiscale",content:"Wash Sale Rule: se vendi BTC in perdita e ricompri entro 30 giorni, la perdita fiscale puÃ² essere negata. Per la Wheel questo Ã¨ rilevante se vendi BTC in perdita e poi vieni subito riassegnato con put. Strategia: tempo le operazioni per massimizzare le deduzioni fiscali e evitare wash sales. Consulta sempre un commercialista crypto."}],questions:[{id:1,type:"multiple-choice",question:"Se vendi una put per $1,000 che scade senza valore, come Ã¨ tassato?",options:["Non Ã¨ tassato","Come capital gain di $1,000","Come reddito ordinario","Solo se supera $10,000"],correctAnswer:1,explanation:"Il premium di opzioni vendute che scadono OTM Ã¨ tassato come short-term capital gain nell'anno fiscale.",xp:100},{id:2,type:"multiple-choice",question:"Vendi put strike $40k per $1k, vieni assegnato. Qual Ã¨ il tuo costo base in BTC?",options:["$40,000","$41,000","$39,000","$38,000"],correctAnswer:2,explanation:"Il costo base = strike - premium ricevuto = $40,000 - $1,000 = $39,000. Questo riduce la tua base imponibile futura.",xp:150},{id:3,type:"multiple-choice",question:"Quale documento Ã¨ ESSENZIALE tenere per ogni trade di opzioni?",options:["Solo il profitto/perdita finale","Niente, le piattaforme tracciano tutto","Data, strike, premium, assignment details completi","Solo le transazioni >$10,000"],correctAnswer:2,explanation:"Devi documentare OGNI dettaglio per conformitÃ  fiscale. Non fare affidamento solo sulle piattaforme.",xp:150}]},13:{id:13,title:"Piattaforme e Tools per Options Trading",description:"Scopri dove e come fare trading di opzioni Bitcoin in modo sicuro ed efficiente",difficulty:"intermediate",estimatedTime:"30 min",requiredLevel:11,sections:[{title:"Exchange Principali per BTC Options",content:"I principali exchange per opzioni Bitcoin: 1) DERIBIT - leader, alta liquiditÃ , opzioni cash-settled, 2) CME - exchange regolamentato US, opzioni futures-based, 3) BINANCE - opzioni semplificate, buone per beginners, 4) OKX - buona liquiditÃ , interfaccia user-friendly. Scegli basandoti su: liquiditÃ , regolamentazione, fee, e se vuoi opzioni cash-settled o physical delivery."},{title:"LiquiditÃ  e Spreads",content:"LiquiditÃ  Ã¨ critica! Controlla sempre: 1) Bid-Ask spread - se troppo largo, perdi in entrata/uscita, 2) Open Interest - quante opzioni sono aperte a quello strike, 3) Volume - quanto si scambia. Su Deribit gli strike ATM e vicini hanno buona liquiditÃ . Strike molto OTM possono avere spread del 10-20%, evitali. Target: spread <2-3% del premium."},{title:"Tools di Analisi Essenziali",content:"Per analizzare opzioni usa: 1) OPTION PRICING CALCULATOR - per calcolare fair value e greeks, 2) IV RANK CHARTS - per vedere se IV Ã¨ alta o bassa storicamente (Deribit metrics), 3) PROFIT/LOSS DIAGRAMS - visualizza payoff a scadenza, 4) PORTFOLIO GREEKS - monitora delta, theta, vega totali. Molti exchange offrono questi tools integrati."},{title:"Sicurezza e Custody",content:"Per la Wheel devi tenere collaterale sull'exchange. Rischio: hack o fallimento exchange. Mitigazione: 1) Usa exchange tier-1 con buona storia di sicurezza, 2) Abilita 2FA e whitelist withdrawal, 3) Non tenere piÃ¹ del necessario on-exchange, 4) Considera di diversificare su 2 exchange. Il capitale non impegnato va in cold storage."}],questions:[{id:1,type:"multiple-choice",question:"Quale exchange Ã¨ considerato leader per opzioni Bitcoin?",options:["Coinbase","Kraken","Deribit","Binance Spot"],correctAnswer:2,explanation:"Deribit Ã¨ l'exchange con maggiore liquiditÃ  e volume per opzioni Bitcoin, preferito dai trader professionisti.",xp:100},{id:2,type:"multiple-choice",question:"Quale bid-ask spread Ã¨ accettabile per un trade di opzioni?",options:["20-30% del premium","10-15% del premium","2-5% del premium","Lo spread non importa"],correctAnswer:2,explanation:"Uno spread del 2-5% Ã¨ accettabile. Spreads piÃ¹ larghi erodono significativamente i profitti, specialmente su trade frequenti.",xp:150},{id:3,type:"multiple-choice",question:"Dove dovresti tenere il capitale NON impegnato in posizioni attive?",options:["Tutto sull'exchange per facilitÃ ","In un hot wallet per accesso veloce","In cold storage (hardware wallet)","In stablecoin su exchange"],correctAnswer:2,explanation:"Il capitale non in uso dovrebbe essere in cold storage per massima sicurezza. Solo il collaterale necessario resta on-exchange.",xp:150}]},14:{id:14,title:"Psicologia del Trading e Discipline",description:"Padroneggia la mente: gestisci emozioni, bias cognitivi e mantieni la disciplina",difficulty:"intermediate",estimatedTime:"35 min",requiredLevel:12,sections:[{title:"I Bias Cognitivi PiÃ¹ Pericolosi",content:"BIAS PRINCIPALI: 1) FOMO (Fear Of Missing Out) - vendere put/call quando dovresti stare fermo, 2) Loss Aversion - tenere posizioni perdenti troppo a lungo sperando in recovery, 3) Recency Bias - dare troppo peso agli eventi recenti, 4) Overconfidence - aumentare size dopo winning streak. Riconoscere questi bias Ã¨ il primo passo per controllarli."},{title:"Il Trading Journal",content:"Un journal non Ã¨ solo per tracciare P&L, ma per capire i tuoi pattern emotivi. Registra: 1) Setup del trade (perchÃ© sei entrato), 2) Stato emotivo PRE trade (calmo? ansioso? FOMO?), 3) Esecuzione (hai seguito il piano?), 4) Risultato + lezione. Rivedi il journal settimanalmente. Spesso scoprirai che i trade peggiori sono quelli emotivi."},{title:"Gestione dello Stress e Burnout",content:'La Wheel Ã¨ una strategia a lungo termine, non un sprint. Per sostenibilitÃ : 1) NON checkare i prezzi ogni ora, 2) Imposta alert ai livelli chiave, poi dimenticati, 3) Prendi break regolari - un giorno/settimana zero trading, 4) Non over-leverage mai, lo stress non vale il gain extra. "Il mercato sarÃ  qui domani, ma tu devi essere mentalmente sano per tradarlo".'},{title:"Disciplina e Checklist Pre-Trade",content:`Prima di OGNI trade, passa questa checklist: â˜ IV Rank > 50%? â˜ Strike ai livelli tecnici chiave? â˜ Position size < 2% risk? â˜ Ho cash buffer? â˜ Sono emotivamente neutrale? â˜ Questo trade fa parte del mio piano? Se anche una sola risposta Ã¨ "no", NON tradare. La disciplina ti salva dai peggiori errori, l'impulso ti distrugge.`}],questions:[{id:1,type:"multiple-choice",question:"Quale bias ti porta a tenere posizioni perdenti troppo a lungo sperando che si riprendano?",options:["FOMO (Fear of Missing Out)","Loss Aversion","Recency Bias","Overconfidence"],correctAnswer:1,explanation:"Loss Aversion Ã¨ la tendenza a evitare di realizzare perdite, tenendo posizioni perdenti troppo a lungo invece di tagliare le perdite.",xp:100},{id:2,type:"multiple-choice",question:"Cosa dovrebbe contenere un trading journal oltre a P&L?",options:["Solo i trade vincenti","Solo i numeri finanziari","Setup del trade, stato emotivo, esecuzione, e lezioni apprese","Niente, basta guardare il conto"],correctAnswer:2,explanation:"Un journal completo traccia emozioni e decision-making, non solo risultati. Questo ti aiuta a identificare e correggere pattern emotivi.",xp:150},{id:3,type:"multiple-choice",question:"Quale elemento NON dovrebbe essere in una pre-trade checklist?",options:["IV Rank sopra 50%","Position size entro limiti","Previsione che BTC salirÃ  sicuramente","Strike ai livelli tecnici"],correctAnswer:2,explanation:'Non si puÃ² mai essere "sicuri" della direzione. La checklist deve basarsi su probabilitÃ , risk management, e regole obiettive.',xp:150}]},15:{id:15,title:"Master Strategies e Ottimizzazioni",description:"Tecniche avanzate per massimizzare rendimenti: ratio spreads, calendars, e hybrid strategies",difficulty:"advanced",estimatedTime:"45 min",requiredLevel:13,sections:[{title:"Double Wheel Strategy",content:"La Double Wheel Ã¨ un'evoluzione: invece di vendere 1 put, ne vendi 2 a strike diversi. Esempio: $100k capitale, BTC a $50k. Vendi put $48k per $800 E put $45k per $400. Se BTC scende, vieni assegnato a $48k (ok, Ã¨ il primo), la put $45k scade = incassi entrambi i premium. Se crasha, vieni assegnato a entrambi = medii il costo. PiÃ¹ complesso ma piÃ¹ premium."},{title:"Calendar Spreads per Extra Juice",content:"Calendar Spread: vendi put short-dated (30 giorni) e compri put long-dated (90 giorni) STESSO strike. Esempio: vendi put $45k a 30gg per $900, compri put $45k a 90gg per $1,200. Net: -$300. Dopo 30 giorni la short scade, hai solo la long put come protezione. Beneficio: riduci costo della protezione verso il basso grazie al premium raccolto."},{title:"Hybrid Wheel + DCA Strategy",content:"Combina Wheel con Dollar Cost Averaging: alloca 70% del capitale alla Wheel, 30% a DCA mensile in spot BTC. Esempio: $100k â†’ $70k Wheel, $30k = $2.5k/mese DCA. La Wheel genera income, il DCA accumula spot per ridurre il costo medio. In bull market il DCA offre upside illimitato che la Wheel limita. Best of both worlds."},{title:"Wheel in Different Market Regimes",content:"BEAR MARKET: agggressivo su put (strike piÃ¹ bassi, piÃ¹ premium), conservativo su call (evita di vendere spot). BULL MARKET: conservativo su put (strike molto bassi, safety first), aggressivo su call (raccogli premium al rialzo). SIDEWAYS: ideale per Wheel standard, massimizza theta decay. Adatta la strategia al regime corrente, non usare sempre lo stesso approccio."}],questions:[{id:1,type:"multiple-choice",question:"Nella Double Wheel Strategy, quale Ã¨ il vantaggio principale?",options:["Elimina completamente il rischio","Raccogli piÃ¹ premium totale e medii costi se assegnato multiplo","Non richiede capitale","Garantisce profitti in ogni scenario"],correctAnswer:1,explanation:"Vendere put a strike multipli aumenta il premium totale e, se assegnato multiplo, medii il costo di acquisto BTC.",xp:150},{id:2,type:"multiple-choice",question:"Un Calendar Spread con opzioni put serve principalmente a:",options:["Massimizzare il premium senza protezione","Ridurre il costo della protezione verso il basso","Eliminare theta decay","Aumentare delta exposure"],correctAnswer:1,explanation:"Vendendo la put short-term raccogli premium che riduce il costo della put long-term di protezione.",xp:200},{id:3,type:"multiple-choice",question:"In quale regime di mercato la Wheel Strategy performa MEGLIO?",options:["Strong bull market con +300% in pochi mesi","Crash violento -80%","Mercato sideways o moderatamente volatile","Performa uguale sempre"],correctAnswer:2,explanation:"La Wheel Ã¨ ottimale in mercati range-bound dove il theta decay lavora a tuo favore senza movimenti estremi che invalidano la strategia.",xp:200}]}};function ms({onNavigate:t,lessonId:a=9}){const i=Le[a];if(!i)return e.jsx("div",{className:"min-h-screen md:pl-20 pb-24 md:pb-0 bg-gray-50 flex items-center justify-center",children:e.jsxs(k,{className:"p-8 text-center",children:[e.jsx("h2",{className:"text-gray-900 mb-4",children:"Lezione non trovata"}),e.jsxs("p",{className:"text-gray-600 mb-6",children:["La lezione #",a," non Ã¨ ancora disponibile."]}),e.jsx(N,{onClick:()=>t("home"),className:"bg-blue-600 hover:bg-blue-700",children:"Torna alla Home"})]})});const n={title:i.title,description:i.description,sections:i.sections},s=i.questions,[m,r]=o.useState(null),{addXP:l,completeLesson:c}=ze(),{triggers:d,triggerXPGain:h,triggerQuizFeedback:b,dismissQuizFeedback:p}=ds(),{generateAIQuestion:x,recordAnswer:g,shouldReviewLesson:v,getAIFeedback:P,resetPerformance:z,performance:j,isGenerating:y}=rs(),{setActivity:w}=ra(),[L,_]=o.useState(0),[H,B]=o.useState(!1),[J,de]=o.useState(0),[te,fe]=o.useState(""),[ee,me]=o.useState(!1),[ue,ye]=o.useState(!1),[q,D]=o.useState([]),[ne,ie]=o.useState(!1),[ve,Se]=o.useState(!0),[se,pe]=o.useState(0),[f,S]=o.useState(0),[T,E]=o.useState(!1),[I,F]=o.useState([]),[_e,Y]=o.useState([]),[lt,zt]=o.useState([]),[fa,ct]=o.useState(!1),[va,ja]=o.useState(""),[dt,St]=o.useState(!1),Be=n.sections.length,Oe=I.length;o.useEffect(()=>{w("lesson_start",4e3)},[a,w]),o.useEffect(()=>{if(H&&I.length===0){const X=[...s].sort(()=>Math.random()-.5);F(X),Y(X),z(),C.success("Quiz iniziato! Domande randomizzate ðŸŽ²")}},[H,s,I.length,z]);const ya=()=>{L<Be-1?_(L+1):(B(!0),w("quiz_start",4e3))},wa=()=>{L>0&&_(L-1)},Ct=async()=>{C.loading("Generando nuova domanda AI...",{id:"ai-gen"});const X=n.sections.map(oe=>`${oe.title}: ${oe.content}`).join(`

`),V=await x(a,n.title,X,j.difficultyLevel);V?(F(oe=>[...oe,V]),C.success(`Nuova domanda ${j.difficultyLevel.toUpperCase()} generata! ðŸ¤–`,{id:"ai-gen"})):C.error("Errore generazione domanda AI",{id:"ai-gen"})},Na=async()=>{const X=I[J],V=te===String(X.correctAnswer);if(g(V,n.title),ye(V),me(!0),b(V),w(V?"quiz_correct":"quiz_wrong",3e3),V){const oe=ve?50:0,mt=X.xp+oe;pe(mt),l(mt),setTimeout(()=>{h(mt)},1100),ve&&j.correctAnswers%2===0&&j.correctAnswers>0&&Ct()}else{if(Se(!1),S(f+1),zt(oe=>[...oe,X.question]),v()){ct(!0),St(!0);const oe=await P(n.title,lt);ja(oe),St(!1)}f>=2&&E(!0)}},ka=async()=>{if(D([...q,J]),me(!1),fe(""),Se(!0),pe(0),S(0),E(!1),J<Oe-1)de(J+1);else{ie(!0);const X=await c(a);if(l(250),h(250),w("lesson_complete",5e3),X){const V=ns(X);V.length>0&&(r(V[0]),setTimeout(()=>{w("badge_unlock",5e3)},1e3))}}};if(ne)return e.jsxs("div",{className:"min-h-screen md:pl-20 pb-24 md:pb-0 flex items-center justify-center bg-gray-50 p-4",children:[e.jsx(ce,{currentView:"lesson",onNavigate:t}),e.jsxs(k,{className:"max-w-2xl w-full p-8 md:p-12 text-center",children:[e.jsx("div",{className:"w-20 h-20 md:w-24 md:h-24 bg-gradient-to-br from-yellow-400 to-orange-500 rounded-full flex items-center justify-center mx-auto mb-6",children:e.jsx(G,{className:"w-10 h-10 md:w-12 md:h-12 text-white"})}),e.jsx("h1",{className:"text-gray-900 mb-4",children:"Complimenti! ðŸŽ‰"}),e.jsxs("p",{className:"text-gray-700 mb-8",children:['Hai completato la lezione "',n.title,'"']}),e.jsxs("div",{className:"bg-gradient-to-r from-blue-50 to-orange-50 rounded-lg p-6 mb-8",children:[e.jsx("p",{className:"text-gray-900 mb-2 font-semibold",children:"XP Totale Guadagnato"}),e.jsxs("p",{className:"text-blue-600 font-bold",children:["+",I.reduce((X,V)=>X+V.xp,0)+250]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:[e.jsx(N,{onClick:()=>t("home"),className:"bg-blue-600 hover:bg-blue-700 h-12",children:"Torna alla Home"}),e.jsx(N,{onClick:()=>t("simulation"),variant:"outline",className:"h-12",children:"Prova la Simulazione"})]})]})]});if(!H)return e.jsxs("div",{className:"min-h-screen md:pl-20 pb-24 md:pb-0 bg-gray-50",children:[e.jsx(ce,{currentView:"lesson",onNavigate:t}),e.jsx("header",{className:"bg-white border-b border-gray-200 px-4 py-4 md:px-6 sticky top-0 z-30 safe-area-top",children:e.jsxs("div",{className:"max-w-4xl mx-auto",children:[e.jsxs("div",{className:"flex items-center gap-3 md:gap-4 mb-4",children:[e.jsxs(N,{variant:"ghost",onClick:()=>t("home"),size:"sm",className:"h-10",children:[e.jsx(Ye,{className:"w-5 h-5 md:w-4 md:h-4 mr-2"}),e.jsx("span",{className:"hidden md:inline",children:"Indietro"})]}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h2",{className:"text-gray-900 truncate",children:n.title}),e.jsx("p",{className:"text-gray-600 hidden md:block truncate",children:n.description})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between text-gray-600",children:[e.jsxs("span",{children:["Sezione ",L+1," di ",Be]}),e.jsxs("span",{className:"font-semibold",children:[Math.round((L+1)/Be*100),"%"]})]}),e.jsx(he,{value:(L+1)/Be*100,className:"h-3"})]})]})}),e.jsxs("main",{className:"max-w-4xl mx-auto px-4 py-5 md:px-6 md:py-8",children:[e.jsxs(k,{className:"p-5 md:p-8 mb-5 md:mb-6",children:[e.jsx("h2",{className:"text-gray-900 mb-4",children:n.sections[L].title}),e.jsx("p",{className:"text-gray-700 leading-relaxed whitespace-pre-line",children:n.sections[L].content})]}),e.jsxs("div",{className:"flex justify-between gap-3",children:[e.jsxs(N,{variant:"outline",onClick:wa,disabled:L===0,className:"h-12 px-5",children:[e.jsx(Ye,{className:"w-5 h-5 mr-2"}),e.jsx("span",{className:"hidden sm:inline",children:"Precedente"})]}),e.jsxs(N,{onClick:ya,className:"bg-blue-600 hover:bg-blue-700 h-12 px-5 flex-1 max-w-xs",children:[L===Be-1?"Inizia Quiz":"Successivo",e.jsx(je,{className:"w-5 h-5 ml-2"})]})]})]}),e.jsx(qt,{amount:se,trigger:d.xpGain}),e.jsx(_t,{isCorrect:d.quizFeedback.isCorrect,show:d.quizFeedback.show,onDismiss:p}),e.jsx(Ot,{badgeId:m,onClose:()=>r(null)})]});const Ce=I[J];return Ce?e.jsxs("div",{className:"min-h-screen md:pl-20 pb-24 md:pb-0 bg-gray-50",children:[e.jsx(ce,{currentView:"lesson",onNavigate:t}),e.jsx("header",{className:"bg-gradient-to-r from-blue-600 to-purple-600 text-white px-4 py-5 md:px-6 md:py-6 sticky top-0 z-30 safe-area-top",children:e.jsxs("div",{className:"max-w-4xl mx-auto",children:[e.jsxs("h2",{className:"text-white mb-4 truncate",children:["Quiz: ",n.title]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between text-blue-100",children:[e.jsxs("span",{children:["Domanda ",J+1," di ",Oe]}),e.jsxs("span",{className:"font-semibold",children:[Math.round((J+1)/Oe*100),"%"]})]}),e.jsx(he,{value:(J+1)/Oe*100,className:"h-3 bg-white/20"}),e.jsxs("div",{className:"flex items-center gap-2 pt-1",children:[e.jsx("span",{className:"text-xs text-blue-100",children:"DifficoltÃ :"}),e.jsx("span",{className:`text-xs px-2 py-1 rounded-full font-semibold ${j.difficultyLevel==="easy"?"bg-green-500 text-white":j.difficultyLevel==="medium"?"bg-yellow-500 text-gray-900":"bg-red-500 text-white"}`,children:j.difficultyLevel.toUpperCase()}),e.jsxs("span",{className:"text-xs text-blue-100 ml-2",children:["âœ“ ",j.correctAnswers," | âœ— ",j.wrongAnswers]}),y&&e.jsx("span",{className:"text-xs text-yellow-300 ml-auto animate-pulse",children:"ðŸ¤– Generando AI..."})]})]})]})}),e.jsx("main",{className:"max-w-4xl mx-auto px-4 py-5 md:px-6 md:py-8",children:e.jsxs(k,{className:"p-5 md:p-8",children:[e.jsx("div",{className:"mb-6 md:mb-8",children:e.jsx("p",{className:"text-gray-900 mb-6 leading-relaxed",children:Ce.question})}),e.jsx(Pe,{value:te,onValueChange:fe,children:e.jsx("div",{className:"space-y-3",children:Ce.options?.map((X,V)=>e.jsxs("div",{className:`flex items-start space-x-3 p-4 rounded-lg border-2 transition-all min-h-[60px] ${ee&&String(V)===String(Ce.correctAnswer)?"border-green-500 bg-green-50":ee&&te===String(V)&&!ue?"border-red-500 bg-red-50":te===String(V)?"border-blue-500 bg-blue-50":"border-gray-200 hover:border-blue-300"}`,children:[e.jsx(W,{value:String(V),id:`option-${V}`,disabled:ee,className:"mt-1"}),e.jsx(R,{htmlFor:`option-${V}`,className:"flex-1 cursor-pointer leading-relaxed",children:X}),ee&&String(V)===String(Ce.correctAnswer)&&e.jsx(Q,{className:"w-6 h-6 text-green-600 flex-shrink-0"}),ee&&te===String(V)&&!ue&&e.jsx(Z,{className:"w-6 h-6 text-red-600 flex-shrink-0"})]},V))})}),ee&&e.jsxs("div",{className:`mt-6 p-4 rounded-lg ${ue?"bg-green-50 border-2 border-green-200":"bg-orange-50 border-2 border-orange-200"}`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("p",{className:"text-gray-900 font-semibold",children:ue?"âœ“ Corretto!":"âœ— Risposta errata"}),ue&&ve&&e.jsxs("span",{className:"text-blue-600 font-semibold",children:["+",se," XP"]})]}),e.jsx("p",{className:"text-gray-700 leading-relaxed",children:Ce.explanation}),ue&&ve&&e.jsx("p",{className:"text-sm text-blue-600 mt-2",children:"ðŸŽ‰ Bonus primo tentativo: +50 XP"})]}),e.jsx("div",{className:"mt-8",children:ee?e.jsxs(N,{onClick:ka,className:"w-full bg-blue-600 hover:bg-blue-700 h-12",children:[J<Oe-1?"Prossima Domanda":"Completa Lezione",e.jsx(je,{className:"w-5 h-5 ml-2"})]}):e.jsx(N,{onClick:Na,disabled:!te,className:"w-full bg-blue-600 hover:bg-blue-700 h-12",children:"Verifica Risposta"})})]})}),fa&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:e.jsxs(k,{className:"max-w-md w-full p-6 bg-orange-50 border-2 border-orange-300 shadow-2xl",children:[e.jsxs("div",{className:"flex items-start gap-3 mb-4",children:[e.jsx(Je,{className:"w-6 h-6 text-orange-600 flex-shrink-0 mt-1"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-gray-900 mb-2",children:"Forse dovresti rivedere la lezione ðŸ“š"}),dt?e.jsxs("div",{className:"flex items-center gap-2 text-gray-600",children:[e.jsx("div",{className:"w-4 h-4 border-2 border-orange-500 border-t-transparent rounded-full animate-spin"}),e.jsx("p",{children:"Prof Satoshi sta analizzando le tue risposte..."})]}):e.jsx("p",{className:"text-gray-700 leading-relaxed whitespace-pre-wrap",children:va})]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 mt-6",children:[e.jsxs(N,{onClick:()=>{B(!1),_(0),de(0),ct(!1),zt([]),z(),C.success("Rivediamo insieme la lezione! ðŸ“–")},className:"flex-1 bg-orange-600 hover:bg-orange-700",disabled:dt,children:[e.jsx(rt,{className:"w-4 h-4 mr-2"}),"Rivedi Lezione"]}),e.jsx(N,{onClick:()=>{ct(!1),C.info("Continua il quiz, ma fai attenzione! ðŸ’ª")},variant:"outline",className:"flex-1 border-orange-300 hover:bg-orange-100",disabled:dt,children:"Continua Quiz"})]}),e.jsx("p",{className:"text-xs text-gray-500 mt-4 text-center",children:"ðŸ’¡ Rivedere la lezione ti aiuterÃ  a comprendere meglio i concetti"})]})}),e.jsx(qt,{amount:se,trigger:d.xpGain}),e.jsx(_t,{isCorrect:d.quizFeedback.isCorrect,show:d.quizFeedback.show,onDismiss:p}),e.jsx(Ot,{badgeId:m,onClose:()=>r(null)}),e.jsx(cs,{performance:j,isGenerating:y,onGenerateTest:Ct})]}):e.jsxs("div",{className:"min-h-screen md:pl-20 pb-24 md:pb-0 bg-gray-50 flex items-center justify-center",children:[e.jsx(ce,{currentView:"lesson",onNavigate:t}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-16 h-16 border-4 border-blue-600 border-t-transparent rounded-full animate-spin mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:"Caricamento quiz..."})]})]})}const us={beginner:"bg-green-100 text-green-800",intermediate:"bg-yellow-100 text-yellow-800",advanced:"bg-red-100 text-red-800"},ps={beginner:"Principiante",intermediate:"Intermedio",advanced:"Avanzato"};function xs({onNavigate:t}){const{progress:a}=ze(),i=Object.keys(Le).length,n=a.completedLessons.length,s=n/i*100,m=r=>{const l=Le[r];a.level<l.requiredLevel||t("lesson",r)};return e.jsxs("div",{className:"min-h-screen md:pl-20 pb-24 md:pb-0 bg-gray-50",children:[e.jsx(ce,{currentView:"home",onNavigate:r=>t(r)}),e.jsx("header",{className:"bg-gradient-to-r from-blue-600 to-purple-600 text-white px-4 py-8 md:px-6",children:e.jsxs("div",{className:"max-w-4xl mx-auto",children:[e.jsx("h1",{className:"text-white mb-2",children:"ðŸ“š Percorso Formativo"}),e.jsx("p",{className:"text-blue-100 mb-6",children:"Impara la Bitcoin Wheel Strategy passo dopo passo"}),e.jsxs(k,{className:"bg-white/10 backdrop-blur-sm border-white/20 p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-white",children:"Progresso Totale"}),e.jsxs("span",{className:"text-white",children:[n,"/",i," Lezioni"]})]}),e.jsx(he,{value:s,className:"h-3 bg-white/20"}),e.jsx("p",{className:"text-blue-100 text-sm mt-2",children:s===100?"ðŸŽ‰ Hai completato tutte le lezioni!":`Ancora ${i-n} lezioni da completare`})]})]})}),e.jsxs("main",{className:"max-w-6xl mx-auto px-4 py-6 md:px-6 md:py-8",children:[e.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-4 md:gap-6",children:Object.values(Le).map(r=>{const l=a.completedLessons.includes(r.id),c=a.level<r.requiredLevel;return e.jsxs(k,{className:`p-5 transition-all cursor-pointer ${c?"opacity-60 cursor-not-allowed bg-gray-100":"hover:shadow-lg hover:-translate-y-1"} ${l?"border-green-500 border-2":""}`,onClick:()=>m(r.id),children:[e.jsx("div",{className:"flex items-start justify-between mb-3",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center ${l?"bg-green-500 text-white":c?"bg-gray-300 text-gray-600":"bg-blue-600 text-white"}`,children:l?e.jsx(It,{className:"w-5 h-5"}):c?e.jsx(we,{className:"w-5 h-5"}):e.jsx("span",{className:"font-bold",children:r.id})}),e.jsx(O,{className:us[r.difficulty],children:ps[r.difficulty]})]})}),e.jsx("h3",{className:"text-gray-900 mb-2 line-clamp-2 min-h-[3.5rem]",children:r.title}),e.jsx("p",{className:"text-gray-600 text-sm mb-4 line-clamp-3 min-h-[4rem]",children:r.description}),e.jsxs("div",{className:"flex items-center gap-4 text-sm text-gray-500 mb-4",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(st,{className:"w-4 h-4"}),e.jsx("span",{children:r.estimatedTime})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(Ba,{className:"w-4 h-4"}),e.jsxs("span",{children:[r.questions.length," Quiz"]})]})]}),c?e.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[e.jsx(we,{className:"w-4 h-4"}),e.jsxs("span",{children:["Livello ",r.requiredLevel," richiesto"]})]}):l?e.jsxs("div",{className:"flex items-center gap-2 text-sm text-green-600",children:[e.jsx(It,{className:"w-4 h-4"}),e.jsx("span",{children:"Completata"})]}):e.jsx(N,{className:"w-full bg-blue-600 hover:bg-blue-700",onClick:d=>{d.stopPropagation(),m(r.id)},children:"Inizia Lezione"})]},r.id)})}),e.jsx(k,{className:"mt-8 p-6 bg-gradient-to-r from-blue-50 to-purple-50 border-blue-200",children:e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:"w-12 h-12 bg-blue-600 rounded-full flex items-center justify-center flex-shrink-0",children:e.jsx(K,{className:"w-6 h-6 text-white"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-gray-900 mb-2",children:"ðŸ“ˆ Percorso di Apprendimento Progressivo"}),e.jsx("p",{className:"text-gray-700 mb-3",children:"Ogni lezione sblocca nuovi contenuti. Completa le lezioni in ordine per massimizzare la comprensione e guadagnare XP per salire di livello!"}),e.jsxs("div",{className:"bg-white/60 rounded-lg p-3 text-sm space-y-1",children:[e.jsxs("p",{className:"text-gray-700",children:["âœ… ",e.jsxs("strong",{children:["Livello ",a.level]})," attuale â€¢ ",a.xp," XP"]}),e.jsxs("p",{className:"text-gray-600",children:["ðŸ”“ Hai accesso a ",Object.values(Le).filter(r=>r.requiredLevel<=a.level).length," lezioni"]}),e.jsxs("p",{className:"text-gray-600",children:["ðŸ”’ ",Object.values(Le).filter(r=>r.requiredLevel>a.level).length," lezioni ancora da sbloccare"]})]})]})]})})]})]})}function da({className:t,...a}){return e.jsx(Oa,{"data-slot":"tabs",className:A("flex flex-col gap-2",t),...a})}function ma({className:t,...a}){return e.jsx(Ma,{"data-slot":"tabs-list",className:A("bg-muted text-muted-foreground inline-flex h-9 w-fit items-center justify-center rounded-xl p-[3px] flex",t),...a})}function ft({className:t,...a}){return e.jsx(Ra,{"data-slot":"tabs-trigger",className:A("data-[state=active]:bg-card dark:data-[state=active]:text-foreground focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:outline-ring dark:data-[state=active]:border-input dark:data-[state=active]:bg-input/30 text-foreground dark:text-muted-foreground inline-flex h-[calc(100%-1px)] flex-1 items-center justify-center gap-1.5 rounded-xl border border-transparent px-2 py-1 text-sm font-medium whitespace-nowrap transition-[color,box-shadow] focus-visible:ring-[3px] focus-visible:outline-1 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",t),...a})}function vt({className:t,...a}){return e.jsx(Va,{"data-slot":"tabs-content",className:A("flex-1 outline-none",t),...a})}function ua({title:t,description:a,url:i="https://btcwheel.io",hashtags:n=["btcwheel","bitcoin","trading"],className:s=""}){const m=r=>{const l=`${t}

${a}`;switch(r){case"twitter":window.open(`https://twitter.com/intent/tweet?text=${encodeURIComponent(l)}&url=${encodeURIComponent(i)}&hashtags=${n.join(",")}`,"_blank");break;case"linkedin":window.open(`https://www.linkedin.com/sharing/share-offsite/?url=${encodeURIComponent(i)}`,"_blank");break;case"copy":navigator.clipboard.writeText(`${l}

${i}`),C.success("Link copiato negli appunti!");break}};return e.jsxs("div",{className:`flex gap-2 ${s}`,children:[e.jsx(N,{variant:"outline",size:"icon",onClick:()=>m("twitter"),title:"Condividi su X (Twitter)",className:"text-black hover:text-black hover:bg-gray-100 border-gray-200",children:e.jsx(Da,{className:"w-4 h-4"})}),e.jsx(N,{variant:"outline",size:"icon",onClick:()=>m("linkedin"),title:"Condividi su LinkedIn",className:"text-blue-700 hover:text-blue-800 hover:bg-blue-50 border-blue-200",children:e.jsx(Fa,{className:"w-4 h-4"})}),e.jsx(N,{variant:"outline",size:"icon",onClick:()=>m("copy"),title:"Copia Link",className:"text-gray-600 hover:text-gray-900 hover:bg-gray-100 border-gray-200",children:e.jsx(Ua,{className:"w-4 h-4"})})]})}function hs({onNavigate:t}){const{progress:a}=ze(),[i,n]=o.useState("all"),s={completedLessons:a.completedLessons,xp:a.xp,streak:a.streak,level:a.level,perfectQuizzes:a.perfectQuizzes||0,profitableSimulations:a.profitableSimulations||0,unlockedBadges:a.badges||[]},m=Object.values(ot),r=i==="all"?m:m.filter(g=>g.category===i),l=r.filter(g=>s.unlockedBadges.includes(g.id)).length,c=r.length,d=l/c*100,h=os(s),b=[{id:"all",label:"Tutti",icon:G},{id:"learning",label:"Apprendimento",icon:U},{id:"achievement",label:"Achievement",icon:K},{id:"streak",label:"Streak",icon:G},{id:"trading",label:"Trading",icon:K},{id:"mastery",label:"Mastery",icon:G}],p=g=>{const v=g.requirement;switch(v.type){case"lessons_completed":return Math.min(a.completedLessons.length/v.value*100,100);case"xp_earned":return Math.min(a.xp/v.value*100,100);case"streak_days":return Math.min(a.streak/v.value*100,100);case"level_reached":return Math.min(a.level/v.value*100,100);case"quiz_perfect":return Math.min((a.perfectQuizzes||0)/v.value*100,100);case"simulation_profit":return Math.min((a.profitableSimulations||0)/v.value*100,100);default:return 0}},x=g=>{switch(g.requirement.type){case"lessons_completed":return a.completedLessons.length;case"xp_earned":return a.xp;case"streak_days":return a.streak;case"level_reached":return a.level;case"quiz_perfect":return a.perfectQuizzes||0;case"simulation_profit":return a.profitableSimulations||0;default:return 0}};return e.jsxs("div",{className:"min-h-screen md:pl-20 pb-24 md:pb-0 bg-gray-50",children:[e.jsx(ce,{currentView:"home",onNavigate:t}),e.jsx("header",{className:"bg-gradient-to-r from-purple-600 to-pink-600 text-white px-4 py-8 md:px-6",children:e.jsxs("div",{className:"max-w-6xl mx-auto",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx(G,{className:"w-8 h-8"}),e.jsx("h1",{className:"text-white",children:"ðŸ† I Tuoi Badge"})]}),e.jsx("p",{className:"text-purple-100 mb-6",children:"Colleziona badge completando lezioni, mantenendo streak e padroneggiando la Wheel Strategy!"}),e.jsxs(k,{className:"bg-white/10 backdrop-blur-sm border-white/20 p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-white",children:"Collezione Badge"}),e.jsxs("span",{className:"text-white",children:[l,"/",c]})]}),e.jsx(he,{value:d,className:"h-3 bg-white/20"}),e.jsx("p",{className:"text-purple-100 text-sm mt-2",children:d===100?"ðŸŽ‰ Collezione completa! Sei una leggenda!":`Ancora ${c-l} badge da sbloccare`})]}),h&&e.jsx(k,{className:"mt-4 bg-gradient-to-r from-yellow-500/20 to-orange-500/20 backdrop-blur-sm border-yellow-400/30 p-4",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"text-3xl",children:h.icon}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-white mb-1",children:"ðŸŽ¯ Prossimo Badge"}),e.jsx("p",{className:"text-white/90 mb-2",children:h.name}),e.jsx("p",{className:"text-sm text-white/70 mb-2",children:h.requirement.description}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(he,{value:p(h),className:"h-2 flex-1 bg-white/20"}),e.jsxs("span",{className:"text-xs text-white/90",children:[x(h),"/",h.requirement.value]})]})]})]})})]})}),e.jsxs("div",{className:"max-w-6xl mx-auto px-4 py-6 md:px-6",children:[e.jsxs(da,{defaultValue:"all",className:"w-full",children:[e.jsx(ma,{className:"w-full justify-start overflow-x-auto flex-nowrap mb-6",children:b.map(g=>e.jsxs(ft,{value:g.id,onClick:()=>n(g.id),className:"whitespace-nowrap",children:[e.jsx(g.icon,{className:"w-4 h-4 mr-2"}),g.label]},g.id))}),e.jsx(vt,{value:i,className:"mt-0",children:e.jsx("div",{className:"grid sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4",children:r.map(g=>{const v=s.unlockedBadges.includes(g.id),P=p(g),z=x(g);return e.jsxs(k,{className:`p-5 transition-all relative overflow-hidden ${v?`border-2 ${ls[g.rarity]} shadow-lg`:"opacity-60 bg-gray-100"}`,children:[v&&e.jsx("div",{className:`absolute top-0 left-0 right-0 h-1 bg-gradient-to-r ${bt[g.rarity]}`}),e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsx("div",{className:`text-5xl ${v?"filter-none":"grayscale opacity-40"}`,children:g.icon}),e.jsxs("div",{className:"flex flex-col items-end gap-1",children:[e.jsx(O,{className:`${g.rarity==="common"?"bg-gray-200 text-gray-800":g.rarity==="rare"?"bg-blue-100 text-blue-800":g.rarity==="epic"?"bg-purple-100 text-purple-800":"bg-yellow-100 text-yellow-800"}`,children:oa[g.rarity]}),!v&&e.jsx(we,{className:"w-5 h-5 text-gray-400 mt-1"})]})]}),e.jsx("h3",{className:`text-gray-900 mb-2 ${!v&&"text-gray-500"}`,children:g.name}),e.jsx("p",{className:`text-sm mb-3 ${v?"text-gray-600":"text-gray-400"}`,children:g.description}),e.jsx("div",{className:"text-xs text-gray-500 mb-2",children:g.requirement.description}),!v&&e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex items-center justify-between text-xs text-gray-600",children:[e.jsx("span",{children:"Progresso"}),e.jsxs("span",{children:[z,"/",g.requirement.value]})]}),e.jsx(he,{value:P,className:"h-2"})]}),v&&e.jsxs("div",{className:"mt-3 pt-3 border-t border-gray-200 space-y-3",children:[g.reward&&e.jsxs("div",{className:"flex items-center gap-2 text-sm text-green-600",children:[e.jsx(U,{className:"w-4 h-4"}),e.jsxs("span",{children:[g.reward.xp&&`+${g.reward.xp} XP`,g.reward.multiplier&&` â€¢ ${((g.reward.multiplier-1)*100).toFixed(0)}% XP boost`]})]}),e.jsx(ua,{title:`Ho sbloccato il badge "${g.name}" su BTC Wheel! ðŸ†`,description:`${g.description} - Unisciti a me per imparare la Bitcoin Wheel Strategy!`,className:"justify-center"})]}),v&&e.jsx("div",{className:"absolute top-3 right-3 bg-green-500 text-white rounded-full w-6 h-6 flex items-center justify-center",children:e.jsx(G,{className:"w-4 h-4"})})]},g.id)})})})]}),r.length===0&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx(G,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-500",children:"Nessun badge in questa categoria"})]})]})]})}function $e({className:t,type:a,...i}){return e.jsx("input",{type:a,"data-slot":"input",className:A("file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input flex h-9 w-full min-w-0 rounded-md border px-3 py-1 text-base bg-input-background transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",t),...i})}const Ie=[{id:1,title:"ðŸ‘‹ Benvenuto nel Simulatore!",content:"Ciao! Sono Prof Satoshi e ti guiderÃ² attraverso la **Bitcoin Wheel Strategy** con un simulatore paper trading. Qui puoi imparare senza rischi usando denaro virtuale!",icon:U,mascotEmotion:"excited",tips:["Capitale iniziale: $10,000 virtuali","Nessun rischio reale","Impara facendo pratica"]},{id:2,title:"ðŸŽ¯ Cos'Ã¨ la Wheel Strategy?",content:`La Wheel Ã¨ una strategia ciclica in 3 fasi:

**1. Vendi PUT** â†’ Raccogli premium
**2. Vieni ASSEGNATO** â†’ Compri BTC
**3. Vendi CALL** â†’ Raccogli altro premium

Poi ricominci! Ãˆ come una ruota che gira continuamente generando rendimento.`,icon:le,mascotEmotion:"teaching",tips:["Genera reddito passivo","Funziona in mercati laterali","Riduce il rischio vs. solo holding"]},{id:3,title:"ðŸ’° Fase 1: Vendere Put",content:`Quando **vendi una put**, accetti di comprare Bitcoin a un prezzo fisso (strike price) se il prezzo scende.

In cambio ricevi subito un **premium** (pagamento)!

Pensa: "Sono disposto a comprare BTC a $40,000? Allora vendo una put a quello strike e mi pago subito!"`,icon:Zt,mascotEmotion:"happy",tips:["Scegli strike sotto il prezzo corrente","Premium = guadagno immediato","PiÃ¹ basso lo strike, piÃ¹ sicuro"]},{id:4,title:"ðŸ“ˆ Fase 2: L'Assegnazione",content:`Se Bitcoin scende sotto il tuo strike price, vieni **assegnato**:

âœ… Compri BTC al prezzo dello strike
âœ… Ma hai giÃ  guadagnato il premium!
âœ… Il tuo prezzo reale Ã¨: Strike - Premium

Esempio: Strike $40k, Premium $500 â†’ Prezzo effettivo $39,500`,icon:K,mascotEmotion:"explaining",tips:["Non Ã¨ una perdita!","Hai ridotto il costo grazie al premium","Ora possiedi BTC per la fase 3"]},{id:5,title:"ðŸ”„ Fase 3: Vendere Call",content:`Ora che possiedi Bitcoin, puoi vendere una **covered call**:

Accetti di vendere il tuo BTC a un prezzo piÃ¹ alto se il prezzo sale.

Ricevi un altro premium! Se BTC non sale, tieni il BTC E il premium. Se sale, vendi con profitto!

Win-win! ðŸŽ‰`,icon:rt,mascotEmotion:"celebrating",tips:["Strike sopra il prezzo corrente","Guadagno 1: Premium della put","Guadagno 2: Premium della call","Guadagno 3: Profitto se chiamato via"]},{id:6,title:"ðŸŽ® Come Usare il Simulatore",content:`Ora sei pronto per iniziare! Ecco cosa fare:

**1.** Osserva il prezzo di Bitcoin (si muove ogni 3 sec)
**2.** Completa le missioni nell'ordine
**3.** Segui i tutorial di ogni missione
**4.** Vendi opzioni e gestisci le posizioni
**5.** Accumula XP e badge!

Le prime missioni sono guidate passo-passo. Inizia con "Il Tuo Primo Premium"!`,icon:U,mascotEmotion:"teaching",tips:["5 missioni progressive","Tutorial integrati","Feedback in tempo reale","Nessun rischio, solo apprendimento!"]}];function gs({onComplete:t,onSkip:a}){const[i,n]=o.useState(0),s=Ie[i],m=(i+1)/Ie.length*100,r=()=>{i<Ie.length-1?n(i+1):t()},l=()=>{i>0&&n(i-1)},c=s.icon;return e.jsx(u.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:e.jsxs(k,{className:"max-w-2xl w-full bg-white shadow-2xl border-2 border-emerald-500",children:[e.jsxs("div",{className:"bg-gradient-to-r from-emerald-600 to-teal-600 p-6 text-white relative",children:[e.jsx(N,{onClick:a,variant:"ghost",size:"sm",className:"absolute top-4 right-4 text-white hover:bg-white/20",children:e.jsx(qe,{className:"w-5 h-5"})}),e.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[e.jsx("div",{className:"w-16 h-16 bg-white rounded-full flex items-center justify-center flex-shrink-0 overflow-hidden border-2 border-emerald-100",children:e.jsx("img",{src:s.mascotEmotion==="excited"||s.mascotEmotion==="celebrating"||s.mascotEmotion==="happy"?"/mascot-excited.png":(s.mascotEmotion==="teaching"||s.mascotEmotion==="explaining","/mascot-normal.png"),alt:"Prof Satoshi",className:"w-full h-full object-cover"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-emerald-100 text-sm mb-1",children:"Prof Satoshi ti spiega..."}),e.jsx("h2",{className:"text-white",children:s.title})]})]}),e.jsx(he,{value:m,className:"h-2 bg-white/20"}),e.jsxs("p",{className:"text-emerald-100 text-sm mt-2",children:["Passo ",i+1," di ",Ie.length]})]}),e.jsx("div",{className:"p-6",children:e.jsx(ge,{mode:"wait",children:e.jsxs(u.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},transition:{duration:.3},children:[e.jsx("div",{className:"flex justify-center mb-6",children:e.jsx("div",{className:"w-20 h-20 bg-gradient-to-br from-emerald-100 to-teal-100 rounded-2xl flex items-center justify-center",children:e.jsx(c,{className:"w-10 h-10 text-emerald-600"})})}),e.jsxs("div",{className:"mb-6",children:[e.jsx("p",{className:"text-gray-700 leading-relaxed whitespace-pre-line text-center mb-6",children:s.content}),e.jsxs("div",{className:"bg-emerald-50 border-2 border-emerald-200 rounded-lg p-4",children:[e.jsxs("p",{className:"text-emerald-900 font-semibold mb-3 flex items-center gap-2",children:[e.jsx(U,{className:"w-4 h-4"}),"Punti Chiave:"]}),e.jsx("ul",{className:"space-y-2",children:s.tips.map((d,h)=>e.jsxs("li",{className:"flex items-start gap-2 text-gray-700",children:[e.jsx("span",{className:"text-emerald-600 mt-1",children:"âœ“"}),e.jsx("span",{children:d})]},h))})]})]}),e.jsxs("div",{className:"flex items-center justify-between gap-4",children:[e.jsxs(N,{onClick:l,variant:"outline",disabled:i===0,className:"flex-1",children:[e.jsx(Ga,{className:"w-4 h-4 mr-2"}),"Indietro"]}),e.jsxs(N,{onClick:r,className:"flex-1 bg-gradient-to-r from-emerald-600 to-teal-600 hover:from-emerald-700 hover:to-teal-700 text-white",children:[i===Ie.length-1?"Inizia Simulazione":"Avanti",e.jsx(yt,{className:"w-4 h-4 ml-2"})]})]}),i<Ie.length-1&&e.jsx("button",{onClick:a,className:"w-full text-center text-gray-500 text-sm mt-4 hover:text-gray-700 transition-colors",children:"Salta tutorial (puoi rivederlo dopo)"})]},i)})})]})})}const Re=[{id:"mission-1",title:"Il Tuo Primo Premium",description:"Impara a vendere la tua prima opzione put e raccogliere premium",difficulty:"easy",objectives:[{type:"sell_option",target:1,current:0,description:"Vendi 1 opzione put"}],reward:{xp:200,badgeId:"first-premium"},tutorial:[{step:1,title:"Cos'Ã¨ una Put?",content:"Vendere una put significa che accetti di comprare Bitcoin a un prezzo fisso (strike) se il prezzo scende. In cambio, ricevi subito un pagamento (premium).",mascotEmotion:"teaching"},{step:2,title:"Scegli lo Strike",content:"Seleziona uno strike price SOTTO il prezzo corrente di Bitcoin. Consiglio: inizia con 5-10% sotto il prezzo attuale per maggiore sicurezza.",mascotEmotion:"explaining"},{step:3,title:"Raccogli il Premium",content:"Il premium Ã¨ il tuo guadagno immediato! PiÃ¹ basso Ã¨ lo strike, piÃ¹ basso Ã¨ il premium ma piÃ¹ sicura Ã¨ la posizione.",mascotEmotion:"excited"}],status:"active"},{id:"mission-2",title:"Collezionista di Premium",description:"Raccogli $1,000 totali in premium vendendo multiple opzioni",difficulty:"medium",objectives:[{type:"collect_premium",target:1e3,current:0,description:"Raccogli $1,000 in premium totale"}],reward:{xp:350,badgeId:"premium-collector"},tutorial:[{step:1,title:"Diversifica le Posizioni",content:"Invece di vendere tutto in una volta, distribuisci le tue put in diversi strike price per gestire meglio il rischio.",mascotEmotion:"teaching"},{step:2,title:"Timing del Mercato",content:"Il premium Ã¨ piÃ¹ alto quando il mercato Ã¨ volatile. Osserva il grafico e vendi quando vedi movimenti ampi.",mascotEmotion:"normal"}],status:"locked",unlockRequirement:'Completa "Il Tuo Primo Premium"'},{id:"mission-3",title:"Gestisci l'Assegnazione",description:"Impara cosa succede quando la put va in-the-money e vieni assegnato",difficulty:"medium",objectives:[{type:"handle_assignment",target:1,current:0,description:"Ricevi 1 assegnazione e gestiscila"}],reward:{xp:400,badgeId:"assignment-master"},tutorial:[{step:1,title:"Cosa Ã¨ l'Assegnazione?",content:"Se Bitcoin scende sotto il tuo strike, devi comprare BTC al prezzo dello strike. Non Ã¨ una perdita - hai giÃ  guadagnato il premium!",mascotEmotion:"explaining"},{step:2,title:"Prezzo di Carico",content:"Il tuo prezzo effettivo Ã¨: Strike - Premium ricevuto. Esempio: Strike $40k, Premium $500 = Prezzo reale $39,500.",mascotEmotion:"teaching"},{step:3,title:"Prossimo Step",content:"Ora che possiedi BTC, puoi vendere covered calls per generare piÃ¹ reddito. Questo Ã¨ il cuore della Wheel Strategy!",mascotEmotion:"excited"}],status:"locked",unlockRequirement:'Completa "Collezionista di Premium"'},{id:"mission-4",title:"Il Primo Covered Call",description:"Vendi una call coperta sul tuo Bitcoin assegnato",difficulty:"hard",objectives:[{type:"sell_option",target:1,current:0,description:"Vendi 1 covered call"}],reward:{xp:500,badgeId:"covered-call-pro"},tutorial:[{step:1,title:"Covered Call",content:"Vendere una call significa che accetti di vendere il tuo BTC a un prezzo piÃ¹ alto (strike) se il prezzo sale. Ricevi premium anche qui!",mascotEmotion:"teaching"},{step:2,title:"Strike Sopra il Prezzo",content:"Scegli uno strike SOPRA il prezzo corrente. Se BTC sale sopra, vendi con profitto. Se no, tieni il premium e il BTC.",mascotEmotion:"explaining"},{step:3,title:"Doppio Guadagno",content:"Hai giÃ  guadagnato dalla put, ora guadagni anche dalla call. Ãˆ cosÃ¬ che la Wheel genera rendimento costante!",mascotEmotion:"celebrating"}],status:"locked",unlockRequirement:`Completa "Gestisci l'Assegnazione"`},{id:"mission-5",title:"Wheel Strategy Master",description:"Completa un ciclo completo: Put â†’ Assegnazione â†’ Call â†’ Profitto",difficulty:"expert",objectives:[{type:"complete_wheel",target:1,current:0,description:"Completa 1 ciclo completo della Wheel"}],reward:{xp:1e3,badgeId:"wheel-master"},tutorial:[{step:1,title:"Il Ciclo Completo",content:"Vendi put â†’ Vieni assegnato â†’ Vendi call â†’ Bitcoin chiamato via â†’ Ricomincia. Questo Ã¨ come i professionisti generano reddito passivo.",mascotEmotion:"normal"},{step:2,title:"Optimization",content:"Ogni ciclo genera profitto. PiÃ¹ cicli completi, piÃ¹ guadagni. L'obiettivo Ã¨ ripetere questo processo indefinitamente.",mascotEmotion:"explaining"},{step:3,title:"Congratulazioni!",content:"Hai padroneggiato la Wheel Strategy! Ora sei pronto per applicarla nel mondo reale con capitale vero.",mascotEmotion:"celebrating"}],status:"locked",unlockRequirement:'Completa "Il Primo Covered Call"'}];function bs({onNavigate:t}){const{addXP:a}=ze(),[i,n]=o.useState(96e3),[s,m]=o.useState(1e4),[r,l]=o.useState([]),[c,d]=o.useState([]),[h,b]=o.useState(Re),[p,x]=o.useState(Re[0]),[g,v]=o.useState(0),[P,z]=o.useState(!0),[j,y]=o.useState(!0),[w,L]=o.useState(0),_=s+w*i,H=_-1e4,[B,J]=o.useState("put"),[de,te]=o.useState("90000"),[fe,ee]=o.useState("800"),[me,ue]=o.useState("1");o.useEffect(()=>{if(B==="put"){const f=Math.round(i*.93);te(f.toString());const T=.008+(i-f)/i*100*.001,E=Math.round(f*T);ee(E.toString())}else if(B==="call"){const f=Math.round(i*1.07);te(f.toString());const T=.006+(f-i)/i*100*8e-4,E=Math.round(f*T);ee(E.toString())}},[B,i]),o.useEffect(()=>{const f=setInterval(()=>{n(S=>{const T=(Math.random()-.5)*2e3,E=Math.max(85e3,Math.min(105e3,S+T));return Math.round(E)})},3e3);return()=>clearInterval(f)},[]),o.useEffect(()=>{const f=new Date,S=`${f.getHours()}:${String(f.getMinutes()).padStart(2,"0")}`;d(T=>[...T,{time:S,price:i}].slice(-20))},[i]),o.useEffect(()=>{r.forEach(f=>{f.status==="open"&&!f.assignmentPrice&&(f.type==="put"&&i<f.strike?ye(f.id):f.type==="call"&&i>f.strike&&q(f.id))})},[i,r]);const ye=f=>{const S=r.find(I=>I.id===f);if(!S)return;const T=S.quantity,E=S.strike*T;S.strike-S.premium,L(I=>I+T),m(I=>I-E),l(r.map(I=>I.id===f?{...I,status:"closed",assignmentPrice:i}:I)),ie("handle_assignment",1),C.success("âš¡ Assegnazione Put (Acquisto)!",{description:`Hai acquistato ${T} BTC a $${S.strike}. Cash utilizzato: $${E.toLocaleString()}`}),a(300)},q=f=>{const S=r.find(I=>I.id===f);if(!S)return;const T=S.quantity,E=S.strike*T;L(I=>I-T),m(I=>I+E),l(r.map(I=>I.id===f?{...I,status:"closed",assignmentPrice:i}:I)),ie("complete_wheel",1),C.success("âš¡ Assegnazione Call (Vendita)!",{description:`Hai venduto ${T} BTC a $${S.strike}. Incasso: $${E.toLocaleString()}`}),a(500)},D=()=>{const f=parseFloat(de),S=parseFloat(fe),T=parseInt(me);if(isNaN(f)||isNaN(S)||isNaN(T)||T<=0){C.error("Inserisci valori validi");return}if(p?.id==="mission-1"&&B==="call"){C.error("Per questa missione devi vendere una PUT!");return}if(B==="call"&&w<T){C.error(`Non hai abbastanza BTC! (Possiedi: ${w}, Richiesto: ${T})`);return}if(B==="put"){const F=f*T;s<F&&C.warning("Attenzione: Cash insufficiente per coprire l'assegnazione",{description:`Hai $${s.toLocaleString()}, servono $${F.toLocaleString()}`})}const E={id:Date.now().toString(),type:B,strike:f,premium:S,quantity:T,openDate:new Date,status:"open"};l([...r,E]),m(F=>F+S*T),ie("sell_option",1),ie("collect_premium",S*T);const I=B==="call"?150:100;a(I),C.success(`âœ… ${B==="put"?"Put":"Call"} venduta!`,{description:`+$${S*T} premium raccolto | +${I} XP`}),p&&g<p.tutorial.length-1&&v(F=>F+1)},ne=f=>{const S=r.find(F=>F.id===f);if(!S)return;const T=S.type==="put"?Math.max(0,S.strike-i)*S.quantity:Math.max(0,i-S.strike)*S.quantity,E=S.premium*S.quantity,I=E-T;if(m(F=>F-T),l(r.map(F=>F.id===f?{...F,status:"closed"}:F)),ie("close_position",1),I>0){const _e=I/E*100>80?100:0,Y=150+_e;a(Y),C.success("âœ… Posizione chiusa in profitto!",{description:_e>0?`Profitto eccellente: $${I.toFixed(2)} | +${Y} XP (bonus +${_e}!)`:`Profitto: $${I.toFixed(2)} | +${Y} XP`})}else C.error("Posizione chiusa in perdita",{description:`Perdita: $${Math.abs(I).toFixed(2)}`})},ie=(f,S)=>{if(!p)return;const T=h.map(I=>{if(I.id===p.id){const F=I.objectives.map(Y=>{if(Y.type===f){const lt=Math.min(Y.current+S,Y.target);return{...Y,current:lt}}return Y});return F.every(Y=>Y.current>=Y.target)&&I.status==="active"?(ve(I),{...I,objectives:F,status:"completed"}):{...I,objectives:F}}return I});b(T);const E=T.find(I=>I.id===p.id);E&&x(E)},ve=f=>{a(f.reward.xp),C.success("ðŸ† Missione Completata!",{description:`${f.title} - +${f.reward.xp} XP`,duration:5e3});const S=Re.findIndex(T=>T.id===f.id);if(S<Re.length-1){const T=Re[S+1];b(E=>E.map(I=>I.id===T.id?{...I,status:"active"}:I)),setTimeout(()=>{const E={...T,status:"active"};x(E),v(0),z(!0),C.success("ðŸ”“ Nuova Missione Attivata!",{description:T.title,duration:4e3})},2e3)}else setTimeout(()=>{C.success("ðŸŽ‰ Tutte le Missioni Completate!",{description:"Sei un maestro della Wheel Strategy!",duration:5e3})},2e3)},Se=f=>{if(f.status==="locked"){C.error("Missione bloccata",{description:f.unlockRequirement});return}x(f),v(0),z(!0)},se=r.filter(f=>f.status==="open");r.reduce((f,S)=>f+S.premium*S.quantity,0);const pe=f=>{switch(f){case"easy":return"bg-green-100 text-green-700";case"medium":return"bg-blue-100 text-blue-700";case"hard":return"bg-orange-100 text-orange-700";case"expert":return"bg-purple-100 text-purple-700"}};return e.jsxs("div",{className:"min-h-screen md:pl-20 pb-24 md:pb-0 bg-gray-50",children:[e.jsx(ce,{currentView:"simulation",onNavigate:t}),e.jsx("header",{className:"bg-white border-b border-gray-200 px-4 py-4 md:px-6 sticky top-0 z-30 safe-area-top",children:e.jsx("div",{className:"max-w-7xl mx-auto",children:e.jsxs("div",{className:"flex items-center gap-3 md:gap-4",children:[e.jsxs(N,{variant:"ghost",onClick:()=>t("home"),size:"sm",className:"h-10",children:[e.jsx(Ye,{className:"w-5 h-5 md:w-4 md:h-4 mr-2"}),e.jsx("span",{className:"hidden md:inline",children:"Indietro"})]}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h1",{className:"text-gray-900 truncate",children:"ðŸŽ¯ Trading Missions"}),e.jsx("p",{className:"text-gray-600 hidden md:block",children:"Impara la Wheel Strategy passo dopo passo"})]})]})})}),e.jsxs("main",{className:"max-w-7xl mx-auto px-4 py-5 md:px-6 md:py-8",children:[e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-3 md:gap-4 mb-6",children:[e.jsxs(k,{className:"p-4 md:p-6 bg-gradient-to-br from-blue-500 to-blue-600 text-white",children:[e.jsx("p",{className:"text-blue-100 mb-2",children:"BTC Price"}),e.jsxs("p",{className:"font-bold mb-2",children:["$",i.toLocaleString()]}),e.jsxs("div",{className:"flex items-center gap-1 text-blue-100",children:[e.jsx(K,{className:"w-4 h-4"}),e.jsx("span",{children:"Live"})]})]}),e.jsxs(k,{className:"p-4 md:p-6",children:[e.jsx("p",{className:"text-gray-600 mb-2",children:"Total Equity"}),e.jsxs("p",{className:"text-gray-900 mb-2 font-bold",children:["$",_.toLocaleString()]}),e.jsxs("div",{className:`flex items-center gap-1 ${H>=0?"text-green-600":"text-red-600"}`,children:[H>=0?e.jsx(K,{className:"w-4 h-4"}):e.jsx(Ha,{className:"w-4 h-4"}),e.jsxs("span",{children:[H>=0?"+":"",H.toFixed(0)," PnL"]})]})]}),e.jsxs(k,{className:"p-4 md:p-6",children:[e.jsx("p",{className:"text-gray-600 mb-2",children:"Cash Balance"}),e.jsxs("p",{className:"text-gray-900 mb-2 font-bold",children:["$",s.toLocaleString()]}),e.jsxs("div",{className:"flex items-center gap-1 text-gray-500",children:[e.jsx(Zt,{className:"w-4 h-4"}),e.jsx("span",{children:"Available"})]})]}),e.jsxs(k,{className:"p-4 md:p-6",children:[e.jsx("p",{className:"text-gray-600 mb-2",children:"BTC Owned"}),e.jsx("p",{className:"text-gray-900 mb-2 font-bold",children:w}),e.jsx("p",{className:"text-gray-600",children:"Bitcoin"})]}),e.jsxs(k,{className:"p-4 md:p-6 bg-gradient-to-br from-purple-500 to-purple-600 text-white",children:[e.jsx("p",{className:"text-purple-100 mb-2",children:"Missioni"}),e.jsxs("p",{className:"font-bold mb-2",children:[h.filter(f=>f.status==="completed").length,"/",h.length]}),e.jsxs("div",{className:"flex items-center gap-1 text-purple-100",children:[e.jsx(G,{className:"w-4 h-4"}),e.jsx("span",{children:"Completate"})]})]})]}),e.jsxs("div",{className:"grid md:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("h2",{className:"text-gray-900 flex items-center gap-2",children:[e.jsx(le,{className:"w-5 h-5 text-blue-600"}),"Le Tue Missioni"]}),h.map((f,S)=>e.jsx(u.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:S*.1},children:e.jsx(k,{className:`p-4 cursor-pointer transition-all ${p?.id===f.id?"ring-2 ring-blue-500 shadow-lg":f.status==="locked"?"opacity-60":"hover:shadow-md"}`,onClick:()=>Se(f),children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"p-2 rounded-lg bg-gray-100",children:f.status==="completed"?e.jsx(Q,{className:"w-6 h-6 text-green-600"}):f.status==="locked"?e.jsx(we,{className:"w-6 h-6 text-gray-400"}):e.jsx(Qe,{className:"w-6 h-6 text-blue-600"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("h3",{className:"text-gray-900 truncate",children:f.title}),e.jsx(O,{className:pe(f.difficulty),children:f.difficulty})]}),e.jsx("p",{className:"text-gray-600 mb-3",children:f.description}),f.status==="active"&&f.objectives.map((T,E)=>e.jsxs("div",{className:"mb-2",children:[e.jsxs("div",{className:"flex items-center justify-between mb-1",children:[e.jsx("span",{className:"text-gray-600",children:T.description}),e.jsxs("span",{className:"text-gray-900 font-semibold",children:[T.current,"/",T.target]})]}),e.jsx(he,{value:T.current/T.target*100,className:"h-2"})]},E)),f.status==="completed"&&e.jsxs("div",{className:"flex items-center gap-2 text-green-600",children:[e.jsx(Q,{className:"w-4 h-4"}),e.jsxs("span",{className:"font-semibold",children:["Completata! +",f.reward.xp," XP"]})]}),f.status==="locked"&&e.jsx("p",{className:"text-gray-500 italic",children:f.unlockRequirement})]})]})})},f.id))]}),e.jsxs("div",{className:"md:col-span-2 space-y-6",children:[p&&P&&p.status==="active"&&e.jsx(u.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},children:e.jsx(k,{className:"p-6 bg-gradient-to-br from-blue-50 to-purple-50 border-blue-200",children:e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:"w-16 h-16 bg-white rounded-full flex items-center justify-center flex-shrink-0 overflow-hidden border-2 border-emerald-100",children:e.jsx("img",{src:p.tutorial[g].mascotEmotion==="excited"||p.tutorial[g].mascotEmotion==="celebrating"||p.tutorial[g].mascotEmotion==="happy"?"/mascot-excited.png":"/mascot-normal.png",alt:"Prof Satoshi",className:"w-full h-full object-cover"})}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("h3",{className:"text-gray-900 font-semibold",children:p.tutorial[g].title}),e.jsx(N,{variant:"ghost",size:"sm",onClick:()=>z(!1),children:"Chiudi"})]}),e.jsx("p",{className:"text-gray-700 mb-4",children:p.tutorial[g].content}),e.jsx("div",{className:"flex items-center gap-2",children:p.tutorial.map((f,S)=>e.jsx("div",{className:`h-2 flex-1 rounded-full ${S<=g?"bg-blue-600":"bg-gray-300"}`},S))})]})]})})}),e.jsxs(k,{className:"p-6",children:[e.jsx("h2",{className:"text-gray-900 mb-4",children:"Bitcoin Price Chart"}),e.jsx(Pi,{width:"100%",height:200,children:e.jsxs(Li,{data:c,children:[e.jsx($i,{strokeDasharray:"3 3"}),e.jsx(Ei,{dataKey:"time",tick:{fontSize:12}}),e.jsx(qi,{domain:["dataMin - 500","dataMax + 500"],tick:{fontSize:12}}),e.jsx(_i,{}),e.jsx(Bi,{type:"monotone",dataKey:"price",stroke:"#3b82f6",strokeWidth:2,dot:!1})]})})]}),e.jsxs(k,{className:"p-6",children:[e.jsx("h2",{className:"text-gray-900 mb-4",children:"Vendi Opzione"}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-4 mb-4",children:[e.jsx(N,{variant:B==="put"?"default":"outline",onClick:()=>J("put"),className:B==="put"?"bg-orange-600 hover:bg-orange-700":"",children:"Sell Put"}),e.jsxs(N,{variant:B==="call"?"default":"outline",onClick:()=>J("call"),disabled:w===0,className:B==="call"?"bg-blue-600 hover:bg-blue-700":"",children:["Sell Call ",w===0&&"ðŸ”’"]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(R,{children:"Strike Price ($)"}),e.jsx($e,{type:"number",value:de,onChange:f=>te(f.target.value),placeholder:B==="put"?"40000":"45000",className:"h-12"}),e.jsxs("p",{className:"text-gray-500 mt-1",children:["BTC attuale: $",i.toLocaleString()," â€¢ ",B==="put"?"7% sotto (sicuro)":"7% sopra (profit target)"]})]}),e.jsxs("div",{children:[e.jsxs(R,{children:["Premium ($) ",e.jsx("span",{className:"text-xs text-gray-500",children:"(auto-calcolato)"})]}),e.jsx($e,{type:"number",value:fe,onChange:f=>ee(f.target.value),placeholder:"500",className:"h-12"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"ðŸ’¡ Il premium Ã¨ calcolato automaticamente in base alla distanza dallo strike. Puoi modificarlo manualmente."})]}),e.jsxs("div",{children:[e.jsx(R,{children:"QuantitÃ "}),e.jsx($e,{type:"number",value:me,onChange:f=>ue(f.target.value),placeholder:"1",min:"1",max:B==="call"?w:void 0,className:"h-12"}),B==="call"&&e.jsxs("p",{className:"text-gray-500 mt-1",children:["BTC disponibili: ",w]})]}),e.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg",children:[e.jsx("p",{className:"text-gray-700 mb-2 font-semibold",children:"Riepilogo:"}),e.jsxs("p",{className:"text-gray-900",children:["Premium totale: $",parseFloat(fe||"0")*parseInt(me||"1")]}),B==="put"&&e.jsxs("p",{className:"text-gray-600",children:["Capitale richiesto: $",parseFloat(de||"0")*parseInt(me||"1")]})]}),e.jsxs(N,{onClick:D,className:`w-full h-12 ${B==="put"?"bg-orange-600 hover:bg-orange-700":"bg-blue-600 hover:bg-blue-700"}`,children:["Vendi ",B==="put"?"Put":"Call"]})]})]}),e.jsxs(k,{className:"p-6",children:[e.jsxs("h2",{className:"text-gray-900 mb-4",children:["Posizioni Aperte (",se.length,")"]}),se.length===0?e.jsxs("div",{className:"text-center py-8",children:[e.jsx("p",{className:"text-gray-600 mb-2",children:"Nessuna posizione aperta"}),e.jsx("p",{className:"text-gray-500",children:"Vendi la tua prima opzione per iniziare!"})]}):e.jsx("div",{className:"space-y-3",children:se.map(f=>{const S=f.type==="put"?Math.max(0,f.strike-i)*f.quantity:Math.max(0,i-f.strike)*f.quantity,T=f.premium*f.quantity,E=T-S;return e.jsxs("div",{className:"p-4 bg-gray-50 rounded-lg",children:[e.jsx("div",{className:"flex items-center justify-between mb-3",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(O,{className:f.type==="put"?"bg-orange-100 text-orange-700":"bg-blue-100 text-blue-700",children:f.type.toUpperCase()}),e.jsxs("span",{className:"text-gray-900 font-semibold",children:["$",f.strike.toLocaleString()]}),e.jsxs("span",{className:"text-gray-600",children:["x",f.quantity]})]})}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("p",{className:"text-gray-600",children:["Premium: $",T]}),e.jsxs("p",{className:E>=0?"text-green-600 font-semibold":"text-red-600 font-semibold",children:["P&L: ",E>=0?"+":"","$",E.toFixed(2)]})]}),e.jsx(N,{onClick:()=>ne(f.id),variant:"outline",size:"sm",children:"Chiudi"})]})]},f.id)})})]})]})]})]}),j&&e.jsx(gs,{onComplete:()=>{y(!1),C.success("Ottimo! Ora inizia con la prima missione ðŸš€")},onSkip:()=>{y(!1),C.info('Tutorial saltato. Puoi riaprirlo dal pulsante "?"')}}),!j&&e.jsx(N,{onClick:()=>y(!0),className:"fixed bottom-24 md:bottom-8 right-4 md:right-8 w-14 h-14 rounded-full bg-emerald-600 hover:bg-emerald-700 shadow-2xl z-40 flex items-center justify-center",title:"Rivedi Tutorial",children:e.jsx(Wa,{className:"w-6 h-6 text-white"})})]})}const jt=[{rank:1,username:"CryptoMaster99",level:12,xp:5420,streak:45,badges:15,initials:"CM",color:"from-yellow-400 to-yellow-600"},{rank:2,username:"BTCTrader",level:11,xp:4890,streak:38,badges:14,initials:"BT",color:"from-gray-300 to-gray-400"},{rank:3,username:"WheelPro",level:10,xp:4320,streak:42,badges:13,initials:"WP",color:"from-orange-400 to-orange-600"},{rank:4,username:"OptionGuru",level:9,xp:3850,streak:28,badges:12,initials:"OG",color:"from-blue-400 to-blue-600"},{rank:5,username:"SatoshiFan",level:8,xp:3210,streak:31,badges:11,initials:"SF",color:"from-purple-400 to-purple-600"},{rank:6,username:"DiamondHands",level:7,xp:2890,streak:22,badges:10,initials:"DH",color:"from-green-400 to-green-600"},{rank:7,username:"CryptoLearner",level:6,xp:2450,streak:19,badges:9,initials:"CL",color:"from-pink-400 to-pink-600"},{rank:8,username:"TradingNinja",level:6,xp:2180,streak:25,badges:8,initials:"TN",color:"from-indigo-400 to-indigo-600"},{rank:9,username:"CryptoUser",level:5,xp:1250,streak:7,badges:4,initials:"CU",color:"from-blue-400 to-blue-600"},{rank:10,username:"HODLKing",level:5,xp:1180,streak:15,badges:7,initials:"HK",color:"from-teal-400 to-teal-600"}],fs=jt,vs=[{rank:1,username:"QuickLearner",level:6,xp:890,streak:7,badges:3,initials:"QL",color:"from-yellow-400 to-yellow-600"},{rank:2,username:"CryptoUser",level:5,xp:750,streak:7,badges:4,initials:"CU",color:"from-gray-300 to-gray-400"},{rank:3,username:"FastTrader",level:4,xp:680,streak:5,badges:2,initials:"FT",color:"from-orange-400 to-orange-600"},{rank:4,username:"NewbiePro",level:3,xp:520,streak:6,badges:2,initials:"NP",color:"from-blue-400 to-blue-600"},{rank:5,username:"StudyMaster",level:4,xp:490,streak:4,badges:3,initials:"SM",color:"from-purple-400 to-purple-600"}];function js({onNavigate:t}){const{progress:a}=ze(),{user:i}=be(),[n,s]=o.useState([]),[m,r]=o.useState(!1),[l,c]=o.useState(null),d=async()=>{r(!0);try{if(M&&i){const p=await Wi(50);s(p);const x=p.find(g=>g.user_id===i.id);x&&c(x.rank)}else s(jt)}catch{s(jt)}finally{r(!1)}};o.useEffect(()=>{d()},[i]);const h=p=>p===1?e.jsx(Qa,{className:"w-6 h-6 text-yellow-500"}):p===2?e.jsx(Tt,{className:"w-6 h-6 text-gray-400"}):p===3?e.jsx(Tt,{className:"w-6 h-6 text-orange-500"}):e.jsxs("span",{className:"text-gray-600",children:["#",p]}),b=(p,x)=>e.jsx("div",{className:"space-y-3",children:p.map(g=>{const v=g.username==="CryptoUser";return e.jsx(k,{className:`p-4 transition-all ${v?"bg-gradient-to-r from-blue-50 to-purple-50 border-2 border-blue-300 shadow-lg":"hover:shadow-md"}`,children:e.jsxs("div",{className:"flex items-center gap-3 md:gap-4",children:[e.jsx("div",{className:"w-10 md:w-12 text-center flex-shrink-0",children:h(g.rank)}),e.jsx(Ge,{className:"w-11 h-11 md:w-12 md:h-12 flex-shrink-0",children:e.jsx(He,{className:`bg-gradient-to-br ${g.color} text-white`,children:g.initials})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("h3",{className:"text-gray-900 truncate",children:g.username}),v&&e.jsx(O,{className:"bg-blue-600 text-white flex-shrink-0",children:"Tu"})]}),e.jsxs("div",{className:"flex items-center gap-3 md:gap-4 text-gray-600",children:[e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(G,{className:"w-4 h-4 flex-shrink-0"}),g.level]}),e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(Ne,{className:"w-4 h-4 flex-shrink-0"}),g.xp]}),e.jsxs("span",{className:"hidden sm:flex items-center gap-1",children:[e.jsx(K,{className:"w-4 h-4 flex-shrink-0"}),g.streak,"d"]})]})]}),e.jsxs("div",{className:"hidden md:block text-right flex-shrink-0",children:[e.jsx("p",{className:"text-gray-600",children:"Badge"}),e.jsx("p",{className:"text-gray-900",children:g.badges})]})]})},g.rank)})});return e.jsxs("div",{className:"min-h-screen md:pl-20 pb-24 md:pb-0 bg-gray-50",children:[e.jsx(ce,{currentView:"leaderboard",onNavigate:t}),e.jsx("header",{className:"bg-gradient-to-r from-purple-600 to-blue-600 text-white px-4 py-8 md:px-6 md:py-12 safe-area-top",children:e.jsxs("div",{className:"max-w-6xl mx-auto text-center",children:[e.jsx(G,{className:"w-12 h-12 md:w-16 md:h-16 mx-auto mb-4 text-yellow-300"}),e.jsx("h1",{className:"text-white mb-2",children:"Classifica"}),e.jsx("p",{className:"text-blue-100",children:"Compete e scala la classifica!"})]})}),e.jsxs("main",{className:"max-w-6xl mx-auto px-4 py-5 md:px-6 md:py-8",children:[e.jsxs(k,{className:"p-5 md:p-6 mb-6 md:mb-8 bg-gradient-to-br from-blue-50 to-purple-50 border-2 border-blue-200",children:[e.jsxs("div",{className:"flex items-center justify-between mb-5 md:mb-0",children:[e.jsxs("div",{className:"flex items-center gap-3 md:gap-4 flex-1 min-w-0",children:[e.jsx(Ge,{className:"w-14 h-14 md:w-16 md:h-16 flex-shrink-0",children:e.jsx(He,{className:"bg-gradient-to-br from-blue-500 to-purple-600 text-white",children:"CU"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h2",{className:"text-gray-900 truncate",children:"La Tua Posizione"}),e.jsx("p",{className:"text-gray-600 hidden md:block",children:"Continua a imparare per scalare!"})]})]}),e.jsxs("div",{className:"text-right flex-shrink-0 ml-3",children:[e.jsx("p",{className:"text-gray-900 font-bold mb-1",children:m?"...":l?`#${l}`:"N/A"}),e.jsx("p",{className:"text-gray-600",children:"Globale"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3 md:gap-4 mt-5 md:mt-6",children:[e.jsxs("div",{className:"text-center p-3 md:p-3 bg-white rounded-lg",children:[e.jsx("p",{className:"text-gray-600 mb-1",children:"Livello"}),e.jsx("p",{className:"text-gray-900 font-bold",children:a.level})]}),e.jsxs("div",{className:"text-center p-3 md:p-3 bg-white rounded-lg",children:[e.jsx("p",{className:"text-gray-600 mb-1",children:"XP"}),e.jsx("p",{className:"text-gray-900 font-bold",children:a.xp})]}),e.jsxs("div",{className:"text-center p-3 md:p-3 bg-white rounded-lg",children:[e.jsx("p",{className:"text-gray-600 mb-1",children:"Streak"}),e.jsx("p",{className:"text-gray-900 font-bold",children:a.streak})]}),e.jsxs("div",{className:"text-center p-3 md:p-3 bg-white rounded-lg",children:[e.jsx("p",{className:"text-gray-600 mb-1",children:"Badge"}),e.jsx("p",{className:"text-gray-900 font-bold",children:a.badges.length})]})]})]}),e.jsxs(da,{defaultValue:"global",className:"w-full",children:[e.jsxs(ma,{className:"grid w-full grid-cols-2 mb-6 md:mb-8 h-11",children:[e.jsx(ft,{value:"global",children:"Globale"}),e.jsx(ft,{value:"weekly",children:"Settimana"})]}),e.jsx(vt,{value:"global",children:e.jsxs(k,{className:"p-5 md:p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-5 md:mb-6",children:[e.jsx("h2",{className:"text-gray-900",children:"Top Trader"}),e.jsxs(N,{variant:"outline",size:"sm",onClick:d,disabled:m,className:"h-9",children:[e.jsx(ea,{className:`w-4 h-4 mr-2 ${m?"animate-spin":""}`}),"Aggiorna"]})]}),b(n.length>0?n:fs)]})}),e.jsx(vt,{value:"weekly",children:e.jsxs(k,{className:"p-5 md:p-6",children:[e.jsx("h2",{className:"text-gray-900 mb-5 md:mb-6",children:"Questa Settimana"}),b(vs),e.jsx("p",{className:"text-sm text-gray-500 text-center mt-4",children:"â„¹ï¸ La classifica settimanale sarÃ  disponibile a breve"})]})})]}),e.jsxs(k,{className:"p-5 md:p-6 mt-6 md:mt-8",children:[e.jsx("h2",{className:"text-gray-900 mb-5 md:mb-6",children:"Sfide Attive"}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"p-4 bg-gradient-to-br from-orange-50 to-red-50 rounded-lg border-2 border-orange-200",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("h3",{className:"text-gray-900",children:"Settimana Perfetta"}),e.jsx(O,{className:"bg-orange-600 text-white flex-shrink-0",children:"In corso"})]}),e.jsx("p",{className:"text-gray-700 mb-4",children:"Completa una lezione ogni giorno per 7 giorni"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Progresso"}),e.jsxs("span",{className:"text-gray-900 font-semibold",children:[a.streak,"/7"]})]}),e.jsx("div",{className:"w-full bg-white rounded-full h-3",children:e.jsx("div",{className:"bg-orange-600 h-3 rounded-full transition-all",style:{width:`${Math.min(a.streak/7*100,100)}%`}})})]})]}),e.jsxs("div",{className:"p-4 bg-gradient-to-br from-blue-50 to-purple-50 rounded-lg border-2 border-blue-200",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("h3",{className:"text-gray-900",children:"Trading Master"}),e.jsx(O,{className:"bg-blue-600 text-white flex-shrink-0",children:"In corso"})]}),e.jsx("p",{className:"text-gray-700 mb-4",children:"Completa 20 simulazioni con profitto"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Progresso"}),e.jsx("span",{className:"text-gray-900 font-semibold",children:"12/20"})]}),e.jsx("div",{className:"w-full bg-white rounded-full h-3",children:e.jsx("div",{className:"bg-blue-600 h-3 rounded-full transition-all",style:{width:"60%"}})})]})]})]})]})]})]})}function ys({onNavigate:t}){const{user:a}=be(),[i,n]=o.useState(()=>localStorage.getItem("mascotSoundEnabled")!=="false"),[s,m]=o.useState(()=>localStorage.getItem("mascotHapticEnabled")!=="false"),r="vibrate"in navigator;o.useEffect(()=>{localStorage.setItem("mascotSoundEnabled",String(i))},[i]),o.useEffect(()=>{localStorage.setItem("mascotHapticEnabled",String(s))},[s]);const l=()=>{n(!i)},c=()=>{m(!s),!s&&"vibrate"in navigator&&navigator.vibrate(20)},d=a?.user_metadata?.name||a?.email?.split("@")[0]||"Utente";return e.jsxs("div",{className:"min-h-screen md:pl-20 pb-24 md:pb-0 bg-gray-50",children:[e.jsx(ce,{currentView:"home",onNavigate:t}),e.jsx("header",{className:"bg-gradient-to-r from-blue-600 to-purple-600 safe-area-top sticky top-0 z-40 shadow-lg",children:e.jsx("div",{className:"px-4 py-4 md:px-6 md:py-6",children:e.jsxs("div",{className:"max-w-4xl mx-auto",children:[e.jsx("h1",{className:"text-white",children:"Impostazioni"}),e.jsx("p",{className:"text-blue-100",children:"Personalizza la tua esperienza"})]})})}),e.jsxs("main",{className:"max-w-4xl mx-auto px-4 py-6 md:px-6 md:py-8",children:[e.jsxs("div",{className:"mb-6",children:[e.jsxs("h2",{className:"text-gray-900 mb-4 flex items-center gap-2",children:[e.jsx(it,{className:"w-5 h-5"}),"Account"]}),e.jsx(k,{className:"p-5 md:p-6",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-gray-600",children:"Nome"}),e.jsx("p",{className:"text-gray-900 font-medium",children:d})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-gray-600",children:"Email"}),e.jsx("p",{className:"text-gray-900 font-medium",children:a?.email})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-gray-600",children:"Provider"}),e.jsxs("div",{className:"inline-flex items-center gap-2 px-3 py-1.5 bg-blue-50 text-blue-700 rounded-lg text-sm mt-1",children:[e.jsx(Fe,{className:"w-4 h-4"}),a?.app_metadata?.provider==="google"?"Google Account":"Email/Password"]})]})]})})]}),e.jsxs("div",{className:"mb-6",children:[e.jsxs("h2",{className:"text-gray-900 mb-4 flex items-center gap-2",children:[e.jsx(Xa,{className:"w-5 h-5"}),"Feedback Mascotte"]}),e.jsxs(k,{className:"p-5 md:p-6",children:[e.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Personalizza i feedback della mascotte per un'esperienza ottimale"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("button",{onClick:l,className:"w-full flex items-center justify-between p-4 rounded-xl bg-gray-50 hover:bg-gray-100 transition-colors active:scale-98 touch-manipulation",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[i?e.jsx(Ka,{className:"w-5 h-5 text-blue-600"}):e.jsx(Ja,{className:"w-5 h-5 text-gray-400"}),e.jsxs("div",{className:"text-left",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900",children:"Suoni"}),e.jsx("p",{className:"text-xs text-gray-500",children:i?"La mascotte emetterÃ  suoni":"Suoni disattivati"})]})]}),e.jsx("div",{className:`w-11 h-6 rounded-full transition-colors ${i?"bg-blue-600":"bg-gray-300"} relative`,children:e.jsx(u.div,{className:"absolute top-1 w-4 h-4 bg-white rounded-full shadow-sm",animate:{x:i?24:4},transition:{type:"spring",stiffness:500,damping:30}})})]}),r&&e.jsxs("button",{onClick:c,className:"w-full flex items-center justify-between p-4 rounded-xl bg-gray-50 hover:bg-gray-100 transition-colors active:scale-98 touch-manipulation",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Ya,{className:`w-5 h-5 ${s?"text-purple-600":"text-gray-400"}`}),e.jsxs("div",{className:"text-left",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900",children:"Vibrazioni"}),e.jsx("p",{className:"text-xs text-gray-500",children:s?"Feedback tattile attivo":"Vibrazioni disattivate"})]})]}),e.jsx("div",{className:`w-11 h-6 rounded-full transition-colors ${s?"bg-purple-600":"bg-gray-300"} relative`,children:e.jsx(u.div,{className:"absolute top-1 w-4 h-4 bg-white rounded-full shadow-sm",animate:{x:s?24:4},transition:{type:"spring",stiffness:500,damping:30}})})]})]})]})]}),e.jsxs("div",{children:[e.jsxs("h2",{className:"text-gray-900 mb-4 flex items-center gap-2",children:[e.jsx(Za,{className:"w-5 h-5"}),"Informazioni"]}),e.jsx(k,{className:"p-5 md:p-6",children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"App Version"}),e.jsx("p",{className:"text-gray-900 font-medium",children:"1.0.0"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Build"}),e.jsx("p",{className:"text-gray-900 font-medium",children:"Production"})]}),e.jsx("div",{className:"pt-3 border-t border-gray-200",children:e.jsx("p",{className:"text-xs text-gray-500 leading-relaxed",children:"btcwheel - Impara la Bitcoin Wheel Strategy con gamification, AI tutor e simulazioni realistiche."})})]})})]})]})]})}function Mt({className:t,...a}){return e.jsx(ei,{"data-slot":"checkbox",className:A("peer border bg-input-background dark:bg-input/30 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground dark:data-[state=checked]:bg-primary data-[state=checked]:border-primary focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive size-4 shrink-0 rounded-[4px] border shadow-xs transition-shadow outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50",t),...a,children:e.jsx(ti,{"data-slot":"checkbox-indicator",className:"flex items-center justify-center text-current transition-none",children:e.jsx(wt,{className:"size-3.5"})})})}async function ws(t){try{const a=`https://${ke}.supabase.co/functions/v1/make-server-7c0f82ca/analyze-profile`,i=await fetch(a,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${xe}`},body:JSON.stringify(t)});if(!i.ok)return console.error("Server error:",i.status),We(t);const n=await i.json();return n.useFallback?(console.warn("Using fallback recommendations (OpenAI not available on server)"),We(t)):n.recommendation?(console.log("âœ… AI-powered recommendations generated successfully!"),n.recommendation):We(t)}catch(a){return console.error("Error calling analyze-profile endpoint:",a),We(t)}}function We(t){return t.experienceLevel==="beginner"&&t.optionsKnowledge==="none"?{startingLesson:1,recommendedPath:["Lezione 1: Introduzione Bitcoin","Lezione 2: Wheel Strategy Basics","Lezione 3: Fondamenti Opzioni","Lezione 4: Put Cash-Secured","Lezione 6: Gestione Rischio"],estimatedDuration:"3-4 settimane",focusAreas:["Basi del Bitcoin e volatilitÃ ","Comprendere le opzioni Put e Call","Gestione rischio fondamentale","Pratica con simulatore"],tips:["Inizia con piccole somme nel simulatore","Studia ogni giorno 15-20 minuti","Non saltare le basi delle opzioni","Fai domande alla mascotte quando hai dubbi"],customMessage:"ðŸŽ“ Benvenuto! Sei all'inizio del tuo viaggio nel trading di opzioni Bitcoin. Inizieremo dalle basi assolute per costruire una solida fondazione. Prenditi il tuo tempo e completa ogni lezione con attenzione!"}:t.experienceLevel==="intermediate"||t.tradingKnowledge==="basic"?{startingLesson:3,recommendedPath:["Lezione 3: Fondamenti Opzioni","Lezione 5: Strike Selection","Lezione 7: Time Decay","Lezione 9: Roll & Adjust","Lezione 11: Greeks Avanzati"],estimatedDuration:"2-3 settimane",focusAreas:["Selezione strike ottimale","Time decay e gestione tempo","Tecniche di roll avanzate","Greeks per decisioni informate"],tips:["Concentrati sulla gestione delle posizioni","Pratica roll scenarios nel simulatore","Studia i Greeks in dettaglio","Tieni un journal delle tue simulazioni"],customMessage:"ðŸ’¼ Ottimo! Hai giÃ  delle basi. Ci concentreremo su strategie intermedie e gestione avanzata delle posizioni. Il tuo obiettivo Ã¨ padroneggiare il roll e l'aggiustamento delle posizioni."}:{startingLesson:7,recommendedPath:["Lezione 7: Time Decay","Lezione 9: Roll & Adjust","Lezione 11: Greeks Avanzati","Lezione 12: Portfolio Management","Lezione 15: Strategie Multi-Leg"],estimatedDuration:"1-2 settimane",focusAreas:["Greeks avanzati e volatilitÃ ","Portfolio diversification","Strategie multi-leg complesse","Ottimizzazione fiscale"],tips:["Sperimenta con strategie avanzate","Ottimizza il tuo portfolio per rischio/rendimento","Studia le implicazioni fiscali","Pratica scenari complessi di mercato"],customMessage:"ðŸš€ Eccellente! Sei un trader esperto. Ci focalizzeremo su strategie avanzate, ottimizzazione del portfolio e tecniche professionali. Pronto per portare il tuo trading al livello successivo!"}}function pa(){const{user:t}=be(),[a,i]=o.useState({completed:!1,profile:null,recommendations:null}),[n,s]=o.useState(!0),[m,r]=o.useState(!1);o.useEffect(()=>{(async()=>{s(!0);try{const b=t?`btc-wheel-onboarding-${t.id}`:"btc-wheel-onboarding",p=localStorage.getItem(b);p&&i(JSON.parse(p))}catch(b){console.error("Error loading onboarding state:",b)}finally{s(!1)}})()},[t]);const l=o.useCallback(async h=>{console.log("ðŸŸ¡ useOnboarding: completeOnboarding called with profile:",h),r(!0);try{let b=null;try{console.log("ðŸŸ¡ useOnboarding: Calling analyzeUserProfile..."),b=await ws(h),console.log("ðŸŸ¡ useOnboarding: AI analysis successful:",b)}catch(g){console.warn("âš ï¸ useOnboarding: AI analysis failed, continuing with onboarding:",g)}const p={completed:!0,profile:h,recommendations:b},x=t?`btc-wheel-onboarding-${t.id}`:"btc-wheel-onboarding";return console.log("ðŸŸ¡ useOnboarding: Saving to localStorage with key:",x),localStorage.setItem(x,JSON.stringify(p)),i(p),console.log("ðŸŸ¡ useOnboarding: State saved successfully"),b}catch(b){console.error("ðŸ”´ useOnboarding: Error completing onboarding:",b);const p={completed:!0,profile:h,recommendations:null},x=t?`btc-wheel-onboarding-${t.id}`:"btc-wheel-onboarding";return console.log("ðŸŸ¡ useOnboarding: Saving fallback state to localStorage"),localStorage.setItem(x,JSON.stringify(p)),i(p),console.log("ðŸŸ¡ useOnboarding: Fallback state saved"),null}finally{console.log("ðŸŸ¡ useOnboarding: Setting analyzing to false"),r(!1)}},[t]),c=o.useCallback(()=>{const h={completed:!0,profile:null,recommendations:null},b=t?`btc-wheel-onboarding-${t.id}`:"btc-wheel-onboarding";localStorage.setItem(b,JSON.stringify(h)),i(h)},[t]),d=o.useCallback(async()=>{const h=t?`btc-wheel-onboarding-${t.id}`:"btc-wheel-onboarding";localStorage.removeItem(h),i({completed:!1,profile:null,recommendations:null})},[t]);return{onboarding:a,loading:n,analyzing:m,completeOnboarding:l,skipOnboarding:c,resetOnboarding:d,shouldShowOnboarding:!n&&!a.completed}}function Ns({onComplete:t}){const{completeOnboarding:a,skipOnboarding:i,analyzing:n}=pa(),[s,m]=o.useState(0),[r,l]=o.useState({experienceLevel:void 0,tradingKnowledge:void 0,optionsKnowledge:void 0,goals:[],availableTime:void 0,capital:void 0,learningStyle:[]}),c=6,d=()=>{console.log("ðŸ”µ handleNext called, currentStep:",s,"totalSteps:",c),console.log("ðŸ”µ isStepComplete:",v()),console.log("ðŸ”µ profile:",r),s<c-1?m(s+1):(console.log("ðŸ”µ Last step reached, calling handleComplete"),b())},h=()=>{s>0&&m(s-1)},b=async()=>{console.log("ðŸŸ¢ handleComplete called"),console.log("ðŸŸ¢ Profile to submit:",r);try{console.log("ðŸŸ¢ Calling completeOnboarding...");const y=await a(r);console.log("ðŸŸ¢ completeOnboarding returned:",y),console.log("ðŸŸ¢ Calling onComplete callback..."),t(),console.log("ðŸŸ¢ onComplete callback finished")}catch(y){console.error("ðŸ”´ Error in handleComplete:",y),console.log("ðŸŸ¢ Calling onComplete despite error..."),t()}},p=()=>{i(),t()},x=(y,w)=>{l(L=>({...L,[y]:w}))},g=(y,w)=>{l(L=>{const _=L[y]||[],H=_.includes(w)?_.filter(B=>B!==w):[..._,w];return{...L,[y]:H}})},v=()=>{switch(s){case 0:return!!r.experienceLevel;case 1:return!!r.tradingKnowledge;case 2:return!!r.optionsKnowledge;case 3:return(r.goals?.length||0)>0;case 4:return!!r.availableTime;case 5:return!!r.capital&&(r.learningStyle?.length||0)>0;default:return!1}},z=[{title:"Livello Esperienza Crypto",icon:ta,content:e.jsx(Pe,{value:r.experienceLevel,onValueChange:y=>x("experienceLevel",y),children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center space-x-3 p-4 rounded-lg border-2 border-gray-200 hover:border-blue-300 transition-colors",children:[e.jsx(W,{value:"beginner",id:"exp-beginner"}),e.jsxs(R,{htmlFor:"exp-beginner",className:"flex-1 cursor-pointer",children:[e.jsx("p",{className:"font-semibold",children:"ðŸŒ± Principiante"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Nuovo al mondo crypto, poca o nessuna esperienza"})]})]}),e.jsxs("div",{className:"flex items-center space-x-3 p-4 rounded-lg border-2 border-gray-200 hover:border-blue-300 transition-colors",children:[e.jsx(W,{value:"intermediate",id:"exp-intermediate"}),e.jsxs(R,{htmlFor:"exp-intermediate",className:"flex-1 cursor-pointer",children:[e.jsx("p",{className:"font-semibold",children:"ðŸ“ˆ Intermedio"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Ho giÃ  investito in crypto, conosco le basi"})]})]}),e.jsxs("div",{className:"flex items-center space-x-3 p-4 rounded-lg border-2 border-gray-200 hover:border-blue-300 transition-colors",children:[e.jsx(W,{value:"advanced",id:"exp-advanced"}),e.jsxs(R,{htmlFor:"exp-advanced",className:"flex-1 cursor-pointer",children:[e.jsx("p",{className:"font-semibold",children:"ðŸš€ Avanzato"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Trading attivo, esperto di crypto e mercati"})]})]})]})})},{title:"Esperienza Trading",icon:K,content:e.jsx(Pe,{value:r.tradingKnowledge,onValueChange:y=>x("tradingKnowledge",y),children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center space-x-3 p-4 rounded-lg border-2 border-gray-200 hover:border-blue-300 transition-colors",children:[e.jsx(W,{value:"none",id:"trade-none"}),e.jsxs(R,{htmlFor:"trade-none",className:"flex-1 cursor-pointer",children:[e.jsx("p",{className:"font-semibold",children:"âŒ Nessuna"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Mai fatto trading prima"})]})]}),e.jsxs("div",{className:"flex items-center space-x-3 p-4 rounded-lg border-2 border-gray-200 hover:border-blue-300 transition-colors",children:[e.jsx(W,{value:"basic",id:"trade-basic"}),e.jsxs(R,{htmlFor:"trade-basic",className:"flex-1 cursor-pointer",children:[e.jsx("p",{className:"font-semibold",children:"ðŸ“Š Base"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Ho comprato/venduto azioni o crypto spot"})]})]}),e.jsxs("div",{className:"flex items-center space-x-3 p-4 rounded-lg border-2 border-gray-200 hover:border-blue-300 transition-colors",children:[e.jsx(W,{value:"experienced",id:"trade-exp"}),e.jsxs(R,{htmlFor:"trade-exp",className:"flex-1 cursor-pointer",children:[e.jsx("p",{className:"font-semibold",children:"ðŸ’¼ Esperto"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Trading attivo con analisi tecnica"})]})]})]})})},{title:"Conoscenza Opzioni",icon:aa,content:e.jsx(Pe,{value:r.optionsKnowledge,onValueChange:y=>x("optionsKnowledge",y),children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center space-x-3 p-4 rounded-lg border-2 border-gray-200 hover:border-blue-300 transition-colors",children:[e.jsx(W,{value:"none",id:"opt-none"}),e.jsxs(R,{htmlFor:"opt-none",className:"flex-1 cursor-pointer",children:[e.jsx("p",{className:"font-semibold",children:"â“ Mai sentite"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Non so cosa sono le opzioni"})]})]}),e.jsxs("div",{className:"flex items-center space-x-3 p-4 rounded-lg border-2 border-gray-200 hover:border-blue-300 transition-colors",children:[e.jsx(W,{value:"basic",id:"opt-basic"}),e.jsxs(R,{htmlFor:"opt-basic",className:"flex-1 cursor-pointer",children:[e.jsx("p",{className:"font-semibold",children:"ðŸ“– Teoria"}),e.jsx("p",{className:"text-sm text-gray-600",children:"So cosa sono ma non le ho mai tradiate"})]})]}),e.jsxs("div",{className:"flex items-center space-x-3 p-4 rounded-lg border-2 border-gray-200 hover:border-blue-300 transition-colors",children:[e.jsx(W,{value:"experienced",id:"opt-exp"}),e.jsxs(R,{htmlFor:"opt-exp",className:"flex-1 cursor-pointer",children:[e.jsx("p",{className:"font-semibold",children:"âš¡ Pratico"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Ho giÃ  tradato opzioni (stocks/crypto)"})]})]})]})})},{title:"I Tuoi Obiettivi",icon:le,content:e.jsx("div",{className:"space-y-3",children:[{value:"learn",label:"ðŸŽ“ Imparare nuova strategia",desc:"Acquisire competenze trading opzioni"},{value:"income",label:"ðŸ’° Generare reddito passivo",desc:"Creare flusso di cassa mensile"},{value:"hedge",label:"ðŸ›¡ï¸ Proteggere portfolio",desc:"Hedging e gestione rischio"},{value:"curiosity",label:"ðŸ” CuriositÃ ",desc:"Esplorare il mondo delle opzioni"}].map(y=>e.jsxs("div",{className:`flex items-center space-x-3 p-4 rounded-lg border-2 transition-colors cursor-pointer ${r.goals?.includes(y.value)?"border-blue-500 bg-blue-50":"border-gray-200 hover:border-blue-300"}`,onClick:()=>g("goals",y.value),children:[e.jsx(Mt,{checked:r.goals?.includes(y.value),onCheckedChange:()=>g("goals",y.value)}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-semibold",children:y.label}),e.jsx("p",{className:"text-sm text-gray-600",children:y.desc})]})]},y.value))})},{title:"Tempo Disponibile",icon:st,content:e.jsx(Pe,{value:r.availableTime,onValueChange:y=>x("availableTime",y),children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center space-x-3 p-4 rounded-lg border-2 border-gray-200 hover:border-blue-300 transition-colors",children:[e.jsx(W,{value:"limited",id:"time-limited"}),e.jsxs(R,{htmlFor:"time-limited",className:"flex-1 cursor-pointer",children:[e.jsx("p",{className:"font-semibold",children:"â±ï¸ Limitato"}),e.jsx("p",{className:"text-sm text-gray-600",children:"10-15 minuti al giorno"})]})]}),e.jsxs("div",{className:"flex items-center space-x-3 p-4 rounded-lg border-2 border-gray-200 hover:border-blue-300 transition-colors",children:[e.jsx(W,{value:"moderate",id:"time-moderate"}),e.jsxs(R,{htmlFor:"time-moderate",className:"flex-1 cursor-pointer",children:[e.jsx("p",{className:"font-semibold",children:"â° Moderato"}),e.jsx("p",{className:"text-sm text-gray-600",children:"30-60 minuti al giorno"})]})]}),e.jsxs("div",{className:"flex items-center space-x-3 p-4 rounded-lg border-2 border-gray-200 hover:border-blue-300 transition-colors",children:[e.jsx(W,{value:"plenty",id:"time-plenty"}),e.jsxs(R,{htmlFor:"time-plenty",className:"flex-1 cursor-pointer",children:[e.jsx("p",{className:"font-semibold",children:"ðŸ• Abbondante"}),e.jsx("p",{className:"text-sm text-gray-600",children:"1-2 ore al giorno o piÃ¹"})]})]})]})})},{title:"Capitale & Stile",icon:U,content:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-gray-900 mb-3",children:"Capitale per Trading"}),e.jsx(Pe,{value:r.capital,onValueChange:y=>x("capital",y),children:e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center space-x-3 p-3 rounded-lg border-2 border-gray-200 hover:border-blue-300 transition-colors",children:[e.jsx(W,{value:"learning",id:"cap-learning"}),e.jsx(R,{htmlFor:"cap-learning",className:"flex-1 cursor-pointer",children:"Solo apprendimento (simulatore)"})]}),e.jsxs("div",{className:"flex items-center space-x-3 p-3 rounded-lg border-2 border-gray-200 hover:border-blue-300 transition-colors",children:[e.jsx(W,{value:"small",id:"cap-small"}),e.jsx(R,{htmlFor:"cap-small",className:"flex-1 cursor-pointer",children:"Piccolo (< $5,000)"})]}),e.jsxs("div",{className:"flex items-center space-x-3 p-3 rounded-lg border-2 border-gray-200 hover:border-blue-300 transition-colors",children:[e.jsx(W,{value:"medium",id:"cap-medium"}),e.jsx(R,{htmlFor:"cap-medium",className:"flex-1 cursor-pointer",children:"Medio ($5,000 - $25,000)"})]}),e.jsxs("div",{className:"flex items-center space-x-3 p-3 rounded-lg border-2 border-gray-200 hover:border-blue-300 transition-colors",children:[e.jsx(W,{value:"large",id:"cap-large"}),e.jsx(R,{htmlFor:"cap-large",className:"flex-1 cursor-pointer",children:"Grande (> $25,000)"})]})]})})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-gray-900 mb-3",children:"Preferenze Apprendimento"}),e.jsx("div",{className:"space-y-2",children:[{value:"reading",label:"ðŸ“– Leggere testi ed esempi"},{value:"practice",label:"ðŸŽ® Pratica con simulatore"},{value:"visual",label:"ðŸ“Š Grafici e visual"},{value:"interactive",label:"ðŸ’¬ Quiz interattivi"}].map(y=>e.jsxs("div",{className:`flex items-center space-x-3 p-3 rounded-lg border-2 transition-colors cursor-pointer ${r.learningStyle?.includes(y.value)?"border-blue-500 bg-blue-50":"border-gray-200 hover:border-blue-300"}`,onClick:()=>g("learningStyle",y.value),children:[e.jsx(Mt,{checked:r.learningStyle?.includes(y.value),onCheckedChange:()=>g("learningStyle",y.value)}),e.jsx(R,{className:"flex-1 cursor-pointer",children:y.label})]},y.value))})]})]})}][s],j=z.icon;return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-600 to-purple-600 flex items-center justify-center p-4 safe-area-inset",children:e.jsxs(k,{className:"w-full max-w-2xl shadow-2xl",children:[e.jsxs("div",{className:"p-6 md:p-8 border-b border-gray-200",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-gradient-to-br from-blue-500 to-purple-600 flex items-center justify-center",children:e.jsx(j,{className:"w-6 h-6 text-white"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h2",{className:"text-gray-900",children:z.title}),e.jsxs("p",{className:"text-sm text-gray-600",children:["Passo ",s+1," di ",c]})]}),e.jsx(N,{variant:"ghost",size:"sm",onClick:p,children:"Salta"})]}),e.jsx(he,{value:(s+1)/c*100,className:"h-2"})]}),e.jsx("div",{className:"p-6 md:p-8 min-h-[400px]",children:e.jsx(ge,{mode:"wait",children:e.jsx(u.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},transition:{duration:.3},children:z.content},s)})}),e.jsxs("div",{className:"p-6 md:p-8 border-t border-gray-200 flex items-center justify-between",children:[e.jsxs(N,{variant:"outline",onClick:h,disabled:s===0,className:"h-11",children:[e.jsx(Ye,{className:"w-4 h-4 mr-2"}),"Indietro"]}),e.jsx(N,{onClick:d,disabled:!v()||n,className:"bg-blue-600 hover:bg-blue-700 h-11",children:n?e.jsxs(e.Fragment,{children:[e.jsx(re,{className:"w-4 h-4 mr-2 animate-spin"}),"Analisi AI..."]}):s===c-1?e.jsxs(e.Fragment,{children:["Inizia il Corso",e.jsx(U,{className:"w-4 h-4 ml-2"})]}):e.jsxs(e.Fragment,{children:["Avanti",e.jsx(je,{className:"w-4 h-4 ml-2"})]})})]})]})})}function ks({recommendations:t,onStart:a}){const i=()=>{console.log("[OnboardingResults] Button clicked - calling onStart"),a()};return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-600 to-purple-600 flex items-center justify-center p-4 safe-area-inset",children:e.jsx(u.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{duration:.5},className:"w-full max-w-3xl",children:e.jsxs(k,{className:"p-6 md:p-10 shadow-2xl",children:[e.jsx(u.div,{className:"w-20 h-20 md:w-24 md:h-24 mx-auto mb-6 rounded-full bg-gradient-to-br from-green-400 to-emerald-600 flex items-center justify-center",initial:{scale:0},animate:{scale:[0,1.2,1]},transition:{delay:.2,duration:.6},children:e.jsx(U,{className:"w-12 h-12 text-white"})}),e.jsxs(u.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.4},className:"text-center mb-8",children:[e.jsx("h1",{className:"text-gray-900 mb-3",children:"Percorso Personalizzato Pronto! ðŸŽ‰"}),e.jsx("p",{className:"text-gray-600 text-lg",children:"L'AI ha analizzato il tuo profilo e creato un percorso formativo su misura per te"})]}),e.jsx(u.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.5},className:"mb-8",children:e.jsx(k,{className:"p-5 bg-gradient-to-r from-blue-50 to-purple-50 border-2 border-blue-200",children:e.jsx("p",{className:"text-gray-900 leading-relaxed",children:t.customMessage})})}),e.jsxs(u.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.6},className:"grid md:grid-cols-2 gap-4 mb-8",children:[e.jsxs(k,{className:"p-5",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx(le,{className:"w-5 h-5 text-blue-600"}),e.jsx("h3",{className:"text-gray-900",children:"Lezione di Partenza"})]}),e.jsxs("p",{className:"text-3xl text-blue-600 font-bold",children:["#",t.startingLesson]}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Inizierai dal livello giusto per te"})]}),e.jsxs(k,{className:"p-5",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx(st,{className:"w-5 h-5 text-purple-600"}),e.jsx("h3",{className:"text-gray-900",children:"Durata Stimata"})]}),e.jsx("p",{className:"text-3xl text-purple-600 font-bold",children:t.estimatedDuration}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Al tuo ritmo di apprendimento"})]})]}),e.jsxs(u.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.7},className:"mb-8",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx(K,{className:"w-5 h-5 text-blue-600"}),e.jsx("h3",{className:"text-gray-900",children:"Percorso Raccomandato"})]}),e.jsx("div",{className:"space-y-2",children:t.recommendedPath.map((n,s)=>e.jsxs(u.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.8+s*.1},className:"flex items-center gap-3 p-3 bg-gray-50 rounded-lg",children:[e.jsx(O,{className:"bg-blue-600 text-white flex-shrink-0",children:s+1}),e.jsx("span",{className:"text-gray-900",children:n})]},s))})]}),e.jsxs(u.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.9},className:"mb-8",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx(le,{className:"w-5 h-5 text-orange-600"}),e.jsx("h3",{className:"text-gray-900",children:"Aree di Focus"})]}),e.jsx("div",{className:"flex flex-wrap gap-2",children:t.focusAreas.map((n,s)=>e.jsx(O,{variant:"outline",className:"border-orange-300 text-orange-700 bg-orange-50",children:n},s))})]}),e.jsxs(u.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:1},className:"mb-8",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx(ai,{className:"w-5 h-5 text-yellow-600"}),e.jsx("h3",{className:"text-gray-900",children:"Consigli per il Successo"})]}),e.jsx("div",{className:"space-y-2",children:t.tips.map((n,s)=>e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"text-yellow-600 flex-shrink-0 mt-1",children:"ðŸ’¡"}),e.jsx("p",{className:"text-gray-700",children:n})]},s))})]}),e.jsx(u.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:1.05},className:"mb-8 flex justify-center",children:e.jsx(ua,{title:"Il mio percorso su BTC Wheel Ã¨ pronto! ðŸš€",description:`L'AI mi consiglia di iniziare dalla lezione ${t.startingLesson}. Unisciti a me!`,className:"justify-center"})}),e.jsx(u.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:1.1},children:e.jsxs(N,{onClick:i,className:"w-full bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-700 hover:to-purple-700 text-white h-14 text-lg",children:["Inizia il Tuo Percorso",e.jsx(je,{className:"w-5 h-5 ml-2"})]})})]})})})}function zs({className:t,orientation:a="horizontal",decorative:i=!0,...n}){return e.jsx(ii,{"data-slot":"separator-root",decorative:i,orientation:a,className:A("bg-border shrink-0 data-[orientation=horizontal]:h-px data-[orientation=horizontal]:w-full data-[orientation=vertical]:h-full data-[orientation=vertical]:w-px",t),...n})}const Ss=nt("relative w-full rounded-lg border px-4 py-3 text-sm grid has-[>svg]:grid-cols-[calc(var(--spacing)*4)_1fr] grid-cols-[0_1fr] has-[>svg]:gap-x-3 gap-y-0.5 items-start [&>svg]:size-4 [&>svg]:translate-y-0.5 [&>svg]:text-current",{variants:{variant:{default:"bg-card text-card-foreground",destructive:"text-destructive bg-card [&>svg]:text-current *:data-[slot=alert-description]:text-destructive/90"}},defaultVariants:{variant:"default"}});function et({className:t,variant:a,...i}){return e.jsx("div",{"data-slot":"alert",role:"alert",className:A(Ss({variant:a}),t),...i})}function tt({className:t,...a}){return e.jsx("div",{"data-slot":"alert-description",className:A("text-muted-foreground col-start-2 grid justify-items-start gap-1 text-sm [&_p]:leading-relaxed",t),...a})}function Rt({onAuthSuccess:t}){const[a,i]=o.useState("signup"),[n,s]=o.useState(!1),[m,r]=o.useState(""),[l,c]=o.useState({email:"",password:"",name:""}),d=Nt(),h=async x=>{if(x.preventDefault(),r(""),s(!0),!M||!d){r("Autenticazione non disponibile. Usa la modalitÃ  demo per continuare."),s(!1);return}try{if(a==="signup"){const{data:g,error:v}=await d.auth.signUp({email:l.email,password:l.password,options:{data:{name:l.name}}});if(v){if(v.message?.includes("already registered")||v.message?.includes("User already registered")||v.status===422){r("âš ï¸ Email giÃ  registrata. Provo ad effettuare il login..."),await new Promise(z=>setTimeout(z,1e3));const{error:P}=await d.auth.signInWithPassword({email:l.email,password:l.password});if(P){r('âŒ Email giÃ  registrata. La password inserita non Ã¨ corretta. Usa "Accedi" invece di "Registrati".'),i("login");return}t();return}throw v}if(g.user){const{error:P}=await d.auth.signInWithPassword({email:l.email,password:l.password});if(P)throw P;t()}}else{const{error:g}=await d.auth.signInWithPassword({email:l.email,password:l.password});if(g){if(g.message?.includes("Invalid login credentials"))r("âŒ Email o password non corretti. Riprova o crea un nuovo account.");else throw g;return}t()}}catch(g){console.error("Auth error:",g);const v=g.message||"";v.includes("Invalid login credentials")?r("âŒ Email o password non corretti."):v.includes("Email not confirmed")?r("âš ï¸ Conferma la tua email prima di accedere. Controlla la tua casella di posta."):v.includes("User not found")?r("âŒ Account non trovato. Registrati per creare un nuovo account."):r(v||"Si Ã¨ verificato un errore. Riprova.")}finally{s(!1)}},b=async()=>{if(r(""),s(!0),!M||!d){r("Autenticazione non disponibile. Usa la modalitÃ  demo per continuare."),s(!1);return}try{const{error:x}=await d.auth.signInWithOAuth({provider:"google",options:{redirectTo:window.location.origin}});if(x)throw x}catch(x){console.error("Google auth error:",x);const g=x.message||"";g.includes("provider")||g.includes("not enabled")||g.includes("configured")?r("âŒ Google OAuth non configurato. Usa email/password oppure segui GOOGLE_OAUTH_SETUP.md per configurare Google."):r(`Errore Google OAuth: ${g}. Usa email/password come alternativa.`),s(!1)}},p=()=>{i(a==="login"?"signup":"login"),r("")};return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-600 via-purple-600 to-orange-500 flex items-center justify-center p-4 safe-area-inset",children:e.jsxs(u.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"w-full max-w-md",children:[e.jsxs(k,{className:"p-8 shadow-2xl",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx(u.div,{className:"w-20 h-20 mx-auto mb-4 rounded-full bg-gradient-to-br from-blue-500 to-purple-600 flex items-center justify-center",animate:{rotate:[0,5,-5,0]},transition:{duration:2,repeat:1/0},children:e.jsx(ta,{className:"w-10 h-10 text-white"})}),e.jsx("h1",{className:"text-gray-900 mb-2",children:"Bitcoin Wheel Strategy"}),e.jsx("p",{className:"text-gray-600",children:a==="signup"?"Crea il tuo account per iniziare":"Bentornato! Accedi al tuo account"})]}),e.jsx(ge,{children:m&&e.jsx(u.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"mb-6",children:e.jsxs(et,{variant:"destructive",children:[e.jsx(Je,{className:"h-4 w-4"}),e.jsx(tt,{children:m})]})})}),e.jsxs(et,{className:"mb-4 border-orange-300 bg-orange-50",children:[e.jsx(Je,{className:"h-4 w-4 text-orange-600"}),e.jsxs(tt,{className:"text-orange-900 text-sm",children:[e.jsx("strong",{children:"Google OAuth richiede configurazione aggiuntiva."}),e.jsx("br",{}),"Usa email/password (funziona subito) o segui la guida ",e.jsx("code",{children:"GOOGLE_OAUTH_SETUP.md"})]})]}),e.jsx("div",{className:"space-y-3 mb-6",children:e.jsxs(N,{type:"button",variant:"outline",className:"w-full h-12 border-2",onClick:b,disabled:n,children:[n?e.jsx(re,{className:"w-5 h-5 mr-2 animate-spin"}):e.jsx(si,{className:"w-5 h-5 mr-2"}),"Continua con Google"]})}),e.jsxs("div",{className:"relative mb-6",children:[e.jsx(zs,{}),e.jsx("span",{className:"absolute left-1/2 top-1/2 -translate-x-1/2 -translate-y-1/2 bg-white px-3 text-sm text-gray-500",children:"oppure"})]}),e.jsxs("form",{onSubmit:h,className:"space-y-4",children:[a==="signup"&&e.jsxs("div",{children:[e.jsxs(R,{htmlFor:"name",className:"flex items-center gap-2 mb-2",children:[e.jsx(it,{className:"w-4 h-4"}),"Nome"]}),e.jsx($e,{id:"name",type:"text",placeholder:"Il tuo nome",value:l.name,onChange:x=>c({...l,name:x.target.value}),required:!0,disabled:n,className:"h-12"})]}),e.jsxs("div",{children:[e.jsxs(R,{htmlFor:"email",className:"flex items-center gap-2 mb-2",children:[e.jsx(ri,{className:"w-4 h-4"}),"Email"]}),e.jsx($e,{id:"email",type:"email",placeholder:"tuo@email.com",value:l.email,onChange:x=>c({...l,email:x.target.value}),required:!0,disabled:n,className:"h-12"})]}),e.jsxs("div",{children:[e.jsxs(R,{htmlFor:"password",className:"flex items-center gap-2 mb-2",children:[e.jsx(we,{className:"w-4 h-4"}),"Password"]}),e.jsx($e,{id:"password",type:"password",placeholder:"â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢",value:l.password,onChange:x=>c({...l,password:x.target.value}),required:!0,disabled:n,minLength:6,className:"h-12"}),a==="signup"&&e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Minimo 6 caratteri"})]}),e.jsx(N,{type:"submit",className:"w-full h-12 bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-700 hover:to-purple-700 text-white",disabled:n,children:n?e.jsxs(e.Fragment,{children:[e.jsx(re,{className:"w-5 h-5 mr-2 animate-spin"}),a==="signup"?"Creazione account...":"Accesso..."]}):e.jsx(e.Fragment,{children:a==="signup"?e.jsxs(e.Fragment,{children:[e.jsx(U,{className:"w-5 h-5 mr-2"}),"Crea Account"]}):"Accedi"})})]}),e.jsx("div",{className:"mt-6 text-center",children:e.jsx("button",{type:"button",onClick:p,disabled:n,className:"text-sm text-blue-600 hover:text-blue-700 font-medium disabled:opacity-50",children:a==="signup"?e.jsxs(e.Fragment,{children:["Hai giÃ  un account? ",e.jsx("span",{className:"underline",children:"Accedi"})]}):e.jsxs(e.Fragment,{children:["Non hai un account? ",e.jsx("span",{className:"underline",children:"Registrati"})]})})}),a==="signup"&&e.jsxs("p",{className:"mt-6 text-xs text-gray-500 text-center",children:["Creando un account accetti i nostri"," ",e.jsx("a",{href:"#",className:"text-blue-600 hover:underline",children:"Termini di Servizio"})," ","e la"," ",e.jsx("a",{href:"#",className:"text-blue-600 hover:underline",children:"Privacy Policy"})]})]}),e.jsx(u.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.5},className:"mt-6 text-center",children:e.jsx(k,{className:"p-4 bg-white/90 backdrop-blur",children:e.jsxs("p",{className:"text-sm text-gray-700",children:[e.jsx("span",{className:"font-semibold",children:"ðŸ’¡ Demo Mode:"})," Puoi anche"," ",e.jsx("button",{onClick:t,className:"text-blue-600 hover:underline font-medium",children:"continuare senza registrarti"})," ","(dati salvati solo localmente)"]})})})]})})}const Cs="modulepreload",Is=function(t){return"/"+t},Vt={},xa=function(a,i,n){let s=Promise.resolve();if(i&&i.length>0){let r=function(d){return Promise.all(d.map(h=>Promise.resolve(h).then(b=>({status:"fulfilled",value:b}),b=>({status:"rejected",reason:b}))))};document.getElementsByTagName("link");const l=document.querySelector("meta[property=csp-nonce]"),c=l?.nonce||l?.getAttribute("nonce");s=r(i.map(d=>{if(d=Is(d),d in Vt)return;Vt[d]=!0;const h=d.endsWith(".css"),b=h?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${d}"]${b}`))return;const p=document.createElement("link");if(p.rel=h?"stylesheet":Cs,h||(p.as="script"),p.crossOrigin="",p.href=d,c&&p.setAttribute("nonce",c),document.head.appendChild(p),h)return new Promise((x,g)=>{p.addEventListener("load",x),p.addEventListener("error",()=>g(new Error(`Unable to preload CSS for ${d}`)))})}))}function m(r){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=r,window.dispatchEvent(l),!l.defaultPrevented)throw r}return s.then(r=>{for(const l of r||[])l.status==="rejected"&&m(l.reason);return a().catch(m)})};function Ts(){return e.jsxs("div",{className:"flex items-start gap-2 mb-4",children:[e.jsx("div",{className:"w-8 h-8 rounded-full bg-gradient-to-br from-blue-500 to-purple-500 flex-shrink-0 flex items-center justify-center",children:e.jsx(ae,{className:"w-4 h-4 text-white"})}),e.jsx("div",{className:"bg-gray-100 rounded-2xl rounded-tl-sm px-4 py-3",children:e.jsx("div",{className:"flex gap-1.5",children:[0,1,2].map(t=>e.jsx(u.div,{className:"w-2 h-2 bg-gray-400 rounded-full",animate:{y:[0,-6,0],opacity:[.4,1,.4]},transition:{duration:.8,repeat:1/0,delay:t*.15,ease:"easeInOut"}},t))})})]})}const As="/mascot-excited.png",Ps="/mascot-normal.png",Ls="/mascot-thinking.png",$s="/mascot-disappointed.png",Es=Ps,qs=$s,Dt=As,_s=Ls;function ha({lessonContext:t}){const[a,i]=o.useState(!1),[n,s]=o.useState(!1),[m,r]=o.useState([]),[l,c]=o.useState(""),[d,h]=o.useState(!1),[b,p]=o.useState(!1),x=o.useRef(null),g=o.useRef(null),v=la(),P=ca(),{progress:z}=ze(),{emotion:j,message:y,setActivity:w}=ra(),[L]=o.useState(()=>localStorage.getItem("mascotSoundEnabled")!=="false"),_=q=>{L&&q()};o.useEffect(()=>{const q=localStorage.getItem("btc-wheel-chat-history");if(q)try{const D=JSON.parse(q);r(D.map(ne=>({...ne,timestamp:new Date(ne.timestamp)})))}catch(D){console.error("Error loading chat history:",D)}},[]),o.useEffect(()=>{m.length>0&&localStorage.setItem("btc-wheel-chat-history",JSON.stringify(m))},[m]),o.useEffect(()=>{x.current?.scrollIntoView({behavior:"smooth"})},[m]),o.useEffect(()=>{d?w("ai_thinking"):l.length>0?w("ai_listening"):m.length>0&&m[m.length-1]?.role==="assistant"&&w("ai_responding",3e3)},[d,l.length,m.length,w]);const H=()=>{switch(j){case"disappointed":return qs;case"encouraging":return Dt;case"excited":case"celebrating":return Dt;case"thinking":return _s;case"normal":case"teaching":case"sleeping":default:return Es}},B=()=>{if(n){s(!1),C.success("Mascotte ripristinata!");return}a?(i(!1),w("idle"),_(()=>P.click()),v.light()):(i(!0),_(()=>{P.click(),P.tipShow()}),v.medium(),m.length===0&&w("excited",2e3))},J=()=>{i(!1),w("idle"),_(()=>P.click()),v.light()},de=async()=>{if(!l.trim()||d)return;const q={id:Date.now().toString(),role:"user",content:l.trim(),timestamp:new Date};r(D=>[...D,q]),c(""),h(!0),w("ai_thinking"),_(()=>P.click()),v.light();try{const{projectId:D,publicAnonKey:ne}=await xa(async()=>{const{projectId:f,publicAnonKey:S}=await Promise.resolve().then(()=>sa);return{projectId:f,publicAnonKey:S}},void 0),ie=`https://${D}.supabase.co/functions/v1/make-server-7c0f82ca/chat-tutor`,ve=m.slice(-4).map(f=>({role:f.role,content:f.content})),Se={userLevel:z.level,userXP:z.xp,completedLessons:z.completedLessons.length,totalLessons:15,currentStreak:z.streak,badges:z.badges,lessonContext:t,conversationHistory:ve},se=await fetch(ie,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${ne}`},body:JSON.stringify({message:q.content,context:Se})});if(!se.ok)throw new Error(`HTTP ${se.status}`);const pe=await se.json();if(pe.response){const f={id:(Date.now()+1).toString(),role:"assistant",content:pe.response,timestamp:new Date};r(S=>[...S,f]),w("ai_responding",3e3),_(()=>P.excited()),v.success(),(pe.response.includes("Bravo")||pe.response.includes("Ottimo"))&&w("celebrating",1500)}}catch(D){console.error("AI Chat error:",D);const ne={id:(Date.now()+1).toString(),role:"assistant",content:"Mi dispiace, ho avuto un problema tecnico. Riprova tra poco! ðŸ”§",timestamp:new Date};r(ie=>[...ie,ne]),w("disappointed",3e3),C.error("Errore di connessione AI"),_(()=>P.disappointed()),v.error()}finally{h(!1)}},te=()=>{r([]),localStorage.removeItem("btc-wheel-chat-history"),C.success("Chat cancellata"),_(()=>P.tipDismiss()),v.light(),w("idle")},fe=q=>{q.key==="Enter"&&!q.shiftKey&&(q.preventDefault(),de())},ee=["Come funziona la Wheel Strategy?","Cosa sono le opzioni cash-secured put?","Quando dovrei vendere covered call?"],me=()=>{switch(j){case"thinking":return"animate-pulse";case"celebrating":case"excited":return"animate-bounce";case"teaching":return"mascot-teaching";case"sleeping":return"mascot-sleeping";default:return"mascot-idle"}},ye=(()=>{switch(j){case"excited":case"celebrating":return{gradient:"from-yellow-500/20 to-green-500/20",border:"border-yellow-500/30",glow:"shadow-yellow-500/20",ring:"bg-yellow-400"};case"disappointed":case"encouraging":return{gradient:"from-orange-500/20 to-red-500/20",border:"border-orange-500/30",glow:"shadow-orange-500/20",ring:"bg-orange-400"};case"thinking":return{gradient:"from-purple-500/20 to-blue-500/20",border:"border-purple-500/30",glow:"shadow-purple-500/20",ring:"bg-purple-400"};case"teaching":return{gradient:"from-blue-400/20 to-cyan-400/20",border:"border-blue-400/30",glow:"shadow-blue-400/20",ring:"bg-blue-300"};case"sleeping":return{gradient:"from-gray-400/20 to-gray-500/20",border:"border-gray-400/30",glow:"shadow-gray-400/20",ring:"bg-gray-300"};default:return{gradient:"from-blue-500/20 to-purple-500/20",border:"border-blue-500/30",glow:"shadow-blue-500/20",ring:"bg-blue-400"}}})();return e.jsxs(e.Fragment,{children:[e.jsx("style",{children:`
        @keyframes float-idle {
          0%, 100% { transform: translateY(0px) rotate(0deg); }
          50% { transform: translateY(-12px) rotate(2deg); }
        }
        
        @keyframes listening {
          0%, 100% { transform: scale(1) rotate(0deg); }
          25% { transform: scale(1.05) rotate(-2deg); }
          75% { transform: scale(1.05) rotate(2deg); }
        }
        
        @keyframes thinking-head {
          0%, 100% { transform: rotate(-5deg); }
          50% { transform: rotate(5deg); }
        }
        
        .mascot-idle {
          animation: float-idle 3s ease-in-out infinite;
        }
        
        .mascot-listening {
          animation: listening 2s ease-in-out infinite;
        }
        
        .mascot-thinking {
          animation: thinking-head 0.8s ease-in-out infinite;
        }
      `}),e.jsx("div",{className:"fixed bottom-20 md:bottom-8 right-4 md:right-8 z-50 safe-area-bottom",children:e.jsxs("div",{className:"relative",children:[e.jsx(ge,{children:a&&e.jsx(u.div,{initial:{opacity:0,y:20,scale:.9},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:10,scale:.95},transition:{type:"spring",bounce:.3,duration:.4},className:"absolute bottom-40 md:bottom-64 right-0 w-[calc(100vw-2rem)] md:w-[600px] max-w-2xl",children:e.jsxs(k,{className:"backdrop-blur-xl bg-white/95 shadow-2xl border-2 border-blue-200/50",children:[e.jsx("div",{className:"bg-gradient-to-r from-blue-600 to-purple-600 p-4 rounded-t-lg",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"relative w-12 h-12",children:[e.jsx("img",{src:H(),alt:"Prof Satoshi AI",className:"w-full h-full object-contain"}),e.jsx("div",{className:"absolute bottom-0 right-0 w-3 h-3 bg-green-500 rounded-full border-2 border-white"})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-white",children:"Prof Satoshi AI"}),e.jsx("p",{className:"text-xs text-blue-100",children:"Sempre qui per aiutarti!"})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[m.length>0&&e.jsx(N,{size:"sm",variant:"ghost",onClick:te,className:"text-white hover:bg-white/20",children:e.jsx(ni,{className:"w-4 h-4"})}),e.jsx(N,{size:"sm",variant:"ghost",onClick:J,className:"text-white hover:bg-white/20",children:e.jsx(qe,{className:"w-4 h-4"})})]})]})}),e.jsx("div",{className:"h-[400px] md:h-[500px] overflow-y-auto p-4 space-y-4",children:m.length===0?e.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-center space-y-4",children:[e.jsx(u.div,{animate:{rotate:[0,360]},transition:{duration:20,repeat:1/0,ease:"linear"},className:"w-16 h-16 bg-gradient-to-br from-blue-500 to-purple-500 rounded-full flex items-center justify-center",children:e.jsx(U,{className:"w-8 h-8 text-white"})}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-gray-900 mb-2",children:"Ciao! ðŸ‘‹ Sono Prof Satoshi!"}),e.jsxs("p",{className:"text-sm text-gray-600 mb-4",children:["Il tuo AI tutor personale per la Bitcoin Wheel Strategy.",e.jsx("br",{}),"Chiedimi qualsiasi cosa!"]})]}),e.jsxs("div",{className:"flex flex-wrap gap-2 justify-center",children:[t&&e.jsxs(O,{variant:"outline",className:"bg-blue-50 border-blue-200",children:[e.jsx(ae,{className:"w-3 h-3 mr-1"}),"Contesto: Lezione ",t.lessonId]}),e.jsxs(O,{variant:"outline",className:"bg-purple-50 border-purple-200",children:[e.jsx(Ne,{className:"w-3 h-3 mr-1"}),"Livello ",z.level]}),e.jsxs(O,{variant:"outline",className:"bg-orange-50 border-orange-200",children:[e.jsx(K,{className:"w-3 h-3 mr-1"}),z.completedLessons.length,"/15 Lezioni"]})]}),e.jsxs("div",{className:"w-full space-y-2",children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Prova a chiedermi:"}),ee.map((q,D)=>e.jsx("button",{onClick:()=>c(q),className:"w-full text-left p-3 bg-gradient-to-r from-blue-50 to-purple-50 hover:from-blue-100 hover:to-purple-100 rounded-lg text-sm text-gray-700 transition-all border border-blue-200/50 hover:border-blue-300",children:q},D))]})]}):e.jsxs(e.Fragment,{children:[m.map(q=>e.jsx(u.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:`flex ${q.role==="user"?"justify-end":"justify-start"}`,children:e.jsxs("div",{className:`max-w-[80%] rounded-2xl p-3 ${q.role==="user"?"bg-gradient-to-r from-blue-600 to-purple-600 text-white":"bg-gray-100 text-gray-900"}`,children:[e.jsx("p",{className:"text-sm whitespace-pre-wrap",children:q.content}),e.jsx("p",{className:`text-xs mt-1 ${q.role==="user"?"text-blue-100":"text-gray-500"}`,children:q.timestamp.toLocaleTimeString("it-IT",{hour:"2-digit",minute:"2-digit"})})]})},q.id)),d&&e.jsx(Ts,{}),e.jsx("div",{ref:x})]})}),e.jsxs("div",{className:"border-t p-4 bg-gray-50/50 rounded-b-lg",children:[e.jsxs("div",{className:"flex gap-2",children:[e.jsx("textarea",{ref:g,value:l,onChange:q=>c(q.target.value),onKeyDown:fe,placeholder:"Scrivi la tua domanda...",className:"flex-1 resize-none rounded-lg border border-gray-300 p-3 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 min-h-[44px] max-h-[120px]",rows:1,disabled:d}),e.jsx(N,{onClick:de,disabled:!l.trim()||d,className:"bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-700 hover:to-purple-700 px-4",children:e.jsx(oi,{className:"w-4 h-4"})})]}),e.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"Premi Invio per inviare, Shift+Invio per andare a capo"})]})]})})}),e.jsxs(u.button,{onClick:B,onHoverStart:()=>p(!0),onHoverEnd:()=>p(!1),whileHover:{scale:1.1},whileTap:{scale:.9},animate:a?{}:{scale:[1,1.03,1],y:[0,-8,0]},transition:{scale:{duration:2.5,repeat:1/0,ease:"easeInOut"},y:{duration:3.5,repeat:1/0,ease:"easeInOut"}},className:`relative cursor-pointer group touch-manipulation transition-all ${n?"w-14 h-14 md:w-16 md:h-16":"w-32 h-32 md:w-56 md:h-56"}`,"aria-label":a?"Chiudi AI Tutor":"Apri AI Tutor",onDoubleClick:()=>s(!n),children:[!a&&e.jsxs(e.Fragment,{children:[e.jsx(u.div,{className:`absolute inset-0 rounded-full ${ye.ring} opacity-30`,animate:{scale:[1,1.3,1],opacity:[.3,0,.3]},transition:{duration:2,repeat:1/0,ease:"easeInOut"}}),e.jsx(u.div,{className:`absolute inset-0 rounded-full ${ye.ring} opacity-20`,animate:{scale:[1,1.5,1],opacity:[.2,0,.2]},transition:{duration:2,repeat:1/0,ease:"easeInOut",delay:.5}})]}),(b||a)&&e.jsx(u.div,{className:`absolute inset-0 rounded-full bg-gradient-to-br ${ye.gradient} blur-xl`,initial:{opacity:0},animate:{opacity:1},transition:{duration:.3}}),e.jsx(ge,{children:b&&!a&&y&&e.jsxs(u.div,{initial:{opacity:0,y:10,scale:.9},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:10,scale:.9},transition:{type:"spring",bounce:.4,duration:.3},className:"absolute -top-16 md:-top-20 left-1/2 transform -translate-x-1/2 px-4 py-2 bg-white rounded-2xl shadow-xl border-2 border-blue-200 whitespace-nowrap z-50",children:[e.jsx("p",{className:"text-sm text-gray-800",children:y}),e.jsx("div",{className:"absolute bottom-0 left-1/2 transform -translate-x-1/2 translate-y-1/2 rotate-45 w-3 h-3 bg-white border-r-2 border-b-2 border-blue-200"})]})}),e.jsx(u.div,{className:`relative w-full h-full flex items-center justify-center ${me()}`,children:e.jsx(u.img,{src:H(),alt:"Prof Satoshi AI Mascot",className:"w-full h-full object-contain",style:{filter:"drop-shadow(0 15px 30px rgba(0, 0, 0, 0.3))"},initial:{scale:.9,opacity:.7},animate:{scale:1,opacity:1},transition:{type:"spring",stiffness:300,damping:20}})},j),j==="thinking"&&e.jsx(e.Fragment,{children:[...Array(3)].map((q,D)=>e.jsx(u.div,{className:"absolute w-3 h-3 bg-purple-400 rounded-full",style:{top:`${30+D*15}%`,left:"20%"},animate:{scale:[0,1,0],opacity:[0,1,0],x:[-10,0],y:[-20,-40]},transition:{duration:1.5,repeat:1/0,delay:D*.3,ease:"easeOut"}},D))}),(j==="excited"||j==="celebrating")&&e.jsx(e.Fragment,{children:[...Array(6)].map((q,D)=>e.jsx(u.div,{className:"absolute w-2 h-2 bg-yellow-400 rounded-full",style:{top:`${20+Math.random()*60}%`,left:`${20+Math.random()*60}%`},animate:{scale:[0,1,0],opacity:[0,1,0],y:[0,-20]},transition:{duration:1.5,repeat:1/0,delay:D*.2,ease:"easeOut"}},D))}),e.jsx(u.div,{className:"absolute top-2 right-2 md:top-4 md:right-4 px-3 py-1 bg-gradient-to-r from-blue-600 to-purple-600 text-white rounded-full text-xs shadow-lg border-2 border-white",animate:{scale:a?1:[1,1.1,1]},transition:{duration:2,repeat:a?0:1/0},children:"AI"}),!a&&!n&&e.jsx(u.div,{onClick:q=>{q.stopPropagation(),s(!0),C.info("Mascotte minimizzata. Clicca per ripristinare.")},className:"absolute -top-2 -left-2 w-8 h-8 bg-emerald-600 hover:bg-emerald-700 rounded-full flex items-center justify-center shadow-lg border-2 border-white z-10 cursor-pointer",whileHover:{scale:1.1},whileTap:{scale:.9},title:"Riduci mascotte",children:e.jsx("span",{className:"text-white text-xs font-bold",children:"âˆ’"})}),n&&e.jsx(u.div,{className:"absolute -top-1 -right-1 w-6 h-6 bg-emerald-600 rounded-full flex items-center justify-center shadow-lg border-2 border-white",animate:{scale:[1,1.2,1]},transition:{duration:1.5,repeat:1/0},children:e.jsx("span",{className:"text-white text-xs font-bold",children:"+"})})]})]})})]})}function Bs(){const[t,a]=o.useState(null),[i,n]=o.useState(!1),[s,m]=o.useState(!1),[r,l]=o.useState(!1);o.useEffect(()=>{if(window.matchMedia("(display-mode: standalone)").matches){l(!0);return}const h=/iPad|iPhone|iPod/.test(navigator.userAgent);m(h);const b=x=>{x.preventDefault(),a(x),setTimeout(()=>{n(!0)},1e4)};window.addEventListener("beforeinstallprompt",b);const p=localStorage.getItem("pwa-install-dismissed");if(p){const x=new Date(p);(new Date().getTime()-x.getTime())/(1e3*3600*24)<7&&n(!1)}return()=>window.removeEventListener("beforeinstallprompt",b)},[]);const c=async()=>{if(!t)return;t.prompt();const{outcome:h}=await t.userChoice;h==="accepted"&&(console.log("User accepted the install prompt"),l(!0)),a(null),n(!1)},d=()=>{n(!1),localStorage.setItem("pwa-install-dismissed",new Date().toISOString())};return r||!i?null:e.jsx("div",{className:"fixed bottom-20 md:bottom-4 left-4 right-4 md:left-auto md:right-4 md:w-96 z-50 animate-in slide-in-from-bottom-4",children:e.jsx(k,{className:"p-4 bg-gradient-to-r from-blue-600 to-orange-500 border-none shadow-2xl",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"p-2 bg-white/20 rounded-lg",children:e.jsx(li,{className:"w-6 h-6 text-white"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-white mb-1",children:"Installa l'App"}),e.jsx("p",{className:"text-white/90 text-sm mb-3",children:s?"Tocca il pulsante 'Condividi' e seleziona 'Aggiungi a Home' per installare l'app.":"Installa btcwheel sul tuo dispositivo per un'esperienza migliore!"}),!s&&e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(N,{onClick:c,size:"sm",className:"bg-white text-blue-600 hover:bg-white/90",children:[e.jsx(ci,{className:"w-4 h-4 mr-2"}),"Installa"]}),e.jsx(N,{onClick:d,size:"sm",variant:"ghost",className:"text-white hover:bg-white/20",children:"Dopo"})]})]}),e.jsx("button",{onClick:d,className:"p-1 hover:bg-white/20 rounded transition-colors",children:e.jsx(qe,{className:"w-5 h-5 text-white"})})]})})})}function Os(){const[t,a]=o.useState(!1),[i,n]=o.useState(null);o.useEffect(()=>{},[]);const s=()=>{i?.waiting&&(i.waiting.postMessage({type:"SKIP_WAITING"}),a(!1),C.success("Aggiornamento in corso...",{description:"L'app verrÃ  ricaricata tra poco"}))},m=()=>{a(!1),C.info("Aggiornamento rimandato",{description:"Ricarica la pagina manualmente per aggiornare"})};return t?e.jsx("div",{className:"fixed top-4 left-4 right-4 md:left-auto md:right-4 md:w-96 z-50 animate-in slide-in-from-top-4",children:e.jsx(k,{className:"p-4 bg-white border-blue-200 shadow-lg",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:e.jsx(rt,{className:"w-5 h-5 text-blue-600"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-blue-900 mb-1",children:"Aggiornamento Disponibile"}),e.jsx("p",{className:"text-slate-600 text-sm mb-3",children:"Ãˆ disponibile una nuova versione dell'app con miglioramenti e nuove funzionalitÃ !"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(N,{onClick:s,size:"sm",className:"bg-blue-600 hover:bg-blue-700",children:"Aggiorna Ora"}),e.jsx(N,{onClick:m,size:"sm",variant:"outline",children:"Dopo"})]})]})]})})}):null}function Te(){return o.useEffect(()=>{const t=document.querySelector('meta[name="viewport"]');t&&t.setAttribute("content","width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no"),[{name:"apple-mobile-web-app-capable",content:"yes"},{name:"apple-mobile-web-app-status-bar-style",content:"black-translucent"},{name:"apple-mobile-web-app-title",content:"BTC Wheel"},{name:"mobile-web-app-capable",content:"yes"},{name:"theme-color",content:"#3b82f6"}].forEach(r=>{let l=document.querySelector(`meta[name="${r.name}"]`);l||(l=document.createElement("meta"),l.setAttribute("name",r.name),document.head.appendChild(l)),l.setAttribute("content",r.content)}),[{media:"(device-width: 320px) and (device-height: 568px) and (-webkit-device-pixel-ratio: 2)",href:"/splash/iphone5_splash.png"},{media:"(device-width: 375px) and (device-height: 667px) and (-webkit-device-pixel-ratio: 2)",href:"/splash/iphone6_splash.png"},{media:"(device-width: 414px) and (device-height: 736px) and (-webkit-device-pixel-ratio: 3)",href:"/splash/iphoneplus_splash.png"},{media:"(device-width: 375px) and (device-height: 812px) and (-webkit-device-pixel-ratio: 3)",href:"/splash/iphonex_splash.png"},{media:"(device-width: 414px) and (device-height: 896px) and (-webkit-device-pixel-ratio: 2)",href:"/splash/iphonexr_splash.png"},{media:"(device-width: 414px) and (device-height: 896px) and (-webkit-device-pixel-ratio: 3)",href:"/splash/iphonexsmax_splash.png"},{media:"(device-width: 768px) and (device-height: 1024px) and (-webkit-device-pixel-ratio: 2)",href:"/splash/ipad_splash.png"},{media:"(device-width: 834px) and (device-height: 1112px) and (-webkit-device-pixel-ratio: 2)",href:"/splash/ipadpro1_splash.png"},{media:"(device-width: 1024px) and (device-height: 1366px) and (-webkit-device-pixel-ratio: 2)",href:"/splash/ipadpro3_splash.png"}].forEach(r=>{let l=document.querySelector(`link[media="${r.media}"]`);l||(l=document.createElement("link"),l.setAttribute("rel","apple-touch-startup-image"),l.setAttribute("media",r.media),document.head.appendChild(l)),l.setAttribute("href",r.href)});const n=document.createElement("link");n.setAttribute("rel","apple-touch-icon"),n.setAttribute("href","/icons/icon-192x192.png"),document.head.appendChild(n),document.body.style.overscrollBehavior="none","vibrate"in navigator&&window.addEventListener("touchstart",()=>{});const s=()=>{console.log("App is online")},m=()=>{console.log("App is offline")};return window.addEventListener("online",s),window.addEventListener("offline",m),()=>{window.removeEventListener("online",s),window.removeEventListener("offline",m)}},[]),null}function Ms(){return o.useEffect(()=>{let t=0;const a=d=>{if(d.touches.length>1)return;(window.pageYOffset||document.documentElement.scrollTop)===0&&d.touches[0].clientY>t&&d.preventDefault()},i=d=>{t=d.touches[0].clientY},n=d=>{d.touches[0].clientY},s=d=>{"vibrate"in navigator&&d.matches('button, a, [role="button"]')&&navigator.vibrate(10)},m=d=>{d.target instanceof Element&&s(d.target)};document.addEventListener("touchstart",i,{passive:!1}),document.addEventListener("touchmove",n,{passive:!1}),document.addEventListener("touchmove",a,{passive:!1}),document.addEventListener("click",m);const r=()=>{C.success("Sei di nuovo online! ðŸŒ",{description:"I tuoi progressi verranno sincronizzati"})},l=()=>{C.info("Sei offline ðŸ“µ",{description:"I progressi verranno salvati localmente"})};window.addEventListener("online",r),window.addEventListener("offline",l);const c=d=>{d.preventDefault()};return document.addEventListener("contextmenu",c),()=>{document.removeEventListener("touchstart",i),document.removeEventListener("touchmove",n),document.removeEventListener("touchmove",a),document.removeEventListener("click",m),window.removeEventListener("online",r),window.removeEventListener("offline",l),document.removeEventListener("contextmenu",c)}},[]),null}function Rs(){const[t,a]=o.useState(!1),[i,n]=o.useState(null),s=async()=>{a(!0);const r={configCheck:!1,projectId:null,hasAnonKey:!1,supabaseUrl:null,clientCreated:!1,pingSuccess:!1,error:null};try{if(r.configCheck=M,r.projectId=ke,r.hasAnonKey=!!(xe&&xe.length>0),r.supabaseUrl=`https://${ke}.supabase.co`,r.clientCreated=!!$,$&&M)try{const{data:l,error:c}=await $.auth.getSession();c?r.error=c.message:r.pingSuccess=!0}catch(l){r.error=l.message}}catch(l){r.error=l.message}n(r),a(!1)};if(o.useEffect(()=>{s()},[]),!i)return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-600 via-purple-600 to-orange-500 flex items-center justify-center p-4",children:e.jsx(k,{className:"p-8 max-w-2xl w-full",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(re,{className:"w-6 h-6 animate-spin text-blue-600"}),e.jsx("p",{children:"Testing Supabase connection..."})]})})});const m=i.configCheck&&i.clientCreated&&i.pingSuccess;return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-600 via-purple-600 to-orange-500 flex items-center justify-center p-4",children:e.jsxs(k,{className:"p-8 max-w-2xl w-full",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[e.jsx(gt,{className:"w-8 h-8 text-blue-600"}),e.jsx("h1",{className:"text-gray-900",children:"Supabase Connection Test"})]}),e.jsx(et,{className:`mb-6 ${m?"border-green-500 bg-green-50":"border-orange-500 bg-orange-50"}`,children:e.jsxs("div",{className:"flex items-center gap-2",children:[m?e.jsx(Q,{className:"w-5 h-5 text-green-600"}):e.jsx(Z,{className:"w-5 h-5 text-orange-600"}),e.jsx(tt,{className:m?"text-green-900":"text-orange-900",children:m?"âœ… Supabase is configured correctly!":"âš ï¸ Some tests failed. See details below."})]})}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-start gap-3 p-4 bg-gray-50 rounded-lg",children:[i.configCheck?e.jsx(Q,{className:"w-5 h-5 text-green-600 mt-0.5"}):e.jsx(Z,{className:"w-5 h-5 text-red-600 mt-0.5"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-medium text-gray-900",children:"Configuration Check"}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:i.configCheck?"Credentials loaded successfully":"Missing credentials in info.tsx"})]})]}),e.jsxs("div",{className:"flex items-start gap-3 p-4 bg-gray-50 rounded-lg",children:[i.projectId?e.jsx(Q,{className:"w-5 h-5 text-green-600 mt-0.5"}):e.jsx(Z,{className:"w-5 h-5 text-red-600 mt-0.5"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-medium text-gray-900",children:"Project ID"}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:i.projectId?e.jsx("code",{className:"bg-white px-2 py-1 rounded",children:i.projectId}):"Not found"})]})]}),e.jsxs("div",{className:"flex items-start gap-3 p-4 bg-gray-50 rounded-lg",children:[i.hasAnonKey?e.jsx(Q,{className:"w-5 h-5 text-green-600 mt-0.5"}):e.jsx(Z,{className:"w-5 h-5 text-red-600 mt-0.5"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-medium text-gray-900",children:"Anon Key"}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:i.hasAnonKey?e.jsx(e.Fragment,{children:e.jsxs("code",{className:"bg-white px-2 py-1 rounded",children:[xe.substring(0,20),"...",xe.slice(-10)]})}):"Not found"})]})]}),e.jsxs("div",{className:"flex items-start gap-3 p-4 bg-gray-50 rounded-lg",children:[i.supabaseUrl?e.jsx(Q,{className:"w-5 h-5 text-green-600 mt-0.5"}):e.jsx(Z,{className:"w-5 h-5 text-red-600 mt-0.5"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-medium text-gray-900",children:"Supabase URL"}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:i.supabaseUrl?e.jsx("code",{className:"bg-white px-2 py-1 rounded",children:i.supabaseUrl}):"Could not construct URL"})]})]}),e.jsxs("div",{className:"flex items-start gap-3 p-4 bg-gray-50 rounded-lg",children:[i.clientCreated?e.jsx(Q,{className:"w-5 h-5 text-green-600 mt-0.5"}):e.jsx(Z,{className:"w-5 h-5 text-red-600 mt-0.5"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-medium text-gray-900",children:"Supabase Client"}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:i.clientCreated?"Client created successfully":"Failed to create client"})]})]}),e.jsxs("div",{className:"flex items-start gap-3 p-4 bg-gray-50 rounded-lg",children:[i.pingSuccess?e.jsx(Q,{className:"w-5 h-5 text-green-600 mt-0.5"}):e.jsx(Z,{className:"w-5 h-5 text-red-600 mt-0.5"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-medium text-gray-900",children:"Server Connection"}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:i.pingSuccess?"Successfully connected to Supabase server":i.error||"Could not reach server"})]})]})]}),i.error&&e.jsxs(et,{variant:"destructive",className:"mt-6",children:[e.jsx(Z,{className:"h-4 w-4"}),e.jsxs(tt,{children:[e.jsx("strong",{children:"Error Details:"}),e.jsx("pre",{className:"mt-2 text-xs overflow-auto",children:i.error})]})]}),e.jsxs("div",{className:"flex gap-3 mt-6",children:[e.jsx(N,{onClick:s,disabled:t,className:"flex-1",children:t?e.jsxs(e.Fragment,{children:[e.jsx(re,{className:"w-4 h-4 mr-2 animate-spin"}),"Testing..."]}):e.jsxs(e.Fragment,{children:[e.jsx(ea,{className:"w-4 h-4 mr-2"}),"Re-run Tests"]})}),e.jsx(N,{onClick:()=>window.location.href="/",variant:"outline",children:"Back to App"})]}),e.jsxs("div",{className:"mt-6 p-4 bg-blue-50 border border-blue-200 rounded-lg",children:[e.jsx("p",{className:"text-sm text-blue-900",children:e.jsx("strong",{children:"ðŸ’¡ Next Steps:"})}),e.jsx("ul",{className:"text-sm text-blue-800 mt-2 space-y-1 ml-4 list-disc",children:m?e.jsxs(e.Fragment,{children:[e.jsx("li",{children:"âœ… Authentication is ready!"}),e.jsx("li",{children:"âœ… Try creating an account with email/password"}),e.jsx("li",{children:"âš ï¸ Google OAuth requires additional setup (see GOOGLE_OAUTH_SETUP.md)"})]}):e.jsxs(e.Fragment,{children:[e.jsx("li",{children:"âŒ Check if /utils/supabase/info.tsx exists"}),e.jsx("li",{children:"âŒ Verify credentials in info.tsx"}),e.jsx("li",{children:"âŒ Contact support if problem persists"})]})})]})]})})}function Vs(){const{user:t,signInWithEmail:a,signUpWithEmail:i,signOut:n}=be(),[s,m]=o.useState(!0),[r,l]=o.useState(!1),[c,d]=o.useState([]),[h,b]=o.useState("unconfigured"),[p,x]=o.useState("test@btcwheel.com"),[g,v]=o.useState("testpassword123");o.useEffect(()=>{P()},[]);const P=async()=>{if(m(!0),!M){b("unconfigured"),m(!1);return}try{const{data:w,error:L}=await $.from("kv_store_7c0f82ca").select("count",{count:"exact",head:!0});L?(console.error("Connection error:",L),b("error")):(b("connected"),await z())}catch(w){console.error("Unexpected error:",w),b("error")}m(!1)},z=async()=>{if(!$)return;const w=["kv_store_7c0f82ca","user_progress","user_activities","leaderboard_entries","trading_simulations"],L=[];for(const _ of w)try{const{count:H,error:B}=await $.from(_).select("*",{count:"exact",head:!0});B?L.push({name:_,exists:!1,error:B.message}):L.push({name:_,exists:!0,rowCount:H||0})}catch(H){L.push({name:_,exists:!1,error:H.message})}d(L)},j=async w=>{l(!0);try{w==="signup"?(await i(p,g,"Test User")).user&&C.success("âœ… Signup funzionante!"):(await a(p,g)).user&&C.success("âœ… Login funzionante!")}catch(L){C.error("Test fallito: "+L.message)}l(!1)},y=async()=>{await n(),C.success("Logout effettuato")};return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-emerald-50 to-teal-50 p-4 md:p-8",children:e.jsxs("div",{className:"max-w-6xl mx-auto",children:[e.jsxs("div",{className:"mb-8",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx(gt,{className:"w-8 h-8 text-emerald-600"}),e.jsx("h1",{className:"text-emerald-900",children:"Supabase Status Dashboard"})]}),e.jsx("p",{className:"text-emerald-700",children:"Verifica connessione database, tabelle e autenticazione"})]}),e.jsxs(k,{className:"mb-6 p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Fe,{className:"w-6 h-6 text-emerald-600"}),e.jsx("h2",{className:"text-emerald-900",children:"Stato Connessione"})]}),e.jsx(N,{onClick:P,disabled:s,variant:"outline",size:"sm",children:s?e.jsx(re,{className:"w-4 h-4 animate-spin"}):e.jsx(rt,{className:"w-4 h-4"})})]}),s?e.jsxs("div",{className:"flex items-center gap-2 text-gray-600",children:[e.jsx(re,{className:"w-5 h-5 animate-spin"}),e.jsx("span",{children:"Controllo connessione..."})]}):e.jsxs("div",{className:"space-y-4",children:[h==="unconfigured"&&e.jsxs("div",{className:"flex items-start gap-3 p-4 bg-yellow-50 border border-yellow-200 rounded-lg",children:[e.jsx(Z,{className:"w-5 h-5 text-yellow-600 mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-yellow-900 mb-1",children:"Supabase non configurato"}),e.jsx("p",{className:"text-sm text-yellow-700",children:"Le credenziali non sono disponibili. L'app funziona in modalitÃ  locale."})]})]}),h==="error"&&e.jsxs("div",{className:"flex items-start gap-3 p-4 bg-red-50 border border-red-200 rounded-lg",children:[e.jsx(Z,{className:"w-5 h-5 text-red-600 mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-red-900 mb-1",children:"Errore di connessione"}),e.jsx("p",{className:"text-sm text-red-700",children:"Impossibile connettersi al database. Verifica le credenziali."})]})]}),h==="connected"&&e.jsxs("div",{className:"flex items-start gap-3 p-4 bg-emerald-50 border border-emerald-200 rounded-lg",children:[e.jsx(Q,{className:"w-5 h-5 text-emerald-600 mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-emerald-900 mb-1",children:"âœ… Connesso a Supabase"}),e.jsxs("p",{className:"text-sm text-emerald-700",children:["Project ID: ",e.jsx("code",{className:"bg-emerald-100 px-2 py-0.5 rounded",children:"rsmvjsokqolxgczclqjv"})]}),e.jsxs("a",{href:"https://supabase.com/dashboard/project/rsmvjsokqolxgczclqjv",target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-1 text-sm text-emerald-600 hover:text-emerald-700 mt-2",children:["Apri Dashboard Supabase",e.jsx(di,{className:"w-3 h-3"})]})]})]})]})]}),h==="connected"&&e.jsxs(k,{className:"mb-6 p-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx(At,{className:"w-6 h-6 text-emerald-600"}),e.jsx("h2",{className:"text-emerald-900",children:"Stato Tabelle Database"})]}),e.jsx("div",{className:"space-y-3",children:c.map(w=>e.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[w.exists?e.jsx(Q,{className:"w-5 h-5 text-emerald-600"}):e.jsx(Z,{className:"w-5 h-5 text-red-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-900",children:e.jsx("code",{className:"text-sm bg-gray-100 px-2 py-0.5 rounded",children:w.name})}),w.error&&e.jsx("p",{className:"text-xs text-red-600 mt-1",children:w.error})]})]}),w.exists&&e.jsxs(O,{variant:"secondary",children:[w.rowCount," ",w.rowCount===1?"riga":"righe"]})]},w.name))}),c.some(w=>!w.exists)&&e.jsxs("div",{className:"mt-4 p-4 bg-blue-50 border border-blue-200 rounded-lg",children:[e.jsx("p",{className:"text-sm text-blue-900 mb-2",children:"â„¹ï¸ Alcune tabelle non esistono ancora"}),e.jsx("p",{className:"text-xs text-blue-700",children:"Questo Ã¨ normale se Ã¨ la prima volta che usi l'app. Le tabelle verranno create automaticamente quando necessario, oppure puoi crearle manualmente dalla dashboard Supabase."})]})]}),e.jsxs(k,{className:"mb-6 p-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx(Ve,{className:"w-6 h-6 text-emerald-600"}),e.jsx("h2",{className:"text-emerald-900",children:"Autenticazione"})]}),t?e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-start gap-3 p-4 bg-emerald-50 border border-emerald-200 rounded-lg",children:[e.jsx(Q,{className:"w-5 h-5 text-emerald-600 mt-0.5"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-emerald-900 mb-1",children:"âœ… Utente autenticato"}),e.jsxs("p",{className:"text-sm text-emerald-700",children:["Email: ",e.jsx("code",{className:"bg-emerald-100 px-2 py-0.5 rounded",children:t.email})]}),e.jsxs("p",{className:"text-sm text-emerald-700 mt-1",children:["ID: ",e.jsx("code",{className:"bg-emerald-100 px-2 py-0.5 rounded text-xs",children:t.id})]})]})]}),e.jsx(N,{onClick:y,variant:"outline",className:"w-full",children:"Logout"})]}):e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-start gap-3 p-4 bg-gray-50 border border-gray-200 rounded-lg",children:[e.jsx(Z,{className:"w-5 h-5 text-gray-600 mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-900 mb-1",children:"Nessun utente autenticato"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Testa login/signup per verificare che l'autenticazione funzioni"})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-700 mb-1",children:"Email Test"}),e.jsx("input",{type:"email",value:p,onChange:w=>x(w.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500",placeholder:"test@btcwheel.com"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-700 mb-1",children:"Password Test"}),e.jsx("input",{type:"password",value:g,onChange:w=>v(w.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500",placeholder:"********"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs(N,{onClick:()=>j("signup"),disabled:r||!M,variant:"outline",children:[r?e.jsx(re,{className:"w-4 h-4 animate-spin mr-2"}):null,"Test Signup"]}),e.jsxs(N,{onClick:()=>j("signin"),disabled:r||!M,children:[r?e.jsx(re,{className:"w-4 h-4 animate-spin mr-2"}):null,"Test Accesso"]})]})]})]})]}),e.jsxs(k,{className:"p-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx(K,{className:"w-6 h-6 text-emerald-600"}),e.jsx("h2",{className:"text-emerald-900",children:"Quick Actions"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[e.jsxs(N,{variant:"outline",className:"justify-start",onClick:()=>window.open("https://supabase.com/dashboard/project/rsmvjsokqolxgczclqjv/editor","_blank"),children:[e.jsx(gt,{className:"w-4 h-4 mr-2"}),"Apri Table Editor"]}),e.jsxs(N,{variant:"outline",className:"justify-start",onClick:()=>window.open("https://supabase.com/dashboard/project/rsmvjsokqolxgczclqjv/auth/users","_blank"),children:[e.jsx(Ve,{className:"w-4 h-4 mr-2"}),"Gestisci Utenti"]}),e.jsxs(N,{variant:"outline",className:"justify-start",onClick:()=>window.open("https://supabase.com/dashboard/project/rsmvjsokqolxgczclqjv/logs/postgres-logs","_blank"),children:[e.jsx(At,{className:"w-4 h-4 mr-2"}),"Vedi Logs"]}),e.jsxs(N,{variant:"outline",className:"justify-start",onClick:()=>window.open("https://supabase.com/dashboard/project/rsmvjsokqolxgczclqjv/settings/api","_blank"),children:[e.jsx(Fe,{className:"w-4 h-4 mr-2"}),"API Settings"]})]})]})]})})}function Ds(){const[t,a]=o.useState({component:"pending",backend:"pending",context:"pending"}),[i,n]=o.useState(""),[s,m]=o.useState(!1),r=async()=>{m(!0);try{const{projectId:p,publicAnonKey:x}=await xa(async()=>{const{projectId:z,publicAnonKey:j}=await Promise.resolve().then(()=>sa);return{projectId:z,publicAnonKey:j}},void 0),g=`https://${p}.supabase.co/functions/v1/make-server-7c0f82ca/chat-tutor`,v=await fetch(g,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${x}`},body:JSON.stringify({message:"Test: Spiega brevemente cos'Ã¨ la Wheel Strategy",context:{userLevel:1,userXP:0,completedLessons:0,totalLessons:15,currentStreak:0,badges:[],lessonContext:null,conversationHistory:[]}})});if(!v.ok)throw new Error(`HTTP ${v.status}`);const P=await v.json();if(P.response)n(P.response),a(z=>({...z,backend:"success"}));else throw new Error("No response field")}catch(p){console.error("Backend test error:",p),a(x=>({...x,backend:"error"})),n(p instanceof Error?p.message:"Unknown error")}finally{m(!1)}},l=()=>{try{const p=!!ha;a(x=>({...x,component:p?"success":"error"}))}catch{a(x=>({...x,component:"error"}))}},c=()=>{try{const p={lessonId:9,lessonTitle:"Strike Selection e Delta"};a(x=>({...x,context:p.lessonId>0?"success":"error"}))}catch{a(x=>({...x,context:"error"}))}},d=async()=>{l(),c(),await r()},h=({status:p})=>p==="success"?e.jsx(Q,{className:"w-5 h-5 text-green-600"}):p==="error"?e.jsx(Z,{className:"w-5 h-5 text-red-600"}):e.jsx(re,{className:"w-5 h-5 text-gray-400 animate-spin"}),b=({status:p})=>p==="success"?e.jsx(O,{className:"bg-green-600",children:"OK"}):p==="error"?e.jsx(O,{variant:"destructive",children:"ERROR"}):e.jsx(O,{variant:"outline",children:"PENDING"});return e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-purple-50 to-orange-50 p-4 md:p-8",children:[e.jsxs("div",{className:"max-w-4xl mx-auto space-y-6",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("div",{className:"flex items-center justify-center gap-3 mb-4",children:e.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-blue-600 to-purple-600 rounded-2xl flex items-center justify-center",children:e.jsx(mi,{className:"w-8 h-8 text-white"})})}),e.jsx("h1",{className:"text-gray-900 mb-2",children:"AI Chat Tutor Test Suite"}),e.jsx("p",{className:"text-gray-600",children:"Verifica funzionamento completo del Chat Tutor con GPT-4o-mini"})]}),e.jsxs(k,{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-gray-900 mb-1",children:"Test Automatici"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Verifica componente, context e backend API"})]}),e.jsx(N,{onClick:d,disabled:s,className:"bg-blue-600 hover:bg-blue-700",children:s?e.jsxs(e.Fragment,{children:[e.jsx(re,{className:"w-4 h-4 mr-2 animate-spin"}),"Testing..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Ne,{className:"w-4 h-4 mr-2"}),"Run All Tests"]})})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(h,{status:t.component}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-900",children:"Component Loaded"}),e.jsx("p",{className:"text-xs text-gray-500",children:"MascotAI component available"})]})]}),e.jsx(b,{status:t.component})]}),e.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(h,{status:t.context}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-900",children:"Context Integration"}),e.jsx("p",{className:"text-xs text-gray-500",children:"Lesson context passing works"})]})]}),e.jsx(b,{status:t.context})]}),e.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(h,{status:t.backend}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-900",children:"Backend API"}),e.jsx("p",{className:"text-xs text-gray-500",children:"Supabase Edge Function + OpenAI"})]})]}),e.jsx(b,{status:t.backend})]})]}),i&&e.jsx("div",{className:"mt-6 p-4 bg-blue-50 border border-blue-200 rounded-lg",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(ae,{className:"w-5 h-5 text-blue-600 flex-shrink-0 mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-blue-900 mb-1",children:"AI Response:"}),e.jsx("p",{className:"text-sm text-blue-800 whitespace-pre-wrap",children:i})]})]})})]}),e.jsxs(k,{className:"p-6",children:[e.jsxs("div",{className:"flex items-start gap-3 mb-4",children:[e.jsx(ui,{className:"w-5 h-5 text-purple-600 flex-shrink-0 mt-0.5"}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-gray-900 mb-1",children:"Test Manuale"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Usa il floating button in basso a destra per testare l'AI chat:"})]})]}),e.jsxs("div",{className:"space-y-3 ml-8",children:[e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx("div",{className:"w-6 h-6 bg-blue-100 text-blue-600 rounded-full flex items-center justify-center text-xs flex-shrink-0",children:"1"}),e.jsx("p",{className:"text-sm text-gray-700",children:'Click sulla mascotte Prof Satoshi (bottom-right con badge "AI")'})]}),e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx("div",{className:"w-6 h-6 bg-blue-100 text-blue-600 rounded-full flex items-center justify-center text-xs flex-shrink-0",children:"2"}),e.jsx("p",{className:"text-sm text-gray-700",children:"Prova una delle domande suggerite o scrivi la tua"})]}),e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx("div",{className:"w-6 h-6 bg-blue-100 text-blue-600 rounded-full flex items-center justify-center text-xs flex-shrink-0",children:"3"}),e.jsx("p",{className:"text-sm text-gray-700",children:"Verifica che l'AI risponda in italiano e in modo pertinente"})]}),e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx("div",{className:"w-6 h-6 bg-blue-100 text-blue-600 rounded-full flex items-center justify-center text-xs flex-shrink-0",children:"4"}),e.jsx("p",{className:"text-sm text-gray-700",children:"Testa conversazioni multi-turn (AI deve ricordare context)"})]})]})]}),e.jsxs(k,{className:"p-6",children:[e.jsxs("div",{className:"flex items-start gap-3 mb-4",children:[e.jsx(G,{className:"w-5 h-5 text-orange-600 flex-shrink-0 mt-0.5"}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-gray-900 mb-1",children:"Features da Verificare"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Checklist funzionalitÃ  AI Chat Tutor:"})]})]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-3 ml-8",children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-700",children:[e.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full"}),"Floating button appare"]}),e.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-700",children:[e.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full"}),"Chat window si apre smooth"]}),e.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-700",children:[e.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full"}),"Welcome message mostra"]}),e.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-700",children:[e.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full"}),"Suggested questions clickable"]}),e.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-700",children:[e.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full"}),"AI risponde in italiano"]}),e.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-700",children:[e.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full"}),"Loading animation funziona"]}),e.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-700",children:[e.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full"}),"Messages salvate localStorage"]}),e.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-700",children:[e.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full"}),"Clear chat funziona"]}),e.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-700",children:[e.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full"}),"Enter key invia messaggio"]}),e.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-700",children:[e.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full"}),"Auto-scroll a nuovi messaggi"]})]})]}),e.jsxs(k,{className:"p-6 bg-gradient-to-r from-purple-50 to-blue-50 border-purple-200",children:[e.jsx("h3",{className:"text-gray-900 mb-3",children:"ðŸ’¡ Domande di Test Suggerite"}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:"p-3 bg-white rounded-lg text-sm text-gray-700",children:'"Come funziona la Wheel Strategy?"'}),e.jsx("div",{className:"p-3 bg-white rounded-lg text-sm text-gray-700",children:'"Cosa sono le cash-secured put?"'}),e.jsx("div",{className:"p-3 bg-white rounded-lg text-sm text-gray-700",children:'"Spiega il delta delle opzioni"'}),e.jsx("div",{className:"p-3 bg-white rounded-lg text-sm text-gray-700",children:'"Quali sono i rischi principali?" â†’ poi â†’ "Come li posso mitigare?"'})]})]})]}),e.jsx(ChatTutor,{})]})}const Ae=({...t})=>{const{theme:a="system"}=Oi();return e.jsx(Mi,{theme:a,className:"toaster group",style:{"--normal-bg":"var(--popover)","--normal-text":"var(--popover-foreground)","--normal-border":"var(--border)"},...t})},xt=768;function Fs(){const[t,a]=o.useState(void 0);return o.useEffect(()=>{const i=window.matchMedia(`(max-width: ${xt-1}px)`),n=()=>{a(window.innerWidth<xt)};return i.addEventListener("change",n),a(window.innerWidth<xt),()=>i.removeEventListener("change",n)},[]),!!t}function Us({...t}){return e.jsx(pi,{"data-slot":"sheet",...t})}function Gs({...t}){return e.jsx(fi,{"data-slot":"sheet-portal",...t})}function Hs({className:t,...a}){return e.jsx(vi,{"data-slot":"sheet-overlay",className:A("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",t),...a})}function Ws({className:t,children:a,side:i="right",...n}){return e.jsxs(Gs,{children:[e.jsx(Hs,{}),e.jsxs(xi,{"data-slot":"sheet-content",className:A("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out fixed z-50 flex flex-col gap-4 shadow-lg transition ease-in-out data-[state=closed]:duration-300 data-[state=open]:duration-500",i==="right"&&"data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right inset-y-0 right-0 h-full w-3/4 border-l sm:max-w-sm",i==="left"&&"data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left inset-y-0 left-0 h-full w-3/4 border-r sm:max-w-sm",i==="top"&&"data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top inset-x-0 top-0 h-auto border-b",i==="bottom"&&"data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom inset-x-0 bottom-0 h-auto border-t",t),...n,children:[a,e.jsxs(hi,{className:"ring-offset-background focus:ring-ring data-[state=open]:bg-secondary absolute top-4 right-4 rounded-xs opacity-70 transition-opacity hover:opacity-100 focus:ring-2 focus:ring-offset-2 focus:outline-hidden disabled:pointer-events-none",children:[e.jsx(qe,{className:"size-4"}),e.jsx("span",{className:"sr-only",children:"Close"})]})]})]})}function Qs({className:t,...a}){return e.jsx("div",{"data-slot":"sheet-header",className:A("flex flex-col gap-1.5 p-4",t),...a})}function Xs({className:t,...a}){return e.jsx(gi,{"data-slot":"sheet-title",className:A("text-foreground font-semibold",t),...a})}function Ks({className:t,...a}){return e.jsx(bi,{"data-slot":"sheet-description",className:A("text-muted-foreground text-sm",t),...a})}function ga({delayDuration:t=0,...a}){return e.jsx(ji,{"data-slot":"tooltip-provider",delayDuration:t,...a})}function Js({...t}){return e.jsx(ga,{children:e.jsx(yi,{"data-slot":"tooltip",...t})})}function Ys({...t}){return e.jsx(wi,{"data-slot":"tooltip-trigger",...t})}function Zs({className:t,sideOffset:a=0,children:i,...n}){return e.jsx(Ni,{children:e.jsxs(ki,{"data-slot":"tooltip-content",sideOffset:a,className:A("bg-primary text-primary-foreground animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 w-fit origin-(--radix-tooltip-content-transform-origin) rounded-md px-3 py-1.5 text-xs text-balance",t),...n,children:[i,e.jsx(zi,{className:"bg-primary fill-primary z-50 size-2.5 translate-y-[calc(-50%_-_2px)] rotate-45 rounded-[2px]"})]})})}const er="sidebar_state",tr=3600*24*7,ar="16rem",ir="18rem",sr="3rem",rr="b",ba=o.createContext(null);function kt(){const t=o.useContext(ba);if(!t)throw new Error("useSidebar must be used within a SidebarProvider.");return t}function nr({defaultOpen:t=!0,open:a,onOpenChange:i,className:n,style:s,children:m,...r}){const l=Fs(),[c,d]=o.useState(!1),[h,b]=o.useState(t),p=a??h,x=o.useCallback(z=>{const j=typeof z=="function"?z(p):z;i?i(j):b(j),document.cookie=`${er}=${j}; path=/; max-age=${tr}`},[i,p]),g=o.useCallback(()=>l?d(z=>!z):x(z=>!z),[l,x,d]);o.useEffect(()=>{const z=j=>{j.key===rr&&(j.metaKey||j.ctrlKey)&&(j.preventDefault(),g())};return window.addEventListener("keydown",z),()=>window.removeEventListener("keydown",z)},[g]);const v=p?"expanded":"collapsed",P=o.useMemo(()=>({state:v,open:p,setOpen:x,isMobile:l,openMobile:c,setOpenMobile:d,toggleSidebar:g}),[v,p,x,l,c,d,g]);return e.jsx(ba.Provider,{value:P,children:e.jsx(ga,{delayDuration:0,children:e.jsx("div",{"data-slot":"sidebar-wrapper",style:{"--sidebar-width":ar,"--sidebar-width-icon":sr,...s},className:A("group/sidebar-wrapper has-data-[variant=inset]:bg-sidebar flex min-h-svh w-full",n),...r,children:m})})})}function or({side:t="left",variant:a="sidebar",collapsible:i="offcanvas",className:n,children:s,...m}){const{isMobile:r,state:l,openMobile:c,setOpenMobile:d}=kt();return i==="none"?e.jsx("div",{"data-slot":"sidebar",className:A("bg-sidebar text-sidebar-foreground flex h-full w-(--sidebar-width) flex-col",n),...m,children:s}):r?e.jsx(Us,{open:c,onOpenChange:d,...m,children:e.jsxs(Ws,{"data-sidebar":"sidebar","data-slot":"sidebar","data-mobile":"true",className:"bg-sidebar text-sidebar-foreground w-(--sidebar-width) p-0 [&>button]:hidden",style:{"--sidebar-width":ir},side:t,children:[e.jsxs(Qs,{className:"sr-only",children:[e.jsx(Xs,{children:"Sidebar"}),e.jsx(Ks,{children:"Displays the mobile sidebar."})]}),e.jsx("div",{className:"flex h-full w-full flex-col",children:s})]})}):e.jsxs("div",{className:"group peer text-sidebar-foreground hidden md:block","data-state":l,"data-collapsible":l==="collapsed"?i:"","data-variant":a,"data-side":t,"data-slot":"sidebar",children:[e.jsx("div",{"data-slot":"sidebar-gap",className:A("relative w-(--sidebar-width) bg-transparent transition-[width] duration-200 ease-linear","group-data-[collapsible=offcanvas]:w-0","group-data-[side=right]:rotate-180",a==="floating"||a==="inset"?"group-data-[collapsible=icon]:w-[calc(var(--sidebar-width-icon)+(--spacing(4)))]":"group-data-[collapsible=icon]:w-(--sidebar-width-icon)")}),e.jsx("div",{"data-slot":"sidebar-container",className:A("fixed inset-y-0 z-10 hidden h-svh w-(--sidebar-width) transition-[left,right,width] duration-200 ease-linear md:flex",t==="left"?"left-0 group-data-[collapsible=offcanvas]:left-[calc(var(--sidebar-width)*-1)]":"right-0 group-data-[collapsible=offcanvas]:right-[calc(var(--sidebar-width)*-1)]",a==="floating"||a==="inset"?"p-2 group-data-[collapsible=icon]:w-[calc(var(--sidebar-width-icon)+(--spacing(4))+2px)]":"group-data-[collapsible=icon]:w-(--sidebar-width-icon) group-data-[side=left]:border-r group-data-[side=right]:border-l",n),...m,children:e.jsx("div",{"data-sidebar":"sidebar","data-slot":"sidebar-inner",className:"bg-sidebar group-data-[variant=floating]:border-sidebar-border flex h-full w-full flex-col group-data-[variant=floating]:rounded-lg group-data-[variant=floating]:border group-data-[variant=floating]:shadow-sm",children:s})})]})}function lr({className:t,onClick:a,...i}){const{toggleSidebar:n}=kt();return e.jsxs(N,{"data-sidebar":"trigger","data-slot":"sidebar-trigger",variant:"ghost",size:"icon",className:A("size-7",t),onClick:s=>{a?.(s),n()},...i,children:[e.jsx(Si,{}),e.jsx("span",{className:"sr-only",children:"Toggle Sidebar"})]})}function cr({className:t,...a}){return e.jsx("div",{"data-slot":"sidebar-header","data-sidebar":"header",className:A("flex flex-col gap-2 p-2",t),...a})}function dr({className:t,...a}){return e.jsx("div",{"data-slot":"sidebar-footer","data-sidebar":"footer",className:A("flex flex-col gap-2 p-2",t),...a})}function mr({className:t,...a}){return e.jsx("div",{"data-slot":"sidebar-content","data-sidebar":"content",className:A("flex min-h-0 flex-1 flex-col gap-2 overflow-auto group-data-[collapsible=icon]:overflow-hidden",t),...a})}function Ft({className:t,...a}){return e.jsx("div",{"data-slot":"sidebar-group","data-sidebar":"group",className:A("relative flex w-full min-w-0 flex-col p-2",t),...a})}function Ut({className:t,asChild:a=!1,...i}){const n=a?at:"div";return e.jsx(n,{"data-slot":"sidebar-group-label","data-sidebar":"group-label",className:A("text-sidebar-foreground/70 ring-sidebar-ring flex h-8 shrink-0 items-center rounded-md px-2 text-xs font-medium outline-hidden transition-[margin,opacity] duration-200 ease-linear focus-visible:ring-2 [&>svg]:size-4 [&>svg]:shrink-0","group-data-[collapsible=icon]:-mt-8 group-data-[collapsible=icon]:opacity-0",t),...i})}function Gt({className:t,...a}){return e.jsx("div",{"data-slot":"sidebar-group-content","data-sidebar":"group-content",className:A("w-full text-sm",t),...a})}function Ht({className:t,...a}){return e.jsx("ul",{"data-slot":"sidebar-menu","data-sidebar":"menu",className:A("flex w-full min-w-0 flex-col gap-1",t),...a})}function Wt({className:t,...a}){return e.jsx("li",{"data-slot":"sidebar-menu-item","data-sidebar":"menu-item",className:A("group/menu-item relative",t),...a})}const ur=nt("peer/menu-button flex w-full items-center gap-2 overflow-hidden rounded-md p-2 text-left text-sm outline-hidden ring-sidebar-ring transition-[width,height,padding] hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 active:bg-sidebar-accent active:text-sidebar-accent-foreground disabled:pointer-events-none disabled:opacity-50 group-has-data-[sidebar=menu-action]/menu-item:pr-8 aria-disabled:pointer-events-none aria-disabled:opacity-50 data-[active=true]:bg-sidebar-accent data-[active=true]:font-medium data-[active=true]:text-sidebar-accent-foreground data-[state=open]:hover:bg-sidebar-accent data-[state=open]:hover:text-sidebar-accent-foreground group-data-[collapsible=icon]:size-8! group-data-[collapsible=icon]:p-2! [&>span:last-child]:truncate [&>svg]:size-4 [&>svg]:shrink-0",{variants:{variant:{default:"hover:bg-sidebar-accent hover:text-sidebar-accent-foreground",outline:"bg-background shadow-[0_0_0_1px_hsl(var(--sidebar-border))] hover:bg-sidebar-accent hover:text-sidebar-accent-foreground hover:shadow-[0_0_0_1px_hsl(var(--sidebar-accent))]"},size:{default:"h-8 text-sm",sm:"h-7 text-xs",lg:"h-12 text-sm group-data-[collapsible=icon]:p-0!"}},defaultVariants:{variant:"default",size:"default"}});function Qt({asChild:t=!1,isActive:a=!1,variant:i="default",size:n="default",tooltip:s,className:m,...r}){const l=t?at:"button",{isMobile:c,state:d}=kt(),h=e.jsx(l,{"data-slot":"sidebar-menu-button","data-sidebar":"menu-button","data-size":n,"data-active":a,className:A(ur({variant:i,size:n}),m),...r});return s?(typeof s=="string"&&(s={children:s}),e.jsxs(Js,{children:[e.jsx(Ys,{asChild:!0,children:h}),e.jsx(Zs,{side:"right",align:"center",hidden:d!=="collapsed"||c,...s})]})):h}const pr=[{title:"Dashboard",icon:Kt,view:"dashboard"},{title:"Academy",icon:aa,view:"lessons"},{title:"Journal",icon:Ee,view:"simulation"}];function Xt({currentView:t,onNavigate:a}){return e.jsxs(or,{className:"w-64 h-full bg-zinc-900/95 border-r border-white/10 backdrop-blur-md shadow-lg z-50 fixed left-0 top-0 bottom-0",variant:"sidebar",collapsible:"icon",children:[e.jsx(cr,{className:"p-4 border-b border-white/10",children:e.jsxs("div",{className:"flex items-center gap-3 font-bold text-xl",children:[e.jsx("img",{src:"/logo.svg",alt:"BtcWheel",className:"h-8 w-auto"}),e.jsx("span",{className:"group-data-[collapsible=icon]:hidden text-white",children:"BtcWheel"})]})}),e.jsxs(mr,{children:[e.jsxs(Ft,{children:[e.jsx(Ut,{className:"text-gray-400 font-medium",children:"Menu"}),e.jsx(Gt,{children:e.jsx(Ht,{children:pr.map(i=>e.jsx(Wt,{children:e.jsxs(Qt,{onClick:()=>a(i.view),isActive:t===i.view,tooltip:i.title,className:A("transition-all duration-200",t===i.view?"bg-blue-500/10 text-blue-400 font-medium":"text-gray-400 hover:bg-white/5 hover:text-blue-400"),children:[e.jsx(i.icon,{className:"w-5 h-5"}),e.jsx("span",{children:i.title})]})},i.title))})})]}),e.jsxs(Ft,{className:"mt-auto",children:[e.jsx(Ut,{className:"text-gray-400 font-medium",children:"Settings"}),e.jsx(Gt,{children:e.jsx(Ht,{children:e.jsx(Wt,{children:e.jsxs(Qt,{onClick:()=>a("settings"),isActive:t==="settings",tooltip:"Settings",className:A("transition-all duration-200",t==="settings"?"bg-blue-500/10 text-blue-400 font-medium":"text-gray-400 hover:bg-white/5 hover:text-blue-400"),children:[e.jsx(Yt,{className:"w-5 h-5"}),e.jsx("span",{children:"Settings"})]})})})})]})]}),e.jsx(dr,{className:"p-4 border-t border-white/10",children:e.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-400 group-data-[collapsible=icon]:justify-center",children:[e.jsx(it,{className:"w-4 h-4"}),e.jsx("span",{className:"group-data-[collapsible=icon]:hidden",children:"User Profile"})]})})]})}function xr({children:t,currentView:a,onNavigate:i}){return e.jsx(nr,{defaultOpen:!0,children:e.jsxs("div",{className:"flex min-h-screen w-full bg-[#050505]",children:[e.jsx("div",{className:"w-64 flex-shrink-0 hidden md:block relative z-50",children:e.jsx(Xt,{currentView:a,onNavigate:i})}),e.jsx("div",{className:"md:hidden",children:e.jsx(Xt,{currentView:a,onNavigate:i})}),e.jsxs("main",{className:"flex-1 flex flex-col min-w-0 overflow-hidden max-w-[1400px] w-full relative z-0 md:ml-0",children:[e.jsxs("header",{className:"flex items-center gap-4 border-b border-white/10 bg-[#050505]/95 backdrop-blur-md px-6 py-4 md:hidden sticky top-0 z-40",children:[e.jsx(lr,{className:"text-white"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("img",{src:"/logo.svg",alt:"BtcWheel",className:"h-6 w-auto"}),e.jsx("span",{className:"font-semibold text-white",children:"BtcWheel"})]})]}),e.jsx("div",{className:"flex-1 overflow-auto p-4 md:p-8 w-full",children:e.jsx("div",{className:"max-w-7xl mx-auto w-full",children:t})})]})]})})}function hr(){const[t,a]=o.useState("landing"),[i,n]=o.useState(9),[s,m]=o.useState(!1),r=be(),{user:l,loading:c}=r||{user:null,loading:!0},d=(z,j)=>{t==="landing"&&z!=="landing"&&m(!0),a(z),j!==void 0&&n(j)},{onboarding:h,shouldShowOnboarding:b,loading:p}=pa(),[x,g]=o.useState(!1),[v,P]=o.useState(!1);if(o.useEffect(()=>{P(!1)},[]),o.useEffect(()=>{h.completed&&h.recommendations&&l?localStorage.getItem("btcwheel_onboarding_results_shown")?(P(!1),m(!0)):(P(!0),m(!0)):P(!1)},[h.completed,h.recommendations,l]),typeof window<"u"){const z=new URLSearchParams(window.location.search);if(z.get("test")==="chat")return e.jsx(Ds,{});if(z.get("status")==="supabase")return e.jsx(Vs,{});if(z.get("test")==="supabase")return e.jsx(Rs,{})}return t==="landing"?e.jsxs(e.Fragment,{children:[e.jsx(Te,{}),e.jsx(Ae,{}),e.jsx(Yi,{onNavigate:d})]}):c||p?e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-600 to-purple-600 flex items-center justify-center",children:e.jsxs("div",{className:"text-white text-center",children:[e.jsx("div",{className:"w-16 h-16 border-4 border-white border-t-transparent rounded-full animate-spin mx-auto mb-4"}),e.jsx("p",{className:"text-lg",children:"Caricamento..."})]})}):t==="auth"?e.jsxs(e.Fragment,{children:[e.jsx(Te,{}),e.jsx(Ae,{}),e.jsx(Rt,{onAuthSuccess:()=>{g(!0),a(b?"onboarding":"home")}})]}):!l&&s?(console.log("[App] No user found, showing auth"),e.jsxs(e.Fragment,{children:[e.jsx(Te,{}),e.jsx(Ae,{}),e.jsx(Rt,{onAuthSuccess:()=>{g(!0),a(b?"onboarding":"home")}})]})):v&&h.recommendations&&s?(console.log("[App] Rendering onboarding results"),e.jsxs(e.Fragment,{children:[e.jsx(Te,{}),e.jsx(Ae,{}),e.jsx(ks,{recommendations:h.recommendations,onStart:()=>{console.log("[App] Starting course from onboarding results"),localStorage.setItem("btcwheel_onboarding_results_shown","true"),P(!1),a("dashboard")}})]})):t==="onboarding"?(console.log("[App] Rendering onboarding view"),e.jsxs(e.Fragment,{children:[e.jsx(Te,{}),e.jsx(Ae,{}),e.jsx(Ns,{onComplete:()=>{console.log("[App] âœ… Onboarding completed! Navigating to dashboard..."),m(!0),a("dashboard")}})]})):(console.log("[App] Rendering normal app flow, currentView:",t),e.jsxs("div",{className:"flex h-screen bg-[#050505] text-white overflow-hidden",children:[e.jsx(Te,{}),e.jsx(Ms,{}),e.jsx(Ae,{}),e.jsx(Bs,{}),e.jsx(Os,{}),e.jsxs(xr,{currentView:t,onNavigate:d,children:[t==="home"&&e.jsx(as,{onNavigate:d}),t==="dashboard"&&e.jsx(ss,{onNavigate:d}),t==="lessons"&&e.jsx(xs,{onNavigate:d}),t==="lesson"&&e.jsx(ms,{onNavigate:z=>d(z),lessonId:i}),t==="badges"&&e.jsx(hs,{onNavigate:d}),t==="simulation"&&e.jsx(bs,{onNavigate:d}),t==="leaderboard"&&e.jsx(js,{onNavigate:d}),t==="settings"&&e.jsx(ys,{onNavigate:d})]}),e.jsx(ha,{lessonContext:t==="lesson"?{lessonId:i,lessonTitle:`Lezione ${i}`}:void 0})]}))}function gr(){return e.jsx(hr,{})}Ci.createRoot(document.getElementById("root")).render(e.jsx(gr,{}));
